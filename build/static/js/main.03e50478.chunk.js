(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,a){e.exports=a.p+"static/media/login-logo.a0b701b0.png"},278:function(e,t){},311:function(e,t,a){e.exports=a.p+"static/media/sb-pin-logo.f6f7f8f2.png"},316:function(e,t,a){e.exports=a(716)},56:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAQlBMVEX///+np6ehoaGfn5+jo6Pu7u6pqani4uK0tLTLy8vn5+e6urqvr6/09PTGxsbx8fHS0tLb29vV1dW+vr7IyMiYmJgWkDCGAAAHqklEQVR4nO2ci5KrKBBAFVAEREHN///qdjdojNHM3TvWRrf6VM1U4gM9grxsUxQMwzAMwzAMwzAMwzAMwzAMwzAMwzAMwzAMwzAMwzAMwzAMwzAMwzAMc1v6N759RidjHwKQGfz80N8+p3MpiTZ9aelL/d0zOplRvRsqs6yuVI2UN8rWpgXc8lWLnTws5XIrdukClM1/fqJ/S//Au+0xf/V04yFJJH+R7bz+kZc87lP9eGL5Vr3XpEj1uvl6l+tiXV3+Dhe/7fCRTv7SD8vwle9GI34vCJWs+/lIX8KfkIOIuGyrEdQ5huX4bZMjxpME53bzerg/O3+lhKK/wy0u26H7I0PRGo3tnrehFQeSdzYUrlrt0Hf7le99DVVtN7v0zV42Xtbwp5pG7dWRe23oXQ3FtLtXfG9Fb2qoutWm6y728JaLNzVcupv91EJrUXfLPTlu78XrGn7q04g520aZNlOymRdBE7lGlN8yOANfri6D2FatV8fqD6RN/Gs2S7u/5/ccPuOEOkLkaqbdVj9pcZQvW1+2lH5o8UXqygzbO3WuYF+r08vWNB8Mc169T3HIVNs0tzdMw3b73n9RA60xL5l7Q0OVujN7Q+TUk4u3Nwy0QbezKo129f/EcK/Tkwzt7Q3TM4pup5Smztzt87BMjcJbY7E0F7e/D3NO9e8DJZWmuKfbG4q0xbZLszSUrytuaZi6mnrbIOYqaDOXfEfDeZJ3O8DKM6ObhvKWhvPw8HXmqc5LN725Wxous1DuWVBFmwW3dewtDZehYKHTRDCM5Ie8xG/vznsals9BXxVGN5rn+L7ZbnlXw6PnLe/TO3c1VPuKO/NXdzWEM6/e9vF70/r3NSyF2eyy01O9t2GplHnGzPhQ78+w3tkQJ4LrMUSth66VRzPI9zZMOak+PAH+Pxj+xGUNp7NiMS4bM7QzWfhXqOsGfrlzMvGyhRRoT1BU5aUjFM0cPPrXvDwqviS++hX3iaFlGIZhGIZhGIZhGIb5j/FRF0WMeQpz/qBjnGdUhik9zo2ZeUdtTP7chylU673Thxh9YdOSilLzQ95um0AFCeTDxbww72jj7yfmLL5yLVWKdPXwgZa2SqRIGCuUFBLDR0tFc2XzZGcjhBQKzyvABkJOtHeKHOolBjq3siomITHSJuAvLGiJSS1TbSkBPKyhBPB4vqZDeAyRox2N/H1MuMX3clWtKJ8sfKClao6QKdVoYy0GjBgxAcjhB0bV0Y742LeSKthBCV142JvySKsaLkQrqsKkdILEtaqzcXmB9JmAxQSCgutRNKrRGv5RICdei3BCuH82LCnLQjashEsz01q09BX+12pdYEpyQYmJAhMHNZIhlS1D89rZUGXDSO//apHfAk7XtBV9MVIcsVFd4QUdXcHCLk2Nn2lIBx7rZBgF5BsKDemprlJbQ0mhFxPkSEMngRcBDFOQoquXPFSt0snQkIifn/YnmQ5WtBQGb0HdJn0HqXZli+meZ9i0lGW1a/OBfTrxkA3FxtCn916MjNmwJ0NX0/mrcTEUAV9UQMMpG9ZrwzhWlI/pPLSgW8PBRelUwNDq8wzdiFnmRUh52Kh8ybNhsy2l2TDUem0oOocVlZdhKaXS1uXasGjzo7V85xfFgaGosLY60XDASstKnQzhdCMdLTxjD/YMyX5lOBoMjdLSPg2rDhatDGfMEpxyYNiPUPecWEotqgzSk2EPdXpPdcy/NdRY6xpJZTEbWiimO4aQXvPRsNJw7BMNC7zJR1VQ1RfxPFMliIbGmGmOL2w+G3o5YkVTPA0ttDxPQ0hqvmS+VCl08ciwgFw+0xAzr26SF5W1JtVlcEJClhINVz9Kc2RYYOwXNIFrQyhtw2wo5fOlJ9+q3OQcGDrpzzQcoVcjTTJssGsyiZgNbVVuW4tDQyc8VDQvhlDaFkOr10+AR4X126FhFOFMwyB0BXU/GVIQXqRq/qA9zIaV9htDUNKgszaE0jaI5T5U62fcDu/FQ0Mvm+FEQytNlD0ZejoQdWR+MJwecWMIVU2A0vBi6FQn3trDlAx2Xw4NodHqTjT0wnUq1S9aUcwPBuD/YGjE1tDLbiyLV8MIvbmtoX9QY4Hdl2PDQT1bzd8bFm2NjTEaBtU4oIaDHPXavNwYVtkQSnjtNoZeoKF5NUy/IjVuDN2LoT/XsKM30NDQpbD0EbrR6Zgex0yv/VKqI2BLC/0rPHPsV5OhozcQXgyLpoRzHlQq+7m9SXUqbuOwSqPVfRqb4fuaZFi05ZmGg8KBQZlLaoFZaTD3gq8a/ATjBnydNx+xU03lA56mFaX2toTTJMOANhtDSFrjwGHwVStyuz+q0fsOt4uitl7j8AuGpR0uhOxNhuEUQwl2ksZ5OEKDEXAuQGlNhFGtoA5W+pUymSsKTwNiGp+ONDJ2WPIc7oWDaTmPgGW6SQUNMHC7OeKLElC02lECKYdxIcp1aUd5wu8R9R0UqglHhxPectMES9Lkgu9wQdU5R2NHk5l3DM5NaepBj26kXTrIH09bYFqh84XuaBMz0QAJtlv13MySQIQVycTDQoPlP653ZBiGYRiGYRiGYRiGYRiGYRiGYRiGYRiGYRiGYRiGYRiGYRiGYRiGYRiGYRiGuRL/AFdbWYpTnTEdAAAAAElFTkSuQmCC"},619:function(e,t){},620:function(e,t){},709:function(e,t,a){},710:function(e,t,a){},711:function(e,t,a){},712:function(e,t,a){},713:function(e,t,a){},715:function(e,t,a){},716:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),l=a(37),s=a.n(l),i=a(11),c=a(12),d=a(14),m=a(13),u=a(15),p=a(315),h=a(721),g=a(722),f=a(314),E=a(16),y=a(91),v=a(62),b=a(301),A=a(6),N=function(e){return localStorage.getItem(e)},S=function(e,t){return localStorage.setItem(e,t)},C={currentUser:N("userData")||null},w=Object(v.combineReducers)({global:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object(A.a)({},e,{currentUser:t.payload});default:return e}}}),P=a(302),k=a.n(P),D=function(e){return k.a.create({baseURL:"https://www.streetby.com",timeout:1e4,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})},O=[b.a.withExtraArgument({api:D})],x=Object(v.createStore)(w,{},Object(v.compose)(v.applyMiddleware.apply(void 0,O))),T=a(18),I=a(720),F=function(e,t){return function(a,n,r){(0,r.api)(e).get("/provider/places").then(function(e){if(e&&e.data)return a({type:"GET_PROVIDER_PLACES",payload:e.data}),t(null,e.data);t(e,null)}).catch(function(e){console.error({error:e}),t(e,null)})}},M=function(e,t){return function(a,n,r){(0,r.api)(e).get("/provider/places").then(function(e){if(e&&e.data)return t(null,e.data);t(e,null)}).catch(function(e){t(e,null)})}},B=function(e,t,a){return function(n,r,o){var l=o.api,s=e;l(t).patch("/provider/update-profile",s).then(function(e){if(e&&e.data)return a(null,e.data);a(e,null)}).catch(function(e){a(e,null)})}},G=function(e,t,a){return function(){D(t).get("/product-categories/all",{params:e}).then(function(e){if(e&&e.data)return a(null,e.data);a(e,null)}).catch(function(e){a(e,null)})}},L=function(e,t,a,n){return function(){D(a).get("/places/".concat(t,"/product-categories/all"),{params:e}).then(function(e){if(e&&e.data)return n(null,e.data);n(e,null)}).catch(function(e){n(e,null)})}},R=function(e,t,a){return function(){D(t).get("/provider/product-categories",{params:e}).then(function(e){if(e&&e.data)return a(null,e.data);a(e,null)}).catch(function(e){a(e,null)})}},j=function(e,t,a,n){return function(){D(a).get("/places/".concat(t,"/product-categories"),{params:e}).then(function(e){if(e&&e.data)return n(null,e.data);n(e,null)}).catch(function(e){n(e,null)})}},J=function(e,t,a,n){return function(r,o){var l=e;D(a).patch("/places/product-categories/"+t,l).then(function(e){if(e&&e.data)return n(null,e.data);n(e,null)}).catch(function(e){n(e,null)})}},U=function(e,t,a){return function(){D(t).delete("/places/product-categories/".concat(e)).then(function(e){if(e&&e.data)return a(null,e.data);a(e,null)}).catch(function(e){a(e,null)})}},H=function(e,t,a,n){return function(r,o){D(a).post("places/product-categories/".concat(e,"/media"),t).then(function(e){if(e&&e.data)return n(null,e.data)}).catch(function(e){n(e,null)})}},Q=function(e,t,a,n){return function(r,o){D(a).delete("places/product-categories/".concat(e,"/media/").concat(t)).then(function(e){if(e&&e.data)return n(null,e.data)}).catch(function(e){n(e,null)})}},V=a(17),z=a.n(V),Y=a(137),K=a.n(Y),_=a(1),q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(T.a)({},n,r)),"emailReset"===n&&r.length>0&&a.setState({resetPasswordText:""})},a.handleSubmit=function(e){e.preventDefault(),a.setState({submitted:!0});var t=a.state,n=t.email,r=t.password;n&&r&&(a.setState({loggingIn:!0}),a.props.login(n,r,function(e,t){if(!e&&t){var n=JSON.parse(N("userData")).sessionToken,r=JSON.parse(N("defaultPage"));a.props.getProviderPlaces(n,function(e,t){if(!e&&t){var o={};if(t.places&&t.places instanceof Array&&t.places.length>0)if(""===r){var l=t.places.find(function(e){return e.isDefault});l&&l._id?(r=l._id,o=l):(r=t.places[0]._id,o=t.places[0]),S("defaultPage",JSON.stringify(r))}else o=t.places.find(function(e){return e._id.toString()===r});o&&o._id?(S("pageInfo",JSON.stringify(o)),a.props.getProductCategoriesAllV2({},r,n,function(e,t){e&&console.log({error:e}),t?(S("hasCategories",!0),a.props.history.push("/products"),window.location.reload()):(S("hasCategories",!1),a.props.history.push("/products"),window.location.reload()),a.setState({isLoading:!1})})):(a.props.history.push("/products"),window.location.reload())}else a.props.history.push("/products"),window.location.reload()})}else if(e){if(e.response&&e.response.status){var o=e.response.status,l=e.response.statusText;401===o?a.setState({statusText:"Invalid username or password.",submitted:!1,password:""}):a.setState({statusText:l})}else"Network Error"===e.message&&a.setState({statusText:"Network Error. Please check your connection."});a.setLoading()}}))},a.toggleResetPasswordModal=function(){a.setState(function(e){return{modal:!e.modal}}),a.setState({resettingPassword:!1,emailReset:"",resetPasswordText:""})},a.handleResetPassword=function(e){e.preventDefault(),a.setState({resettingPassword:!0});var t=a.state.emailReset;t?(a.props.sendResetPasswordRequest(t,function(e,t){if(!e&&t)alert("A password reset link has been sent to your email"),a.toggleResetPasswordModal();else{if(e)if(e.response&&e.response.status){var n=e.response.statusText;a.setState({resetPasswordText:n})}else"Network Error"===e.message&&a.setState({resetPasswordText:"Network Error. Please check your connection."});a.toggleResetPasswordModal()}}),a.setState({resettingPassword:!1})):a.setState({resetPasswordText:"Please enter an email address",resettingPassword:!1})},a.state={loggedIn:!1,email:"",emailReset:"",password:"",submitted:!1,isLoading:!0,loggingIn:!1,resettingPassword:!1,resetPasswordText:"",modal:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){if(this.setState({isLoading:!1}),null!==N("userData")){var e=JSON.parse(N("userData")).sessionToken;return""===JSON.parse(N("defaultPage"))&&this.props.getProviderPlaces(e,function(e,t){if(!e&&t){var a="";if(t.places&&t.places instanceof Array&&t.places.length>0){var n=t.places.find(function(e){return e.isDefault});a=n&&n._id?n._id:t.places[0]._id}S("defaultPage",JSON.stringify(a))}}),this.setState({loggedIn:!0})}return this.setState({loggedIn:!1})}},{key:"setLoading",value:function(){this.setState(function(e){return{loading:!e.loading}})}},{key:"render",value:function(){if(!JSON.parse(N("userData"))){var e=this.state,t=e.email,a=e.password,n=e.submitted,r=e.loggingIn,l=e.statusText;return this.state.isLoading?o.a.createElement(z.a,{active:!0,spinner:!0,text:"Loading..."}):o.a.createElement("div",{className:"app"},o.a.createElement("div",{className:"app-left"},o.a.createElement("div",{className:"col-sm-12 col-lg-6",style:{margin:"0 auto",width:"300px",top:"25%"}},o.a.createElement("img",{className:"login-logo",alt:"Streetby",src:K.a}))),o.a.createElement("div",{className:"app-right"},o.a.createElement("div",{className:"login-container"},o.a.createElement("div",{className:"col-sm-12"},o.a.createElement("h2",{className:"page-title"},"LOGIN"),l?o.a.createElement("p",{className:"welcome-text text-danger"},l):o.a.createElement("p",{className:"welcome-text"},"Welcome back! Please login to your account"),o.a.createElement("form",{name:"form",onSubmit:this.handleSubmit},o.a.createElement("div",{className:"form-field-group"+(n&&!t?" has-error text-danger":"")},o.a.createElement("input",{type:"text",className:"login-input"+(n&&!t?" has-error":""),name:"email",value:t,onChange:this.handleChange,placeholder:"Email"}),n&&!t&&o.a.createElement("div",{className:"help-block"},"Username is required")),o.a.createElement("div",{className:"form-field-group"+(n&&!a?" has-error text-danger":"")},o.a.createElement("input",{type:"password",className:"login-input"+(n&&!a?" has-error":""),name:"password",value:a,onChange:this.handleChange,placeholder:"Password"}),n&&!a&&o.a.createElement("div",{className:"help-block"},"Password is required")),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",lg:"4",md:"6",sm:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("button",{className:"btn btn-round btn-primary-v2"},"Login"),r&&!l&&o.a.createElement("img",{loading:"lazy",alt:"loading",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}))),o.a.createElement(_.Col,{className:"pl-md-1",lg:"8",md:"6",sm:"6"},o.a.createElement(_.FormGroup,{style:{lineHeight:"3rem"}},o.a.createElement("div",{className:"forgot-password"},o.a.createElement(I.a,{to:"#",onClick:this.toggleResetPasswordModal},"Forgot Password")))),o.a.createElement(_.Col,{className:"p4-md-1",sm:"12"},o.a.createElement(_.FormGroup,{style:{lineHeight:"3rem"}},o.a.createElement("div",{className:"register"},"Don't have an account? ",o.a.createElement(I.a,{to:"/register",onClick:this.toggleResetPasswordModal},"Register"))))))))),o.a.createElement("div",null,o.a.createElement(_.Modal,{isOpen:this.state.modal,toggle:this.toggleResetPasswordModal,backdrop:"static",className:this.props.className},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h4",{className:"modal-title"},"Forgot Password"),o.a.createElement("button",{type:"button",className:"close",onClick:this.toggleResetPasswordModal,"aria-label":"Close",style:{color:"rgba(0, 0, 0, 0.6)"}},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement(_.ModalBody,null,o.a.createElement("form",{action:""},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"emailReset"},"A reset link will be sent to your email address"),o.a.createElement("p",{className:"text-danger"},this.state.resetPasswordText),o.a.createElement(_.Input,{type:"text",name:"emailReset",id:"emailReset",placeholder:"Email Address",onChange:this.handleChange})))),o.a.createElement(_.ModalFooter,null,o.a.createElement(_.Button,{color:"info",onClick:this.handleResetPassword},"Reset Password")," ",this.state.resettingPassword&&o.a.createElement("img",{alt:"loading",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}),o.a.createElement(_.Button,{color:"secondary",onClick:this.toggleResetPasswordModal},"Cancel")))))}this.props.history.push("/products"),window.location.reload()}}]),t}(o.a.Component),W=Object(E.b)(function(){return{}},{login:function(e,t,a){return function(n,r,o){var l=o.api,s={email:e,password:t};l().post("/provider/login",s).then(function(e){if(e&&e.data){n({type:"SET_USER",payload:e.data});var t=e.data,r={info:t.info,email:t.email,userId:t.objectId,isGuest:t.isGuest,isAdmin:t.isAdmin,isSBTours:t.isSBTours,sessionToken:t.sessionToken,createdAt:t.createdAt},o=t.defaultPage?t.defaultPage:"";return S("userData",JSON.stringify(r)),S("defaultPage",JSON.stringify(o)),a(null,!0)}a(!0,null)}).catch(function(e){a(e,null)})}},sendResetPasswordRequest:function(e,t){return function(a,n,r){var o=r.api,l={email:e};o().post("/provider/resetPasswordRequest",l).then(function(e){if(e&&e.data)return t(null,!0);t(!0,null)}).catch(function(e){t(e,null)})}},getProviderPlaces:F,getProductCategoriesAllV2:L})(q),X=function(e,t,a){return function(){D(t).get("/provider/places/"+e).then(function(e){if(e&&e.data)return a(null,e.data);a(e,null)}).catch(function(e){a(e,null)})}},Z=function(e,t,a){return function(){var n=e;D(t).post("/provider/places",n).then(function(e){if(e&&e.data)return a(null,e.data);a(e,null)}).catch(function(e){a(e,null)})}},$=function(e,t,a,n){return function(r,o){var l=e;D(a).patch("/provider/places/"+t,l).then(function(e){if(e&&e.data)return n(null,e.data);n(e,null)}).catch(function(e){n(e,null)})}},ee=function(e){return function(){D().get("/provider/page-types").then(function(t){if(t&&t.data)return e(null,t.data);e(t,null)}).catch(function(t){e(t,null)})}},te=function(e){return function(){D().get("/page-categories/all").then(function(t){if(t&&t.data)return e(null,t.data);e(t,null)}).catch(function(t){e(t,null)})}},ae=function(e){return function(){D().get("/provider/amenities").then(function(t){if(t&&t.data)return e(null,t.data);e(t,null)}).catch(function(t){e(t,null)})}},ne=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;if("city"===n&&r){var o=a.state.cities,l=o&&o.length>0?o.find(function(e){return e.name===r}):{},s=(l&&l.location?l:{}).location.coordinates;if(s&&s.length>0){var i=Number(s[1]),c=Number(s[0]);i>0&&c>0?a.setState({lat:i,lng:c}):(a.setState({lat:8.48479728734788,lng:124.65104731086728}),a.showNotificationError("Map coordinates values are invalid!"))}}a.setState(Object(T.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault(),a.setState({submitted:!0,statusText:""});var t=a.state,n=t.firstName,r=t.lastName,o=t.email,l=t.phone,s=t.password,i=t.confirmPassword,c=t.storeName,d=t.address,m=t.pageType,u=t.city,p=t.postalCode,h=t.numberOfEmployees,g=t.validPhoneNumber,f={firstName:n,lastName:r,email:o,contactNumber:l,password:s},E={name:c,addressLine1:d,pageType:m,city:u,postalCode:p,location:{coordinates:[a.state.lng,a.state.lat]},numberOfEmployees:h};n&&r&&o&&l&&s&&i&&c&&d&&m&&h&&u&&p&&g?s!==i?a.setState({statusText:"Your password confirmation did not match passwords did not match."}):(a.setState({signingUp:!0}),a.props.register(f,function(e,t){if(!e&&t)t.sessionToken&&t.userId&&t.email&&(c&&d&&m&&u&&p?a.props.addPage(E,t.sessionToken,function(e,n){if(e)console.error({error:e}),a.setState({submitted:!1,signingUp:!1}),e instanceof String?a.showNotificationError(e):e.response&&e.response instanceof String?a.showNotificationError(e.response):a.showNotificationError("There is an problem saving the page. Please try again!");else{a.setState({submitted:!1,signingUp:!1,loggedIn:!1,firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",storeName:"",address:"",city:"",postalCode:"",numberOfEmployees:"",pageType:"",validPhoneNumber:!1}),a.showNotification("You successfully created your merchant account. You will be redirected to activation.");var r={info:t.info,email:t.email,userId:t.userId,isGuest:!!t.isGuest&&t.isGuest,isAdmin:!!t.isAdmin&&t.isAdmin,isSBTours:!!t.isSBTours&&t.isSBTours,sessionToken:t.sessionToken,createdAt:t.createdAt};if(n&&n.place){var o=n.place,l={_id:o._id,name:o.name,addressLine1:o.addressLine1,city:o.city,country:"",province:"",postalCode:o.postalCode,pageType:o.pageType,bankaccount:{},isVerified:!1,isActive:!1,photos:{},useCreatedProductCategory:!1,hideTutorials:!0,productUploadXLSEnabled:!!o.productUploadXLSEnabled,productVouchersEnabled:!!o.productVouchersEnabled};S("pageInfo",JSON.stringify(l)),S("defaultPage",JSON.stringify(o._id))}S("userData",JSON.stringify(r)),S("hasCategories",!1),S("hasProducts",!1),setTimeout(function(){a.props.history.push("/statement-of-agreement"),window.location.reload()},3e3)}}):(a.setState({submitted:!0,signingUp:!1}),a.showNotificationError("Some field are required! Please fill the missing fields.")));else if(e){if(a.setState({submitted:!1,signingUp:!1}),"error"===e.status)"Network Error"===e.message?a.showNotificationError("Network Error. Please check your connection."):a.showNotificationError(e.message);else if(e.response&&e.response.data&&e.response.data.message){var n=e.response.data.message;n&&"string"===typeof n?a.showNotificationError(n):a.showNotificationError("There is an error in signing up. Please try again.")}a.setLoading()}})):a.showNotificationError("Some fields are missing. Please complete the form to continue.")},a.handlePhoneNumber=function(e){var t=e.target.value;a.setState({phone:t}),re.exec(t)?a.setState({validPhoneNumber:!0}):a.setState({validPhoneNumber:!1})},a.onDismiss=function(){a.setState({visible:!1,alertText:"",alertColor:"primary"})},a.showNotification=function(e){a.setState({visible:!0,alertText:e,alertColor:"success"})},a.showNotificationError=function(e){a.setState({visible:!0,alertText:e,alertColor:"danger"})},a.state={loggedIn:!1,firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",storeName:"",address:"",city:"",postalCode:"",numberOfEmployees:"",pageType:"",validPhoneNumber:!1,submitted:!1,isLoading:!0,signingUp:!1,pageTypes:[],cities:[],visible:!1,alertText:"",alertColor:"primary",lat:8.48479728734788,lng:124.65104731086728},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.setState({isLoading:!1}),null!==N("userData")){var t=JSON.parse(N("userData")).sessionToken;return""===JSON.parse(N("defaultPage"))&&this.props.getProviderPlaces(t,function(e,t){if(!e&&t){var a="";if(t.places&&t.places instanceof Array&&t.places.length>0){var n=t.places.find(function(e){return e.isDefault});a=n&&n._id?n._id:t.places[0]._id}S("defaultPage",JSON.stringify(a))}}),this.setState({loggedIn:!0})}return this.props.getPageTypes(function(t,a){!t&&a&&e.setState({pageTypes:a})}),D().get("/provider/supported-cities").then(function(t){if(t&&t.data){var a=t.data;e.setState({cities:a}),e.setState({isLoading:!1})}else e.setState({isLoading:!1})}).catch(function(t){e.setState({isLoading:!1})}),this.setState({loggedIn:!1})}},{key:"setLoading",value:function(){this.setState(function(e){return{loading:!e.loading}})}},{key:"renderPageTypes",value:function(){if(void 0!==this.state.pageTypes||null!==this.state.pageTypes)return this.state.pageTypes.filter(function(e){return e.isActive=!0}).map(function(e,t){return o.a.createElement("option",{key:t,value:e._id},e.name)})}},{key:"renderCities",value:function(e){if(e&&e.length>0)return e.filter(function(e){return e.isActive=!0}).map(function(e,t){return o.a.createElement("option",{key:t,value:e.name},e.name)})}},{key:"render",value:function(){if(!JSON.parse(N("userData"))){var e=this.state,t=e.firstName,a=e.lastName,n=e.email,r=e.phone,l=e.password,s=e.confirmPassword,i=e.storeName,c=e.address,d=e.city,m=e.postalCode,u=e.numberOfEmployees,p=e.pageType,h=e.submitted,g=e.statusText,f=e.validPhoneNumber;return this.state.isLoading?o.a.createElement(z.a,{active:!0,spinner:!0,text:"Loading..."}):o.a.createElement("div",{className:"app"},o.a.createElement("div",{className:"app-left"},o.a.createElement("div",{className:"col-sm-12 col-lg-6",style:{margin:"0 auto",width:"300px",top:"25%"}},o.a.createElement("img",{className:"login-logo",alt:"Streetby",src:K.a}))),o.a.createElement("div",{className:"app-right"},o.a.createElement("div",{className:"register-container"},o.a.createElement("div",{className:"col-lg-12"},o.a.createElement("h2",{className:"page-title"},"Sign Up as New Merchant"),g?o.a.createElement("p",{className:"welcome-text text-danger"},g):o.a.createElement("p",{className:"welcome-text"},"\xa0"),o.a.createElement(_.Alert,{color:this.state.alertColor,isOpen:this.state.visible,toggle:this.onDismiss,fade:!1},this.state.alertText),o.a.createElement(_.Form,{name:"form",onSubmit:this.handleSubmit},o.a.createElement(_.Row,null,o.a.createElement("div",{className:"form-field-group col-md-6 col-sm-6"+(h&&!t?" has-error text-danger":"")},o.a.createElement(_.Input,{type:"text",bsSize:"lr",className:h&&!t?" has-error ":"",name:"firstName",value:t,onChange:this.handleChange,placeholder:"First Name"}),h&&!t&&o.a.createElement("div",{className:"help-block"},"First Name is required")),o.a.createElement("div",{className:"form-field-group col-md-6 col-sm-6"+(h&&!a?" has-error text-danger":"")},o.a.createElement(_.Input,{type:"text",bsSize:"lr",className:h&&!a?" has-error":"",name:"lastName",value:a,onChange:this.handleChange,placeholder:"Last Name"}),h&&!a&&o.a.createElement("div",{className:"help-block"},"Last Name is required"))),o.a.createElement(_.Row,null,o.a.createElement("div",{className:"form-field-group col-sm-12"+(h&&!i?" has-error text-danger":"")},o.a.createElement(_.Input,{type:"text",bsSize:"lr",className:h&&!i?" has-error ":"",name:"storeName",value:i,onChange:this.handleChange,placeholder:"Store Name"}),h&&!i&&o.a.createElement("div",{className:"help-block"},"Store Name is required"))),o.a.createElement(_.Row,null,o.a.createElement("div",{className:"form-field-group col-md-6 col-sm-6"+(h&&!n?" has-error text-danger":"")},o.a.createElement(_.Input,{type:"text",bsSize:"lr",className:h&&!n?" has-error ":"",name:"email",value:n,onChange:this.handleChange,placeholder:"Email"}),h&&!n&&o.a.createElement("div",{className:"help-block"},"Email is required")),o.a.createElement("div",{className:"form-field-group col-md-6 col-sm-6"+(!h||r&&f?"":" has-error text-danger")},o.a.createElement(_.Input,{type:"text",bsSize:"lr",className:!h||r||f?"":" has-error",name:"phone",value:r,onChange:this.handlePhoneNumber,placeholder:"Phone"}),h&&!r&&o.a.createElement("div",{className:"help-block"},"Phone No. is required"),h&&!f&&o.a.createElement("div",{className:"help-block"},"Phone No. is not valid"))),o.a.createElement(_.Row,null,o.a.createElement(_.FormGroup,{className:"form-field-group col-sm-12"+(h&&!c?" has-error text-danger":"")},o.a.createElement(_.Input,{type:"text",bsSize:"lr",className:h&&!c?" has-error ":"",name:"address",value:c,onChange:this.handleChange,placeholder:"Address"}),h&&!c&&o.a.createElement("div",{className:"help-block"},"Address is required"))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,{className:"form-field-group"+(h&&!d?" has-error text-danger":"")},o.a.createElement(_.Input,{id:"city",bsSize:"lr",name:"city",placeholder:"City/Town",type:"select",value:d,onChange:this.handleChange},o.a.createElement("option",{value:""},"City/Town"),this.renderCities(this.state.cities)),h&&!d&&o.a.createElement("div",{className:"help-block"},"City/Town is required"))),o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,{className:"form-field-group"+(h&&!m?" has-error text-danger":"")},o.a.createElement(_.Input,{bsSize:"lr",name:"postalCode",placeholder:"Postal Code",type:"text",value:m,onChange:this.handleChange}),h&&!m&&o.a.createElement("div",{className:"help-block"},"Postal Code is required")))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"6"},o.a.createElement(_.FormGroup,{className:"form-field-group"+(this.state.submitted&&!p?" has-error text-danger":"")},o.a.createElement(_.Input,{id:"pageType",bsSize:"lr",name:"pageType",placeholder:"Select Industry",type:"select",value:p,onChange:this.handleChange},o.a.createElement("option",{value:""},"Select Industry"),this.renderPageTypes()),h&&!p&&o.a.createElement("div",{className:"help-block"},"Industry is required"))),o.a.createElement(_.Col,{sm:"12",md:"6"},o.a.createElement(_.FormGroup,{className:"form-field-group"+(h&&!u?" has-error text-danger":"")},o.a.createElement(_.Input,{bsSize:"lr",name:"numberOfEmployees",placeholder:"No. of Employees",type:"number",value:u,onChange:this.handleChange}),h&&!u&&o.a.createElement("div",{className:"help-block"},"No. of Employees is required")))),o.a.createElement(_.Row,null,o.a.createElement("div",{className:"form-field-group col-md-6 col-sm-6"+(h&&!l?" has-error text-danger":"")},o.a.createElement(_.Input,{type:"password",bsSize:"lr",className:h&&!l?" has-error ":"",name:"password",value:l,onChange:this.handleChange,placeholder:"Password"}),h&&!l&&o.a.createElement("div",{className:"help-block"},"Password is required")),o.a.createElement("div",{className:"form-field-group col-md-6 col-sm-6"+(h&&!s?" has-error text-danger":h&&""!==l&&l!==s?" has-error text-danger":"")},o.a.createElement(_.Input,{type:"password",bsSize:"lr",className:h&&!s?" has-error":h&&l!==s?" has-error":"",name:"confirmPassword",value:s,onChange:this.handleChange,placeholder:"Confirm Password"}),h&&!s&&o.a.createElement("div",{className:"help-block"},"Please confirm password"),h&&""!==l&&l!==s&&o.a.createElement("div",{className:"help-block"},"Confirm Password did not match"))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",lg:"4",md:"6",sm:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Button,{className:"btn-lg btn-round btn-primary-v2"},"Sign Up"))),o.a.createElement(_.Col,{className:"p4-md-1",sm:"12"},o.a.createElement(_.FormGroup,{style:{lineHeight:"3rem"}},o.a.createElement("div",{className:"login"},"Have an account?  ",o.a.createElement(I.a,{to:"/login"},"Log in"))))))))),o.a.createElement(z.a,{active:this.state.signingUp,spinner:!0,text:"Saving..."}))}this.props.history.push("/products"),window.location.reload()}}]),t}(o.a.Component),re=/^\(?([0-9]{11})$/,oe=Object(E.b)(function(){return{}},{register:function(e,t){return function(a,n,r){(0,r.api)().post("/provider/register",e).then(function(e){if(e&&e.data){var n=e.data;if(200===e.status)if("error"===n.status)t(n,null);else if(201===n.statusCode){a({type:"SET_USER",payload:e.data});var r={info:n.info,email:n.email,userId:n.objectId,isGuest:n.isGuest,isAdmin:n.isAdmin,isSBTours:n.isSBTours,sessionToken:n.sessionToken,createdAt:n.createdAt};t(null,r)}}}).catch(function(e){t(e,null)})}},addPage:Z,getPageTypes:ee})(ne),le=a(93),se=a(27),ie=a(206),ce=a(8),de=a.n(ce),me=a(3),ue=a(78),pe=a.n(ue),he=function(e){function t(e){var a;Object(i.a)(this,t);var n=JSON.parse(N("userData"));return(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).updateColor=function(){window.innerWidth<993&&a.state.collapseOpen?a.setState({color:"bg-white"}):a.setState({color:"navbar-transparent"})},a.toggleCollapse=function(){a.state.collapseOpen?a.setState({color:"navbar-transparent"}):a.setState({color:"bg-white"}),a.setState({collapseOpen:!a.state.collapseOpen})},a.toggleModalSearch=function(){a.setState({modalSearch:!a.state.modalSearch})},a.onLogout=function(){if(!window.confirm("Are you sure you want to logout?"))return!1;localStorage.clear(),setTimeout(function(){if(null===N("userData"))return a.props.history.push("/login"),window.location.reload(),a.setState({loggedIn:!1})},1e3)},a.state={collapseOpen:!1,modalSearch:!1,color:"navbar-transparent",userData:n,places:[],defaultPage:"",isSwitching:!1},a.changeDefaultPage=a.changeDefaultPage.bind(Object(se.a)(Object(se.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("userData")).sessionToken,a=JSON.parse(N("defaultPage"));this.setState({defaultPage:a}),window.addEventListener("resize",this.updateColor),this.props.getProviderPlaces(t,function(t,a){!t&&a&&e.setState({places:a.places})})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateColor)}},{key:"renderPageSwitch",value:function(e){var t=this,a=JSON.parse(N("userData")),n=JSON.parse(N("defaultPage")),r=JSON.parse(N("pageInfo"));if(a){if(!r){var l=a.sessionToken;this.props.getProviderPlaces(l,function(e,t){if(!e&&t&&t.places&&t.places instanceof Array&&t.places.length>0)if(""===n){var a=t.places.find(function(e){return e.isDefault});a&&a._id?(n=a._id,r=a,S("pageInfo",JSON.stringify(r))):(n=t.places[0]._id,r=t.places[0],S("pageInfo",JSON.stringify(r))),S("defaultPage",JSON.stringify(n))}else r=t.places.find(function(e){return e._id.toString()===n}),S("pageInfo",JSON.stringify(r))})}if(e)return e.map(function(e,a){return o.a.createElement(o.a.Fragment,{key:e._id},o.a.createElement(_.DropdownItem,{divider:!0,tag:"li",className:"page-switch-list"}),o.a.createElement(_.NavLink,{tag:"li",className:n===e._id?"default-page page-switch-list":"page-switch-list"},o.a.createElement(_.DropdownItem,{onClick:t.changeDefaultPage,"data-id":e._id},o.a.createElement("div",{className:"page-switch"},o.a.createElement(ie.a,{to:"#",className:"page-photos"},o.a.createElement("img",{src:e.photos&&e.photos.length>0&&e.photos[0].thumb?e.photos[0].thumb:pe.a,alt:e.name,title:e.name})),o.a.createElement("p",null,e.name)))))})}}},{key:"changeDefaultPage",value:function(e){var t=this,a=JSON.parse(N("defaultPage")),n=e.currentTarget.dataset.id;if(a!==n){this.setState({isSwitching:!0});var r=JSON.parse(N("userData")).sessionToken;S("defaultPage",JSON.stringify(n)),this.props.getPageById(n,r,function(e,t){if(e&&console.error(e),t&&t.page){var a=t.page,n={_id:a._id,name:a.name,addressLine1:a.addressLine1,city:a.city,country:a.country,province:a.province,postalCode:a.postalCode,pageType:a.pageType,bankaccount:a.bankaccount,isVerified:a.isVerified,isActive:a.isActive,photos:a.photos,useCreatedProductCategory:a.useCreatedProductCategory,productUploadXLSEnabled:!!a.productUploadXLSEnabled,productVouchersEnabled:!!a.productVouchersEnabled};S("pageInfo",JSON.stringify(n))}}),D(r).get("/places/".concat(a,"/product-categories/get-one")).then(function(e){S("hasCategories",!!e)}).catch(function(e){S("hasCategories",!1)}),this.setState({defaultPage:n}),setTimeout(function(){t.setState({isSwitching:!1}),t.props.history.push("/products"),window.location.reload()},3e3)}}},{key:"render",value:function(){var e={},t="";return t=this.state.userData.info.photos&&this.state.userData.info.photos.length>0&&(e=this.state.userData.info.photos.find(function(e){return e.isCover}))?e.thumb:pe.a,o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Navbar,{className:de()("navbar-absolute",this.state.color),expand:"lg"},o.a.createElement(_.Container,{fluid:!0},o.a.createElement("div",{className:"navbar-wrapper"},o.a.createElement("div",{className:de()("navbar-toggle d-inline",{toggled:this.props.sidebarOpened})},o.a.createElement("button",{className:"navbar-toggler",type:"button",onClick:this.props.toggleSidebar},o.a.createElement("span",{className:"navbar-toggler-bar bar1"}),o.a.createElement("span",{className:"navbar-toggler-bar bar2"}),o.a.createElement("span",{className:"navbar-toggler-bar bar3"}))),o.a.createElement(_.NavbarBrand,{href:"#",onClick:function(e){return e.preventDefault()}},this.props.brandText)),o.a.createElement("button",{"aria-expanded":!1,"aria-label":"Toggle navigation",className:"navbar-toggler","data-target":"#navigation","data-toggle":"collapse",id:"navigation",type:"button",onClick:this.toggleCollapse},o.a.createElement("span",{className:"navbar-toggler-bar navbar-kebab"}),o.a.createElement("span",{className:"navbar-toggler-bar navbar-kebab"}),o.a.createElement("span",{className:"navbar-toggler-bar navbar-kebab"})),o.a.createElement(_.Collapse,{navbar:!0,isOpen:this.state.collapseOpen},o.a.createElement(_.Nav,{className:"ml-auto",navbar:!0},o.a.createElement(_.UncontrolledDropdown,{nav:!0,style:{display:"block"}},o.a.createElement("p",{style:{fontWeight:"600",fontSize:"12px",lineHeight:"45px"}},this.state.userData&&this.state.userData.info&&this.state.userData.info.name&&this.state.userData.info.name)),o.a.createElement(_.UncontrolledDropdown,{nav:!0},o.a.createElement(_.DropdownToggle,{caret:!0,color:"default","data-toggle":"dropdown",nav:!0,onClick:function(e){return e.preventDefault()}},o.a.createElement("b",{className:"caret d-none d-lg-block d-xl-block"}),o.a.createElement("div",{className:"photo"},o.a.createElement("img",{alt:this.state.userData&&this.state.userData.info&&this.state.userData.info.name&&this.state.userData.info.name,src:t&&t}))),o.a.createElement(_.DropdownMenu,{className:"dropdown-navbar dropdown-page-switch",right:!0,tag:"ul"},this.renderPageSwitch(this.state.places),o.a.createElement(_.NavLink,{tag:"li"},o.a.createElement(_.DropdownItem,{className:"nav-item"},o.a.createElement(me.a,{icon:"plus"})," ",o.a.createElement(ie.a,{to:"/add-page"},"Add New Page"))),o.a.createElement(_.DropdownItem,{divider:!0,tag:"li"}),o.a.createElement(_.NavLink,{tag:"li"},o.a.createElement(_.DropdownItem,{className:"nav-item"},o.a.createElement(ie.a,{to:"/page",style:{display:"block"}},"Edit Page"))),o.a.createElement(_.NavLink,{tag:"li"},o.a.createElement(_.DropdownItem,{className:"nav-item"},o.a.createElement(ie.a,{to:"/settings",style:{display:"block"}},"Settings"))),o.a.createElement(_.DropdownItem,{divider:!0,tag:"li"}),o.a.createElement(_.NavLink,{tag:"li"},o.a.createElement(_.DropdownItem,{className:"nav-item",onClick:this.onLogout},"Log out")))),o.a.createElement("li",{className:"separator d-lg-none"}))))),o.a.createElement(_.Modal,{modalClassName:"modal-search",isOpen:this.state.modalSearch,toggle:this.toggleModalSearch},o.a.createElement("div",{className:"modal-header"},o.a.createElement(_.Input,{id:"inlineFormInputGroup",placeholder:"SEARCH",type:"text"}),o.a.createElement("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:this.toggleModalSearch},o.a.createElement("i",{className:"tim-icons icon-simple-remove"})))),o.a.createElement(z.a,{active:this.state.isSwitching,spinner:!0,text:"Switching..."}))}}]),t}(o.a.Component),ge=Object(E.b)(function(){return{}},{getProviderPlaces:F,getPageById:X})(he),fe=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("footer",{className:"footer"},o.a.createElement(_.Container,{fluid:!0},o.a.createElement(_.Nav,null,o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{href:"https://www.streetby.com"},"StreetBy")),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{href:"https://www.streetby.com/contact-us"},"Contact Us"))),o.a.createElement("div",{className:"copyright"},"\xa9 ",(new Date).getFullYear()," Agila Innovations Inc.")))}}]),t}(o.a.Component),Ee=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).linkOnClick=function(){document.documentElement.classList.remove("nav-open")},a.activeRoute.bind(Object(se.a)(Object(se.a)(a))),a.state={isGrocery:!1,pageType:"food-drink"},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"activeRoute",value:function(e){return this.props.location.pathname.indexOf(e)>-1?"active":""}},{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("userData")),a=t.sessionToken,r=JSON.parse(N("pageInfo"));t&&t.isSBTours?this.setState({pageType:"sb-tours"}):r?r&&"5cd141d10d437be772373ddb"===r.pageType&&(this.setState({isGrocery:!0}),this.setState({pageType:"grocery"})):this.props.getProviderPlaces(a,function(t,a){if(!t&&a&&a.places&&a.places instanceof Array&&a.places.length>0){var n=a.places.find(function(e){return e.isDefault});(r=n&&n.place&&n.place._id?n.place:a.places[0].place)&&"5cd141d10d437be772373ddb"===r.pageType&&(e.setState({isGrocery:!0}),e.setState({pageType:"grocery"}))}}),navigator.platform.indexOf("Win")>-1&&(n=new le.a(this.refs.sidebar,{suppressScrollX:!0,suppressScrollY:!1}))}},{key:"componentWillUnmount",value:function(){navigator.platform.indexOf("Win")>-1&&n.destroy()}},{key:"render",value:function(){var e=this,t=JSON.parse(N("pageInfo")),a=JSON.parse(N("userData")),n=JSON.parse(N("defaultPage")),r=this.props,l=r.bgColor,s=r.routes,i=r.rtlActive,c=r.logo,d=s.filter(function(e){return e.showOnSidebar}),m=null,u=null;return void 0!==c&&(void 0!==c.outterLink?(m=o.a.createElement("a",{href:c.outterLink,className:"simple-text logo-mini",target:"_blank",onClick:this.props.toggleSidebar},o.a.createElement("div",{className:"logo-img"},o.a.createElement("img",{src:c.imgSrc,alt:"react-logo"}))),u=o.a.createElement("a",{href:c.outterLink,className:"simple-text logo-normal",target:"_blank",onClick:this.props.toggleSidebar},c.text)):(m=o.a.createElement(ie.a,{to:c.innerLink,className:"simple-text logo-mini",onClick:this.props.toggleSidebar},o.a.createElement("div",{className:"logo-img"},o.a.createElement("img",{src:c.imgSrc,alt:"react-logo"}))),u=o.a.createElement(ie.a,{to:c.innerLink,className:"simple-text logo-normal",onClick:this.props.toggleSidebar},c.text))),o.a.createElement("div",{className:"sidebar",data:l},o.a.createElement("div",{className:"sidebar-wrapper",ref:"sidebar"},null!==m||null!==u?o.a.createElement("div",{className:"logo"},m,u):null,o.a.createElement(_.Nav,null,d.map(function(r,l){if(r.redirect)return null;if(t){var s=!(!t||!t.productVouchersEnabled),c=!(!t||!t.productUploadXLSEnabled);if("sb-tours"===a.isSBTours){if("/import-products"===r.path)return null;if("/page"===r.path)return null;if("/product-categories"===r.path)return null;if("/products"===r.path)return null;if("/reports/order"===r.path)return null;if("/reports/product"===r.path)return null}else{if(!0!==t.isVerified||!0!==t.isActive){if("/order-list"===r.path)return null;if("/reports/sales"===r.path)return null;if("/reports/order"===r.path)return null;if("/reports/product"===r.path)return null}if("/orders"===r.path)return null;if("/tours"===r.path)return null;if("/tour-dates"===r.path)return null;if(n){if("5ccfe6aeb99ae3280fd246dc"!==n&&"/import-products"===r.path)return null;if("5ccfe6aeb99ae3280fd246dc"!==n&&"5ea5519c91aec75b7a387d4b"!==n&&!c&&"/import-products-excel"===r.path)return null;if(!s&&"/product-vouchers"===r.path)return null}}}else{if("/import-products"===r.path)return null;if("/orders"===r.path)return null;if("/tours"===r.path)return null;if("/tour-dates"===r.path)return null;if("/order-list"===r.path)return null;if("/reports/sales"===r.path)return null;if("/reports/order"===r.path)return null;if("/reports/product"===r.path)return null}return o.a.createElement("li",{className:e.activeRoute(r.path)+(r.pro?" active-pro":""),key:l},o.a.createElement(I.a,{to:r.path,className:"nav-link",activeClassName:"active",onClick:e.props.toggleSidebar},o.a.createElement("i",{className:r.icon}),o.a.createElement("p",null,i?r.rtlName:r.name)))}))))}}]),t}(o.a.Component);Ee.defaultProps={rtlActive:!1,bgColor:"blue",routes:[{}]};var ye=Object(E.b)(function(){return{}},{getProviderPlaces:F})(Ee),ve=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleClick=function(){"dropdown show-dropdown"===a.state.classes?a.setState({classes:"dropdown show-dropdown show"}):a.setState({classes:"dropdown show-dropdown"})},a.activateMode=function(e){switch(e){case"light":document.body.classList.add("white-content");break;default:document.body.classList.remove("white-content")}},a.state={classes:"dropdown show-dropdown"},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"fixed-plugin",hidden:!0},o.a.createElement("div",{className:this.state.classes},o.a.createElement("div",{onClick:this.handleClick},o.a.createElement(me.a,{className:"fa-3x",icon:"cog"})),o.a.createElement("ul",{className:"dropdown-menu show"},o.a.createElement("li",{className:"header-title"},"SIDEBAR BACKGROUND"),o.a.createElement("li",{className:"adjustments-line"},o.a.createElement("div",{className:"badge-colors text-center"},o.a.createElement("span",{className:"primary"===this.props.bgColor?"badge filter badge-primary active":"badge filter badge-primary","data-color":"primary",onClick:function(){e.props.handleBgClick("primary")}})," ",o.a.createElement("span",{className:"blue"===this.props.bgColor?"badge filter badge-info active":"badge filter badge-info","data-color":"blue",onClick:function(){e.props.handleBgClick("blue")}})," ",o.a.createElement("span",{className:"green"===this.props.bgColor?"badge filter badge-success active":"badge filter badge-success","data-color":"green",onClick:function(){e.props.handleBgClick("green")}})," ")),o.a.createElement("li",{className:"adjustments-line text-center color-change"},o.a.createElement("span",{className:"color-label"},"LIGHT MODE")," ",o.a.createElement("span",{className:"badge light-badge mr-2",onClick:function(){return e.activateMode("light")}})," ",o.a.createElement("span",{className:"badge dark-badge ml-2",onClick:function(){return e.activateMode("dark")}})," ",o.a.createElement("span",{className:"color-label"},"DARK MODE")," "),o.a.createElement("li",{className:"button-container"},o.a.createElement(_.Button,{href:"https://www.creative-tim.com/product/black-dashboard-react",color:"primary",block:!0,className:"btn-round"},"Download Now"),o.a.createElement(_.Button,{color:"default",block:!0,className:"btn-round",outline:!0,href:"https://demos.creative-tim.com/black-dashboard-react/#/documentation/tutorial"},"Documentation")),o.a.createElement("li",{className:"header-title"},"Want more components?"),o.a.createElement("li",{className:"button-container"},o.a.createElement(_.Button,{href:"https://www.creative-tim.com/product/black-dashboard-pro-react",className:"btn-round",disabled:!0,block:!0,color:"danger"},"Get pro version")))))}}]),t}(r.Component),be=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"Page Not Found"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"We are sorry, the page you requested could not be found . Click "," "," ",o.a.createElement(ie.a,{to:"/products"},"here")," "," "," go back to the homepage."))))))))}}]),t}(o.a.Component),Ae=Object(E.b)(function(){return{}},{getProviderInfo:M,updateProfile:B})(be),Ne=a(20),Se=function(e,t,a,n){return function(r,o){D(a).get("provider/places/"+e+"/products",{params:t}).then(function(e){if(e&&e.data)return r({type:"GET_PRODUCTS",payload:e.data}),n(null,e.data);n(e,null)}).catch(function(e){n(e,null)})}},Ce=function(e,t,a,n){return function(r,o){D(a).get("provider/places/"+e+"/grocery-products",{params:t}).then(function(e){if(e&&e.data)return r({type:"GET_PRODUCTS",payload:e.data}),n(null,e.data);n(e,null)}).catch(function(e){n(e,null)})}},we=function(e,t,a){return function(n,r){D(t).get("/provider/products",{params:e}).then(function(e){if(e&&e.data)return n({type:"GET_PRODUCTS",payload:e.data}),a(null,e.data);a(e,null)}).catch(function(e){a(e,null)})}},Pe=function(e,t,a){return function(n,r){D(t).get("/provider/products/"+e).then(function(e){if(e&&e.data)return n({type:"GET_PRODUCT",payload:e.data}),a(null,e.data);a(e,null)}).catch(function(e){a(e,null)})}},ke=function(e,t,a){return function(n,r){var o=e;D(t).post("/business/products",o).then(function(e){if(e&&e.data)return a(null,e.data);a(e,null)}).catch(function(e){a(e,null)})}},De=function(e,t,a,n){return function(r,o){var l=e;D(a).patch("/business/products/".concat(t),l).then(function(e){if(e&&e.data)return n(null,e.data);n(e,null)}).catch(function(e){n(e,null)})}},Oe=function(e,t,a){return function(n,r){D(t).delete("/business/products/".concat(e)).then(function(e){if(e&&e.data)return a(null,e.data);a(e,null)}).catch(function(e){a(e,null)})}},xe=function(e){return function(t,a){D().get("/provider/product-types").then(function(a){if(a&&a.data)return t({type:"GET_PRODUCT_TYPES",payload:a.data}),e(null,a.data);e(a,null)}).catch(function(t){e(t,null)})}},Te=function(e,t){return function(){D(e).get("/product-categories/all").then(function(e){if(e&&e.data)return t(null,e.data);t(e,null)}).catch(function(e){t(e,null)})}},Ie=function(e,t,a,n){return function(){D(a).get("/places/".concat(e,"/product-categories/all"),{params:t}).then(function(e){if(e&&e.data)return n(null,e.data);n(e,null)}).catch(function(e){n(e,null)})}},Fe=function(e,t,a,n){return function(r,o){D(a).post("/business/products/".concat(e,"/media"),t).then(function(e){if(e&&e.data)return n(null,e.data)}).catch(function(e){n(e,null)})}},Me=function(e,t,a,n){return function(r,o){D(a).delete("business/products/".concat(e,"/media/").concat(t)).then(function(e){if(e&&e.data)return n(null,e.data)}).catch(function(e){n(e,null)})}},Be=function(e,t,a,n,r){return function(){var o={endpoint:e,username:t,password:a};D(n).post("/business/merchant-api-login",o).then(function(e){if(e&&e.data)return r(null,e.data);r(e,null)}).catch(function(e){r(e,null)})}},Ge=function(e,t,a,n,r){return function(){var o={endpoint:e,apiKey:t,placeId:a};D(n).post("/business/import-products-from-api",o).then(function(e){if(e&&e.data)return r(null,e.data);r(e,null)}).catch(function(e){r(e,null)})}},Le=function(e,t,a,n,r){return function(){var o={endpoint:e,apiKey:t,placeId:a};D(n).post("/business/sync-products-from-api",o).then(function(e){if(e&&e.data)return r(null,e.data);r(e,null)}).catch(function(e){r(e,null)})}},Re=a(4),je=a.n(Re),Je=a(23),Ue=a.n(Je),He=a(51),Qe=a.n(He),Ve=a(19),ze=a(9),Ye=a.n(ze),Ke=a(41),_e=a(718),qe=a(56),We=a.n(qe),Xe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).onDismiss=function(){a.setState({hideTutorials:!0});var e=JSON.parse(N("pageInfo"));e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))},a.onHideTutorials=function(){if(!window.confirm("Are you sure you want to hide this section permanently?"))return!1;var e=JSON.parse(N("pageInfo")),t=JSON.parse(N("userData")).sessionToken;D(t).patch("/provider/places/".concat(e._id),{hideTutorials:!0}).then(function(t){t&&t.data&&"ok"===t.data.status?(a.setState({hideTutorials:!0}),e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))):a.showNotificationError("An unknown error occured. Please try again!")}).catch(function(e){a.setState({submitted:!1,isSaving:!1}),e.response&&"string"===typeof e.response?a.showNotificationError(e.response):a.showNotificationError("An unknown error occured. Please try again!")})},a.handleChangeKeyword=function(e){var t=e.target.value;a.setState({keyword:t})},a.handleEnter=function(e){if("Enter"===e.key){a.setState({isLoading:!0,activePage:1});var t=a.state.keyword,n=JSON.parse(N("defaultPage")),r=a.props.location.search,o=je.a.parse(r);delete o.message,delete o.page,""!==t?o.keyword=t.trim():delete o.keyword;var l="?"+je.a.stringify(o);a.refreshProductList(l,n)}},a.handleDelete=function(e){if(!window.confirm("Do you want to delete this product?"))return!1;var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n),o="?"+je.a.stringify(r),l=e.currentTarget.dataset.item;if(l){var s=JSON.parse(N("userData"));if(s){var i=s.sessionToken;a.props.deleteProduct(l,i,function(e,n){!e&&n?"Deleted"===n.status&&(a.showNotification("Product has been deleted successfully."),a.refreshProductList(o,t)):e&&(e.response&&e.response.status&&403===e.response.status?(setTimeout(function(){a.setState({isLoading:!0});var e=JSON.parse(N("defaultPage")),t=a.props.location.search,n=je.a.parse(t);delete n.message,delete n.page;var r="?"+je.a.stringify(n);a.setState({activePage:1}),a.refreshProductList(r,e)},1e3),a.showNotificationError("You are not allowed to delete this product.")):a.showNotificationError(e.response))})}else a.props.history.push("/login"),window.location.reload()}},a.handleChangeAvailability=function(e){a.setState({isLoading:!0});var t=e.target.value,n=JSON.parse(N("defaultPage")),r=a.props.location.search,o=je.a.parse(r);delete o.message,delete o.page,""!==t?o.availability=t:delete o.availability;var l="?"+je.a.stringify(o);a.setState({selectedAvailability:t,activePage:1}),a.refreshProductList(l,n)},a.handleChangeProductCategory=function(e){a.setState({isLoading:!0});var t="",n=a.state.productCategoriesAll,r=[],o=JSON.parse(N("defaultPage")),l=a.props.location.search,s=je.a.parse(l);delete s.message,delete s.page,delete s.subCategory,e&&e.value?(t=e.value,r=n.filter(function(e){return e.parent&&e.parent.id.toString()===t}),s.category=t):(delete s.category,a.setState({selectedProductCategorySub:""}));var i="?"+je.a.stringify(s);a.setState({selectedProductCategory:t,productCategoriesSub:r,activePage:1}),a.refreshProductList(i,o)},a.handleChangeProductCategorySub=function(e){a.setState({isLoading:!0});var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n);delete r.message,delete r.page;var o="";e&&e.value?(o=e.value,r.subCategory=o):delete r.subCategory;var l="?"+je.a.stringify(r);a.setState({selectedProductCategorySub:o,activePage:1}),a.refreshProductList(l,t)},a.handleChangeProductStatus=function(e){a.setState({isLoading:!0});var t=e.target.value,n=JSON.parse(N("defaultPage")),r=a.props.location.search,o=je.a.parse(r);delete o.message,delete o.page,""!==t?o.status=t:delete o.status;var l="?"+je.a.stringify(o);a.setState({status:t,activePage:1}),a.refreshProductList(l,n)},a.handlePageChange=function(e){a.setState({isLoading:!0});var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n);delete r.message,r.page=e;var o="?"+je.a.stringify(r);a.setState({activePage:e}),a.refreshProductList(o,t)},a.handleChangePerPage=function(e){a.setState({isLoading:!0});var t=e.target.value,n=JSON.parse(N("defaultPage")),r=a.props.location.search,o=je.a.parse(r);delete o.message,delete o.page,""!==t?o.size=t:delete o.size;var l="?"+je.a.stringify(o);a.setState({size:t,activePage:1}),a.refreshProductList(l,n)},a.handleCheckAll=function(e){var t=e.target.checked,n=document.querySelectorAll('input[name="product"]'),r=Array.from(n);if(t){var o=r.map(function(e){return e.value});a.setState({checked:o})}else a.setState({checked:[]});n.forEach(function(e){e.checked=!!t})},a.handleCheck=function(e){var t=e.target,n=t.value;if(t.checked)a.setState({checked:[].concat(Object(Ne.a)(a.state.checked),[n])});else{var r=a.state.checked.filter(function(e){return n!==e});a.setState({checked:r})}},a.handleDeleteChecked=function(){var e=0,t=0,n=!1,r=a.state.checked;if(r instanceof Array&&r.length>0){if(!window.confirm("Are you sure you want to delete this product(s)?"))return!1;a.setState({isProcessing:!0});var o=JSON.parse(N("defaultPage")),l=a.props.location.search,s=je.a.parse(l);s.message&&delete s.message,r.forEach(function(r,l,i){var c=JSON.parse(N("userData")).sessionToken;a.props.deleteProduct(r,c,function(r,l){if("Deleted"===l.status?t++:r&&(n=!0),++e===i.length)if(a.setState({isProcessing:!1}),document.getElementById("check-all").checked=!1,document.querySelectorAll('input[name="product"]').forEach(function(e){e.checked=!1}),t>0){a.showNotification("Products has been deleted successfully.");var c="?"+je.a.stringify(s);a.refreshProductList(c,o)}else n&&a.showNotificationError("There is a error in deleting the product(s)!")})})}else a.showNotificationError("Please select a product!")},a.handlePublishChecked=function(){var e=a.state.checked,t=0,n=0,r=!1;return e instanceof Array&&e.length>0?!!window.confirm("Are you sure you want to publish this product(s)?")&&(a.setState({isProcessing:!0}),void e.forEach(function(e,o,l){var s=JSON.parse(N("userData")).sessionToken,i=a.state.products.find(function(t){return t._id===e});i.isActive=!0,a.props.updateProduct(i,e,s,function(e,o){o?(a.setState(function(e){return{list:e.products.map(function(t){return et(t,e.products)})}}),n++):e&&(r=!0),++t===l.length&&(a.setState({isProcessing:!1}),n>0&&a.showNotification("Products has been published!"),r&&a.showNotificationError("There is a error in updating the product(s)!"))})})):(a.showNotificationError("Please select a product!"),!1)},a.handleUnpublishChecked=function(){var e=a.state.checked,t=0,n=0,r=!1;return e instanceof Array&&e.length>0?!!window.confirm("Are you sure you want to unpublish this product(s)?")&&(a.setState({isProcessing:!0}),void e.forEach(function(e,o,l){var s=JSON.parse(N("userData")).sessionToken,i=a.state.products.find(function(t){return t._id===e});i.isActive=!1,a.props.updateProduct(i,e,s,function(e,o){o?(a.setState(function(e){return{list:e.products.map(function(t){return et(t,e.products)})}}),n++):e&&(r=!0),++t===l.length&&(a.setState({isProcessing:!1}),n>0&&a.showNotification("Products has been unpublished!"),r&&a.showNotificationError("There is a error in updating the product(s)!"))})})):(a.showNotificationError("Please select a product!"),!1)},a.sortCreated=function(){var e="";e="created"===a.state.sortBy?"desc"!==a.state.sort?"desc":"asc":"desc";var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n);delete r.message,r.sort=e,r.sortBy="created";var o="?"+je.a.stringify(r);a.setState({sort:e}),a.setState({sortBy:"created"}),a.refreshProductList(o,t)},a.sortUpdated=function(){var e="";e="updated"===a.state.sortBy?"desc"!==a.state.sort?"desc":"asc":"desc";var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n);delete r.message,r.sort=e,r.sortBy="updated";var o="?"+je.a.stringify(r);a.setState({sort:e}),a.setState({sortBy:"updated"}),a.refreshProductList(o,t)},a.sortPrice=function(){var e="";e="price"===a.state.sortBy?"desc"!==a.state.sort?"desc":"asc":"desc";var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n);delete r.message,r.sort=e,r.sortBy="price";var o="?"+je.a.stringify(r);a.setState({sort:e}),a.setState({sortBy:"price"}),a.refreshProductList(o,t)},a.sortName=function(){var e="";e="name"===a.state.sortBy?"desc"!==a.state.sort?"desc":"asc":"desc";var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n);delete r.message,r.sort=e,r.sortBy="name";var o="?"+je.a.stringify(r);a.setState({sort:e}),a.setState({sortBy:"name"}),a.refreshProductList(o,t)},a.sortItemCode=function(){var e="";e="itemCode"===a.state.sortBy?"desc"!==a.state.sort?"desc":"asc":"desc";var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n);delete r.message,r.sort=e,r.sortBy="itemCode";var o="?"+je.a.stringify(r);a.setState({sort:e}),a.setState({sortBy:"itemCode"}),a.refreshProductList(o,t)},a.copyToClipboard=function(e){var t=e.currentTarget.dataset.id;navigator.clipboard.writeText(t).then(function(){a.showNotification("Product ID copied to clipboard!")}).catch(function(e){a.showNotificationError("Error in copying Product ID!")})},a.exportProducts=function(){var e=a.props.location.search,t=je.a.parse(e);delete t.sort,delete t.sortBy,delete t.page,delete t.size,delete t.message;var n=document.getElementById("check-all");n&&(n.checked=!1),document.querySelectorAll('input[name="product"]').forEach(function(e){e.checked=!1});var r=JSON.parse(N("defaultPage")),o=JSON.parse(N("userData")),l=o.sessionToken;null!=o&&r?(a.setState({isGeneratingXls:!0}),l&&D(l).get("/provider/places/".concat(r,"/export-products"),{params:t}).then(function(e){if(e&&e.data&&"success"===e.data.status&&e.data.filename){var t=e.data.filename;a.setState({isGeneratingXls:!1}),window.open(t)}else a.setState({isGeneratingXls:!1}),a.showNotificationError("No products found.")}).catch(function(e){a.setState({isGeneratingXls:!1}),a.showNotificationError("There is a problem exporting! Please try again!")})):a.setState({isLoading:!1})},a.state={products:[],places:[],productTypes:[],productCategoriesAll:[],productCategories:[],productCategoriesSub:[],checked:[],defaultPage:"",pagination:{},activePage:1,selectedPage:"",selectedAvailability:"",selectedProductCategory:"",selectedProductCategorySub:"",pageName:"",sortBy:"",sort:"",status:"",keyword:"",size:25,isLoading:!0,isProcessing:!1,isGeneratingXls:!1,isGrocery:!1,hideTutorials:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("userData")),a=JSON.parse(N("pageInfo"));if(a&&"5cd141d10d437be772373ddb"===a.pageType&&this.setState({isGrocery:!0}),null!==t){var n=JSON.parse(N("defaultPage")),r=t.sessionToken;if(n)if(""!==n){var o=this.props.location.search,l=je.a.parse(o),s=l.page?Number(l.page):1,i=l.status?l.status:"",c=l.sortBy?l.sortBy:"created",d=l.sort?l.sort:"desc",m=l.keyword?l.keyword:"",u=l.size?l.size:25,p=l.category?l.category:"",h="";l.category?h=l.subCategory?l.subCategory:"":delete l.subCategory;var g="?"+je.a.stringify(l);this.setState({activePage:s,selectedPage:n,status:i,sort:d,sortBy:c,keyword:m,size:u,selectedProductCategory:p,selectedProductCategorySub:h,pageName:a&&a.name?a.name:"",hideTutorials:!(!a||!a.hideTutorials||!0!==a.hideTutorials)}),a&&"5cd141d10d437be772373ddb"===a.pageType&&this.setState({isGrocery:!0}),this.refreshProductList(g,n),this.getCategories(a,n,r)}else this.props.getProviderPlaces(r,function(t,o){if(!t&&o){if(o.places&&o.places instanceof Array&&o.places.length>0){var l=o.places.find(function(e){return e.isDefault});l&&l._id?(n=l._id,a=l):(n=o.places[0]._id,a=o.places[0])}S("pageInfo",JSON.stringify(a));var s=e.props.location.search,i=je.a.parse(s),c=i.page?Number(i.page):1,d=i.status?i.status:"",m=i.sortBy?i.sortBy:"created",u=i.sort?i.sort:"desc",p=i.keyword?i.keyword:"",h=i.size?i.size:25,g=i.category?i.category:"",f="";i.category?f=i.subCategory?i.subCategory:"":delete i.subCategory;var E="?"+je.a.stringify(i);e.setState({activePage:c,selectedPage:n,status:d,sort:u,sortBy:m,keyword:p,size:h,selectedProductCategory:g,selectedProductCategorySub:f,pageName:a&&a.name?a.name:""}),a&&"5cd141d10d437be772373ddb"===a.pageType&&e.setState({isGrocery:!0}),e.refreshProductList(E,n),e.getCategories(a,n,r)}else e.setState({isLoading:!1})});else this.props.getProviderPlaces(r,function(t,o){if(!t&&o)if(o.places&&o.places instanceof Array&&o.places.length>0){var l=o.places.find(function(e){return e.isDefault});l&&l._id?(n=l._id,a=l):(n=o.places[0]._id,a=o.places[0]),S("pageInfo",JSON.stringify(a));var s=e.props.location.search,i=je.a.parse(s),c=i.page?Number(i.page):1,d=i.status?i.status:"",m=i.sortBy?i.sortBy:"created",u=i.sort?i.sort:"desc",p=i.keyword?i.keyword:"",h=i.size?i.size:25,g=i.category?i.category:"",f="";i.category?f=i.subCategory?i.subCategory:"":delete i.subCategory;var E="?"+je.a.stringify(i);e.setState({activePage:c,selectedPage:n,status:d,sort:u,sortBy:m,keyword:p,size:h,selectedProductCategory:g,selectedProductCategorySub:f,pageName:a.name}),a&&"5cd141d10d437be772373ddb"===a.pageType&&e.setState({isGrocery:!0}),e.refreshProductList(E,n),e.getCategories(a,n,r)}else e.setState({isLoading:!1});else e.setState({isLoading:!1})})}else this.props.history.push("/login"),window.location.reload();this._isMount=!0}},{key:"componentWillUnmount",value:function(){this._isMount=!1}},{key:"renderRows",value:function(e){var t=this,a=JSON.parse(N("pageInfo")),n=12;return a&&"5cd141d10d437be772373ddb"===a.pageType&&(n=13),this.state.isLoading?o.a.createElement("tr",null,o.a.createElement("td",{colSpan:n},o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading}))):e instanceof Array&&e.length>0?e.map(function(e,n,r){return o.a.createElement("tr",{key:n},o.a.createElement("td",null,o.a.createElement(_.Input,{style:{position:"inherit",margin:"0"},className:"form-control",type:"checkbox",name:"product",value:e._id,onClick:t.handleCheck})),o.a.createElement("td",{width:"50"},t.renderImage(e)),o.a.createElement("td",{width:"500"},o.a.createElement(ie.a,{to:"/products/"+e._id+"/edit"+(t.state.activePage>0||""!==t.state.keyword||""!==t.state.status||""!==t.state.keyword||""!==t.state.selectedAvailability||""!==t.state.selectedProductCategory||""!==t.state.selectedProductCategorySub?"?":"")+(t.state.activePage>0?"&page="+t.state.activePage:"")+(""!==t.state.keyword?"&keyword="+t.state.keyword:"")+(""!==t.state.status?"&status="+t.state.status:"")+(""!==t.state.selectedAvailability?"&availability="+t.state.selectedAvailability:"")+(""!==t.state.selectedProductCategory?"&category="+t.state.selectedProductCategory:"")+(""!==t.state.selectedProductCategorySub?"&subCategory="+t.state.selectedProductCategorySub:""),alt:e.name,title:e.name},e.name)),o.a.createElement("td",{width:"150"},Object(_e.default)(new Date(e.createdAt),"MMM/dd/yyyy hh:mm a")),o.a.createElement("td",{width:"150"},Object(_e.default)(new Date(e.updatedAt),"MMM/dd/yyyy hh:mm a")),o.a.createElement("td",{width:"150"},e.itemCode),o.a.createElement("td",{width:"150"},e.barcode),a&&a.useCreatedProductCategory?o.a.createElement("td",{width:"150"},t.renderCategories(e.productCategories)):o.a.createElement("td",{width:"150"},t.renderCategories(e.categories)),o.a.createElement("td",{align:"right"},"\u20b1",e.price?Ze(e.price):"0.00"),o.a.createElement("td",{align:"center"},o.a.createElement(ie.a,{to:"/products/"+e._id+"/edit"+(t.state.activePage>0||""!==t.state.keyword||""!==t.state.status||""!==t.state.keyword||""!==t.state.selectedAvailability||""!==t.state.selectedProductCategory||""!==t.state.selectedProductCategorySub?"?":"")+(t.state.activePage>0?"&page="+t.state.activePage:"")+(""!==t.state.keyword?"&keyword="+t.state.keyword:"")+(""!==t.state.status?"&status="+t.state.status:"")+(""!==t.state.selectedAvailability?"&availability="+t.state.selectedAvailability:"")+(""!==t.state.selectedProductCategory?"&category="+t.state.selectedProductCategory:"")+(""!==t.state.selectedProductCategorySub?"&subCategory="+t.state.selectedProductCategorySub:"")},o.a.createElement(me.a,{icon:"edit"})),o.a.createElement(ie.a,{to:"#",className:"text-danger",onClick:t.handleDelete,"data-item":e._id},o.a.createElement(me.a,{icon:"trash-alt"})),o.a.createElement(ie.a,{to:"#","data-id":e._id,onClick:t.copyToClipboard,style:{cursor:"pointer"},alt:"Copy Product ID",title:"Copy Product ID"},o.a.createElement(me.a,{icon:"copy"}))),o.a.createElement("td",null,o.a.createElement(Ue.a,{onClick:function(){var a=!e.forSale;t.toggleSwitchForSale(e),r[n].forSale=a,t.setState({products:r})},on:e.forSale})),o.a.createElement("td",null,o.a.createElement(Ue.a,{onClick:function(){var a=!e.isActive;t.toggleSwitchIsActive(e),r[n].isActive=a,t.setState({products:r})},on:e.isActive})),a&&"5cd141d10d437be772373ddb"===a.pageType&&o.a.createElement("td",null,o.a.createElement(Ue.a,{onClick:function(){var a=!e.isLocked;t.toggleSwitchIsLocked(e),r[n].isLocked=a,t.setState({products:r})},on:!!e.isLocked&&e.isLocked})))}):o.a.createElement("tr",null,o.a.createElement("td",{colSpan:n},o.a.createElement("h5",{className:"text-danger"},o.a.createElement("em",null,"No products found."))))}},{key:"renderCategories",value:function(e){if(e instanceof Array&&e.length>0)return 1===e.length?e.map(function(e){return e.name}):e.map(function(e){return e.name+", "})}},{key:"renderImage",value:function(e){var t,a=e.name,n=e.photos;return t=void 0!==n[0]||null!=n[0]?n[0]:{thumb:We.a},o.a.createElement(_.Media,{className:"mt-1"},t&&t.thumb&&o.a.createElement(_.Media,{left:!0,middle:!0},o.a.createElement(_.Media,{object:!0,"data-src":t.thumb,src:t.thumb,alt:a,title:a})))}},{key:"renderPlaces",value:function(){if(void 0!==this.state.places||null!=this.state.places)return this.state.places.map(function(e,t){return o.a.createElement("option",{key:t,value:e._id.toString()},e.name)})}},{key:"toggleSwitchIsActive",value:function(e){var t=this,a=JSON.parse(N("userData")).sessionToken,n=e._id;e&&this.props.updateProduct(e,n,a,function(e,a){a?t.showNotification("Product successfully updated."):e?t.showNotificationError(e.response):t.showNotificationError("Product not updated.")})}},{key:"toggleSwitchIsLocked",value:function(e){var t=this,a=JSON.parse(N("userData")).sessionToken,n=e._id;e&&this.props.updateProduct(e,n,a,function(e,a){a?t.showNotification("Product successfully updated."):e&&t.showNotificationError(e.response)})}},{key:"toggleSwitchForSale",value:function(e){var t=this,a=JSON.parse(N("userData")).sessionToken,n=e._id;e&&this.props.updateProduct(e,n,a,function(e,a){a?t.showNotification("Product successfully updated."):e&&t.showNotificationError(e.response)})}},{key:"showNotification",value:function(e){if(e&&"string"===typeof e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:2};t&&this.refs.notify&&this.refs.notify.notificationAlert&&this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e&&"string"===typeof e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:2};t&&this.refs.notify&&this.refs.notify.notificationAlert&&this.refs.notify.notificationAlert(t)}}},{key:"refreshProductList",value:function(e,t){var a=this,n=je.a.parse(e),r=n.message,o=document.getElementById("check-all");o&&(o.checked=!1),document.querySelectorAll('input[name="product"]').forEach(function(e){e.checked=!1}),r&&(delete n.message,this.showNotification(r)),this.props.history.push("/products"+e);var l=JSON.parse(N("userData")),s=JSON.parse(N("pageInfo")),i=l.sessionToken;null!==l&&s?s&&"5cd141d10d437be772373ddb"===s.pageType?(this.setState({isGrocery:!0}),this.props.getProductsGroceryByPageId(t,n,i,function(e,t){if(!e&&t){var n=t.places;t.pagination&&t.pagination.total&&t.pagination.total>0?S("hasProducts",!0):S("hasProducts",!1),a._isMount&&a.setState({places:n,products:t.products,pagination:t.pagination})}a.setState({isLoading:!1})})):s&&"58b5180adaa07f5b2b0281ba"===s.pageType?this.props.getProductsGroceryByPageId(t,n,i,function(e,t){if(!e&&t){var n=t.places;t.pagination&&t.pagination.total&&t.pagination.total>0?S("hasProducts",!0):S("hasProducts",!1),a.setState({places:n,products:t.products,pagination:t.pagination})}a.setState({isLoading:!1})}):this.props.getProductsByPageId(t,n,i,function(e,t){if(!e&&t){var n=t.places;t.pagination&&t.pagination.total&&t.pagination.total>0?S("hasProducts",!0):S("hasProducts",!1),a.setState({places:n,products:t.products,pagination:t.pagination})}a.setState({isLoading:!1})}):this.setState({isLoading:!1})}},{key:"getCategories",value:function(e,t,a){var n=this;if(e&&e.useCreatedProductCategory){var r=t;["5e6c8ee3a5ac68a35e071e07","5e6c8ed7a5ac68a35e071e05","5e6c8edda5ac68a35e071e06","5e6c8ecea5ac68a35e071e04","5e9e50973c47b363587eb3d9"].find(function(e){return e===t})&&(r="5ccfe6aeb99ae3280fd246dc"),this.props.getProductCategoriesAllV2({},r,a,function(e,t){if(!e&&t){var a=t;if(a instanceof Array&&a.length>0){var r=[],o=[],l=[];a.forEach(function(e){var t={value:e._id,label:!0===e.isActive?e.name:e.name+" - INACTIVE",parent:e.parent};r.push(t)}),o=r.filter(function(e){return!e.parent});o=[].concat([{value:"",label:"All",parent:""},{value:"no-category",label:"No category",parent:""}],Object(Ne.a)(o)),n.state.selectedProductCategory&&(l=r.filter(function(e){return e.parent&&e.parent.id.toString()===n.state.selectedProductCategory})),n.setState({productCategoriesAll:r,productCategories:o,productCategoriesSub:l})}else n.setState({productCategories:[]})}})}else this.props.getProductCategoriesAll({},a,function(e,t){if(!e&&t){var a=t;if(a instanceof Array&&a.length>0){var r=[],o=[],l=[];a.forEach(function(e){var t={value:e._id,label:!0===e.isActive?e.name:e.name+" - INACTIVE",parent:e.parent};r.push(t)}),o=r.filter(function(e){return!e.parent});o=[].concat([{value:"",label:"All",parent:""},{value:"no-category",label:"No category",parent:""}],Object(Ne.a)(o)),n.state.selectedProductCategory&&(l=r.filter(function(e){return e.parent&&e.parent.id.toString()===n.state.selectedProductCategory})),n.setState({productCategoriesAll:r,productCategories:o,productCategoriesSub:l})}else n.setState({productCategories:[]})}})}},{key:"renderNoPageAdded",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"No Page Added"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You have not added a page yet. Click"," "," ",o.a.createElement(ie.a,{to:"/add-page"},"here")," "," ","to add a new page.")))))))}},{key:"renderPageNotVerified",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"You Have Not Agreed with our Terms & Policies"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You must agree  with our Terms & Policies. Click "," "," ",o.a.createElement(ie.a,{to:"/statement-of-agreement"},"here")," "," "," to read our Terms & Policies.")))))))}},{key:"render",value:function(){var e=this,t=JSON.parse(N("pageInfo")),a=JSON.parse(N("hasCategories")),n=JSON.parse(N("hasProducts"));return t&&"5dea2304f6bba08323a3ddce"===t.pageType&&(this.props.history.push("/tours"),window.location.reload()),t&&t._id?!0===t.isVerified?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Products - ",o.a.createElement("em",null,t.name)),o.a.createElement(_.Row,null,!a&&o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Alert,{color:"warning"},o.a.createElement("p",{className:"mb-0"},"You have not added a category yet. Click"," "," ",o.a.createElement(ie.a,{to:"/product-categories/new"},"here")," "," ","to add a product category."))))),a&&n&&!0!==t.isActive&&o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"Store Not Activated"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You must activate your store so it will appear in the app and you can start selling.",o.a.createElement("br",null),"Click "," "," ",o.a.createElement(ie.a,{to:"/activate-store"},"here")," "," "," to activate you store."))))),!t.hideTutorials&&o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Alert,{className:"alert-compact",color:"primary",isOpen:!this.state.hideTutorials,toggle:this.onDismiss,fade:!1},o.a.createElement("h4",{className:"alert-heading"},"New on Products?"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"Check our videos here on how to manage your products.",o.a.createElement("br",null)),o.a.createElement("a",{className:"btn btn-sm btn-primary-v2",href:"https://www.youtube.com/watch?v=k8VEDqbPv7w"},"View Tutorials"),o.a.createElement(_.Button,{className:"btn-fill btn-sm",color:"danger",type:"button",onClick:this.onHideTutorials},"Hide Permanently"))))),o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"keyword",className:"control-label"},"Search:")))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Input,{id:"keyword",name:"keyword",type:"text",placeholder:"Search product...",onChange:this.handleChangeKeyword,onKeyPress:this.handleEnter,value:this.state.keyword}))))),o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pull-right",md:"12"},o.a.createElement(_.FormGroup,{style:{textAlign:"right"}},o.a.createElement("label",{className:"control-label"},"Filter:")))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement(Ke.a,{className:"react-select",styles:{fontSize:"13px !important"},options:this.state.productCategories,onChange:this.handleChangeProductCategory,placeholder:"Select main category",value:this.state.productCategories.filter(function(t){return t.value===e.state.selectedProductCategory})}))),o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement(Ke.a,{className:"react-select",styles:{fontSize:"13px !important"},isClearable:!0,options:this.state.productCategoriesSub,onChange:this.handleChangeProductCategorySub,placeholder:"Select sub category",value:this.state.productCategoriesSub.filter(function(t){return t.value===e.state.selectedProductCategorySub})})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Input,{id:"availability",name:"availability",type:"select",onChange:this.handleChangeAvailability,value:this.state.selectedAvailability},o.a.createElement("option",{value:""},"For Sale/Availability"),o.a.createElement("option",{value:"available"},"Available"),o.a.createElement("option",{value:"notAvailable"},"Not Available")))),o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Input,{id:"productStatus",name:"productStatus",type:"select",onChange:this.handleChangeProductStatus,value:this.state.status},o.a.createElement("option",{value:""},"Status"),o.a.createElement("option",{value:"active"},"Active"),o.a.createElement("option",{value:"inActive"},"Inactive"))))))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{style:{textAlign:"right"},md:"12"},t&&o.a.createElement(ie.a,{to:"/product-images/bulk-upload",alt:"Add New Product",title:"Add New Product",className:"btn btn-sm btn-round btn-info"},o.a.createElement(me.a,{icon:"images"}),"\xa0Images - Bulk Upload"),o.a.createElement(ie.a,{to:"/products/new",alt:"Add New Product",title:"Add New Product",className:"btn btn-sm btn-round btn-info"},o.a.createElement(me.a,{icon:"plus"}),"\xa0Add New"),o.a.createElement(_.Button,{alt:"Delete",title:"Delete",className:"btn btn-sm btn-round btn-info",onClick:this.handleDeleteChecked},o.a.createElement(me.a,{icon:"archive"}),"\xa0Delete"),o.a.createElement(_.Button,{alt:"Publish",title:"Publish",className:"btn btn-sm btn-round btn-info",onClick:this.handlePublishChecked},o.a.createElement(me.a,{icon:"eye"}),"\xa0Publish"),o.a.createElement(_.Button,{alt:"Unpublish",title:"Unpublish",className:"btn btn-sm btn-round btn-info",onClick:this.handleUnpublishChecked},o.a.createElement(me.a,{icon:"eye-slash"}),"\xa0Unpublish"),o.a.createElement(_.Button,{alt:"Export",title:"Export",className:"btn btn-sm btn-round btn-info",onClick:this.exportProducts},o.a.createElement(me.a,{icon:"file-excel"}),"\xa0Export")))),o.a.createElement(_.CardBody,null,o.a.createElement(_.Table,{className:"tablesorter table-striped",responsive:!0},o.a.createElement("thead",{className:"text-primary"},o.a.createElement("tr",null,o.a.createElement("th",null,o.a.createElement(_.Input,{style:{position:"inherit",margin:"0"},type:"checkbox",id:"check-all",onClick:this.handleCheckAll})),o.a.createElement("th",null,"\xa0"),o.a.createElement("th",{style:{whiteSpace:"nowrap"},onClick:this.sortName},"Item"," ","name"===this.state.sortBy&&"desc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-info"})," ","name"===this.state.sortBy&&"asc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-up",className:"text-info"})," ","name"!==this.state.sortBy&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-disabled"})," "),o.a.createElement("th",{style:{whiteSpace:"nowrap"},onClick:this.sortCreated},"Added"," ","created"===this.state.sortBy&&"desc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-info"})," ","created"===this.state.sortBy&&"asc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-up",className:"text-info"})," ","created"!==this.state.sortBy&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-disabled"})," "),o.a.createElement("th",{style:{whiteSpace:"nowrap"},onClick:this.sortUpdated},"Updated"," ","updated"===this.state.sortBy&&"desc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-info"})," ","updated"===this.state.sortBy&&"asc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-up",className:"text-info"})," ","updated"!==this.state.sortBy&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-disabled"})," "),o.a.createElement("th",{style:{whiteSpace:"nowrap"},onClick:this.sortItemCode},"Item Code"," ","itemCode"===this.state.sortBy&&"desc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-info"})," ","itemCode"===this.state.sortBy&&"asc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-up",className:"text-info"})," ","itemCode"!==this.state.sortBy&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-disabled"})," "),o.a.createElement("th",{style:{whiteSpace:"nowrap"}},"Barcode"),o.a.createElement("th",{style:{whiteSpace:"nowrap"}},"Category"),o.a.createElement("th",{style:{whiteSpace:"nowrap"},className:"text-right",onClick:this.sortPrice},o.a.createElement("span",{style:{display:"block"}},"Price"," ","price"===this.state.sortBy&&"desc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-info"})," ","price"===this.state.sortBy&&"asc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-up",className:"text-info"})," ","price"!==this.state.sortBy&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-disabled"})," ")),o.a.createElement("th",null,"\xa0"),o.a.createElement("th",{style:{whiteSpace:"nowrap"}},"For Sale"),o.a.createElement("th",{style:{whiteSpace:"nowrap"}},"Publish"),t&&"5cd141d10d437be772373ddb"===t.pageType&&o.a.createElement("th",{style:{whiteSpace:"nowrap",textAlign:"center"}},o.a.createElement(me.a,{icon:"lock"})))),o.a.createElement("tbody",null,this.renderRows(this.state.products)))),o.a.createElement(_.CardFooter,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12",lg:"12"},this.state.pagination&&this.state.pagination.total>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Qe.a,{innerClass:"pagination",activePage:this.state.activePage,itemsCountPerPage:this.state.pagination.limit,totalItemsCount:this.state.pagination.total,pageRangeDisplayed:5,onChange:this.handlePageChange}),o.a.createElement("p",null,"Page ",o.a.createElement("em",null,this.state.activePage)," of ",o.a.createElement("em",null,Math.ceil(this.state.pagination.total/this.state.pagination.limit))," of ",o.a.createElement("em",null,$e(this.state.pagination.total))," products."),o.a.createElement(_.Input,{style:{marginBottom:"5px",width:"auto"},id:"perPage",name:"perPage",type:"select",onChange:this.handleChangePerPage,value:this.state.size},o.a.createElement("option",{value:"10"},"10 / page"),o.a.createElement("option",{value:"25"},"25 / page"),o.a.createElement("option",{value:"50"},"50 / page"),o.a.createElement("option",{value:"100"},"100 / page")))))))))))),o.a.createElement(z.a,{active:this.state.isProcessing,spinner:!0,text:"Processing..."}),o.a.createElement(z.a,{active:this.state.isGeneratingXls,spinner:!0,text:"Processing..."})):this.renderPageNotVerified():this.renderNoPageAdded()}}]),t}(o.a.Component),Ze=function(e){return tt(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},$e=function(e){return tt(e,0).replace(/\B(?=(\d{3})+(?!\d))/g,",")},et=function(e,t){if(e._id===t._id)return t},tt=function(e,t){if(void 0===t&&(t=2),0!==e&&(!e||isNaN(e)))throw new Error("price is not a number"+e);return parseFloat(Math.round(100*e)/100).toFixed(t)},at=Object(E.b)(function(){return{}},{getProductsByPageId:Se,getProductsGroceryByPageId:Ce,getProductsByProviderId:we,getProviderPlaces:F,getProductCategoriesAll:G,getProductCategoriesAllV2:L,updateProduct:De,deleteProduct:Oe})(Xe),nt=function(e){function t(e){var a;Object(i.a)(this,t);var n=JSON.parse(N("defaultPage"));return(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;"checkbox"===t.type&&(r=e.target.checked);a.setState({product:Object(A.a)({},a.state.product,Object(T.a)({},n,r))})},a.handleChangeSection=function(e){var t=e.target,n=t.name,r=t.value;a.setState({section:Object(A.a)({},a.state.section,Object(T.a)({},n,r))})},a.onDismiss=function(){a.setState({hideTutorials:!0});var e=JSON.parse(N("pageInfo"));e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))},a.onHideTutorials=function(){if(!window.confirm("Are you sure you want to hide this section permanently?"))return!1;var e=JSON.parse(N("pageInfo")),t=JSON.parse(N("userData")).sessionToken;D(t).patch("/provider/places/".concat(e._id),{hideTutorials:!0}).then(function(t){t&&t.data&&"ok"===t.data.status?(a.setState({hideTutorials:!0}),e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))):a.showNotificationError("An unknown error occured. Please try again!")}).catch(function(e){a.setState({submitted:!1,isSaving:!1}),e.response&&"string"===typeof e.response?a.showNotificationError(e.response):a.showNotificationError("An unknown error occured. Please try again!")})},a.handleSubmit=function(e){e.preventDefault();var t=JSON.parse(N("userData")),n=JSON.parse(N("pageInfo"));if(n&&"5cd141d10d437be772373ddb"===n.pageType&&a.setState({isGrocery:!0}),t){var r=t.sessionToken,o=Object(A.a)({},a.state.product);if(o.name&&o.productType&&!isNaN(o.price)&&o.price>0&&o.placeId){if(!window.confirm("Do you want to save this item?"))return!1;a.setState({submitted:!0,isSaving:!0}),o&&(o.tags=[],o.categories=[],o.productCategories=[],o.options={DineIn:!1,PickUp:!1,Delivery:!1},o.containerFee={supportedOrderOption:{pickup:!1,delivery:!1},amount:0}),a.props.addProduct(o,r,function(e,t){t?(S("hasProducts",!0),a.setState({submitted:!1,isSaving:!1}),t._id?(a.showNotification("New product has been added."),setTimeout(function(){a.props.history.push("/products/".concat(t._id,"/edit?message=Complete the product by adding photos &amp; category etc."))},3e3)):(a.showNotification("New product has been added."),setTimeout(function(){a.props.history.push("/products")},3e3))):e?(a.setState({submitted:!1,isSaving:!1}),a.showNotificationError(e.response)):(a.setState({submitted:!1,isSaving:!1}),a.showNotificationError("An unknown error occured. Please try again."))})}else a.setState({submitted:!0}),a.showNotificationError("Some fields are required. Please fill in the required fields.")}else a.props.history.push("/login"),window.location.reload()},a.onKeyPress=function(e){"Enter"===e.key&&e.preventDefault()},a.state={product:{name:"",description:"",productType:"",forSale:!1,isActive:!1,unit:"",limit:"",autofullfill:!1,price:"",comparePrice:"",placeId:n},productTypes:[],productCategories:[],places:[],checked:[],expanded:[],isLoading:!1,submitted:!1,submittedHighlight:!1,isSaving:!1,isGrocery:!1,pageType:"food-drink",activeStep:"product-info",steps:{productInfo:!0},hideTutorials:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("userData")),a=JSON.parse(N("pageInfo"));a&&"5cd141d10d437be772373ddb"===a.pageType?(this.setState({isGrocery:!0}),this.setState({pageType:"grocery"})):a&&"5dea2304f6bba08323a3ddce"===a.pageType&&this.setState({pageType:"sb-tours"}),null!==t?(this.setState({hideTutorials:!(!a||!a.hideTutorials||!0!==a.hideTutorials)}),this.props.getProductTypes(function(t,a){!t&&a&&e.setState({productTypes:a})})):(this.props.history.push("/login"),window.location.reload())}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"renderProductTypes",value:function(){if(void 0!==this.state.productTypes||null!==this.state.productTypes)return this.state.productTypes.filter(function(e){return e.isActive}).map(function(e,t){return o.a.createElement("option",{key:t,value:e._id},e.name)})}},{key:"renderPlaces",value:function(){if(void 0!==this.state.places||null!==this.state.places)return this.state.places.map(function(e,t){return o.a.createElement("option",{key:t,value:e.place._id},e.place.name)})}},{key:"renderVerticalNavBar",value:function(){var e=this;return o.a.createElement(_.Nav,{vertical:!0},o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"product-info"===this.state.activeStep?" active-link":""),to:"#",onClick:function(){e.setState({activeStep:"product-info"})}},"Product Information",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"})))))}},{key:"renderProductInfoStep",value:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{lg:"12",md:"12",sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Alert,{color:"primary"},"Add basic information of the product.")))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{lg:"6",md:"6",sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!e.name?" has-danger":""},o.a.createElement("label",{htmlFor:"name",className:"control-label"},"Product Name ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"name",name:"name",className:"name",placeholder:"Product Name",type:"text",value:e.name,onChange:this.handleChange}))),o.a.createElement(_.Col,{lg:"6",md:"6",sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!e.productType?" has-danger":""},o.a.createElement("label",{htmlFor:"productType",className:"control-label"},"Product Type ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"productType",name:"productType",className:"productType",placeholder:"Product Type",type:"select",value:e.productType,onChange:this.handleChange},o.a.createElement("option",{value:""},"Select One"),this.renderProductTypes())))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"description",className:"control-label"},"Description"),o.a.createElement(_.Input,{id:"description",name:"description",placeholder:"Description",type:"textarea",value:e.description,onChange:this.handleChange,style:{height:"150px"}})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"4"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&(!e.price||isNaN(e.price)||e.price<=0)?" has-danger":""},o.a.createElement("label",{htmlFor:"price",className:"control-label"},"Price ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"price",name:"price",className:"price",placeholder:"\u20b1",type:"text",value:e.price,onChange:this.handleChange}))),o.a.createElement(_.Col,{md:"4"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"comparePrice",className:"control-label"},"Compare Price"),o.a.createElement(_.Input,{id:"comparePrice",name:"comparePrice",className:"comparePrice",placeholder:"\u20b1",type:"text",value:e.comparePrice,onChange:this.handleChange})))))}},{key:"renderNoPageAdded",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"No Page Added"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You have not added a page yet. Click"," "," ",o.a.createElement(ie.a,{to:"/add-page"},"here")," "," ","to add a new page.")))))))}},{key:"renderPageNotVerified",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"You Have Not Agreed with our Terms & Policies"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You must agree  with our Terms & Policies. Click "," "," ",o.a.createElement(ie.a,{to:"/statement-of-agreement"},"here")," "," "," to read our Terms & Policies.")))))))}},{key:"renderPageDisabled",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"This page is disabled."),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"Click "," "," ",o.a.createElement(ie.a,{to:"/products"},"here")," "," "," to go back to the main page.")))))))}},{key:"render",value:function(){var e=this.state.pageType,t=[],a=JSON.parse(N("pageInfo")),n=this.state.productCategories;if(n instanceof Array&&n.length>0){var r=n.filter(function(e){return!e.parent}),l=n.filter(function(e){return e.parent});r&&r.forEach(function(e){var n=e._id.toString(),r=e.name,o=[],s=[];if((o=(a&&a.pageType,l.filter(function(e){return e.parent._id.toString()===n})))instanceof Array&&o.length>0){var i=[];o.forEach(function(e){var t={value:e._id,label:e.name,children:[]};i.push(t)}),s=i}var c={value:n,label:r,children:s};t.push(c)})}return a&&a._id?!0!==a.isVerified?this.renderPageNotVerified():"sb-tours"!==e?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.Form,{onSubmit:this.handleSubmit,onKeyPress:this.onKeyPress},o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Add New Product")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,!a.hideTutorials&&o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Alert,{className:"alert-compact",color:"primary",isOpen:!this.state.hideTutorials,toggle:this.onDismiss,fade:!1},o.a.createElement("h4",{className:"alert-heading"},"New on Products?"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"Check our videos here on how to manage your products.",o.a.createElement("br",null)),o.a.createElement("a",{className:"btn btn-sm btn-primary-v2",href:"https://www.youtube.com/watch?v=k8VEDqbPv7w"},"View Tutorials"),o.a.createElement(_.Button,{className:"btn-fill btn-sm",color:"danger",type:"button",onClick:this.onHideTutorials},"Hide Permanently")))))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"3",lg:"3"},this.renderVerticalNavBar()),o.a.createElement(_.Col,{sm:"12",md:"9",lg:"9"},("product-info"===this.state.activeStep&&this.state.steps.productInfo,this.renderProductInfoStep(this.state.product))))),o.a.createElement(_.CardFooter,null,o.a.createElement(_.Button,{className:"btn-round",color:"info",type:"submit"},"Save"),o.a.createElement(ie.a,{to:"/products",className:"btn btn-round btn-light"},"Cancel")))))),o.a.createElement(z.a,{active:this.state.isSaving,spinner:!0,text:"Saving..."}))):e&&"sb-tours"===e?this.renderPageDisabled():void 0:this.renderNoPageAdded()}}]),t}(o.a.Component),rt=Object(E.b)(function(){return{}},{getProductTypes:xe,addProduct:ke})(nt),ot=a(90),lt=a(72),st=a.n(lt),it=a(142),ct=a.n(it),dt=[188,13],mt={position:"relative",height:145,display:"flex",justifyContent:"center",alignItems:"center",borderWidth:2,borderColor:"#666",borderStyle:"solid",borderRadius:5},ut=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleDelete=function(e){var t=a.state.product.tags2d.filter(function(t,a){return a!==e});a.setState({product:Object(A.a)({},a.state.product,{tags2d:t})})},a.handleAddition=function(e){var t=a.state.product.tags2d;t.push(e),a.setState({product:Object(A.a)({},a.state.product,{tags2d:t})})},a.handleDrag=function(e,t,n){var r=Object(Ne.a)(a.state.product.tags2d).slice();r.splice(t,1),r.splice(n,0,e),a.setState({product:Object(A.a)({},a.state.product,{tags2d:r})})},a.handleChangeDesc=function(e){a.setState({product:Object(A.a)({},a.state.product,{description:e})})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;"checkbox"===t.type&&(r=e.target.checked);a.setState({product:Object(A.a)({},a.state.product,Object(T.a)({},n,r))})},a.handleDisableBarcode=function(e){a.setState(function(e){return{disableBarcode:!e.disableBarcode}})},a.handleDisableItemcode=function(e){a.setState(function(e){return{disableItemcode:!e.disableItemcode}})},a.handleFileUpload=function(e){var t=JSON.parse(N("userData")),n=e.target.files;if(a.state.product.photos.length<6){a.setState({isUploading:!0});var r=a.state.productId,o=t.sessionToken,l=a.state.product.photos,s=new FormData;s.append("file",n[0]),a.props.uploadPhoto(r,s,o,function(e,t){if(!e&&t){a.setState({isUploading:!1});var n=t;n._id&&(l.push(n),a.setState({product:Object(A.a)({},a.state.product,{photos:l})}))}else a.setState({isUploading:!1}),e.response&&"string"===typeof e.response?(console.error(e.response),a.showNotificationError(e.response)):(console.error({error:e}),a.showNotificationError("There is an error uploading the file. Please try again"))})}else a.setState({isUploading:!1}),console.log("No. of files: ",n.length),alert("You are only allowed to upload a maximum of 6 files!")},a.removeImage=function(e){var t=JSON.parse(N("userData")),n=a.state.productId,r=e.currentTarget.dataset.id,o=t.sessionToken;a.props.removePhoto(n,r,o,function(e,t){if(!e&&t){if("ok"===t.deleted){var n=a.state.product.photos.filter(function(e){return e._id!==r});a.setState({product:Object(A.a)({},a.state.product,{photos:n})}),a.showNotification("Image was successfully removed.")}}else e.response&&"string"===typeof e.response?(console.error(e.response),a.showNotificationError(e.response)):(console.error({error:e}),a.showNotificationError("There is error removing the image."))})},a.onAlertDismiss=function(e){a.setState(function(e){return{messageOpen:!e.messageOpen}})},a.onDismiss=function(){a.setState({hideTutorials:!0});var e=JSON.parse(N("pageInfo"));e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))},a.onHideTutorials=function(){if(!window.confirm("Are you sure you want to hide this section permanently?"))return!1;var e=JSON.parse(N("pageInfo")),t=JSON.parse(N("userData")).sessionToken;D(t).patch("/provider/places/".concat(e._id),{hideTutorials:!0}).then(function(t){t&&t.data&&"ok"===t.data.status?(a.setState({hideTutorials:!0}),e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))):a.showNotificationError("An unknown error occured. Please try again!")}).catch(function(e){a.setState({submitted:!1,isSaving:!1}),e.response&&"string"===typeof e.response?a.showNotificationError(e.response):a.showNotificationError("An unknown error occured. Please try again!")})},a.handleSubmit=function(e){e.preventDefault();var t,n,r=JSON.parse(N("userData")),o=JSON.parse(N("pageInfo")),l="";if(r?(l=r.sessionToken,t=Object(A.a)({},a.state.product),n=a.state.productId):(a.props.history.push("/login"),window.location.reload()),t)if(t.name&&t.productType&&!isNaN(t.price)&&t.price>0){if(!window.confirm("Do you want to save this item?"))return!1;if(a.setState({submitted:!0,isSaving:!0}),a.state.product.tags2d){var s=a.state.product.tags2d.map(function(e){return e.id});t.tags=s}else t.tags=[];var i=a.state.productCategories;if(a.state.checked){var c=a.state.checked,d=[],m=[];if(c instanceof Array&&c.length>0)if(o&&o.useCreatedProductCategory){c.forEach(function(e){var t=i.find(function(t){return t._id===e});if(t){var a={_id:t._id,parent:t.parent&&t.parent._id?t.parent._id:null,name:t.name,slug:t.slug};d.push(a),t.parent&&t.parent._id&&m.push(t.parent._id)}});var u=Array.from(new Set(m)),p=i.filter(function(e){return u.includes(e._id)});d=[].concat(Object(Ne.a)(d),Object(Ne.a)(p)),t.productCategories=d}else c.forEach(function(e){var t=i.find(function(t){return t._id===e});if(t){var a={_id:t._id,name:t.name,slug:t.slug};d.push(a)}}),t.categories=d}else t.categories=[],t.productCategories=[];t.options={DineIn:t.forDinein,PickUp:t.forPickup,Delivery:t.forDelivery},t.containerFee={supportedOrderOption:{pickup:t.containerFeePickup,delivery:t.containerFeeDelivery},amount:Number(t.containerFeeAmt)},delete t.tags2d,delete t.forDinein,delete t.forPickup,delete t.forDelivery,delete t.containerFeeAmt,delete t.containerFeeDelivery,delete t.containerFeePickup,delete t.dateAdded,delete t.lastUpdated,a.props.updateProduct(t,n,l,function(e,t){t?(a.setState({submitted:!1,isSaving:!1}),!0!==o.isActive?(a.showNotification("Product has been updated. You can now activate your store."),setTimeout(function(){a.props.history.push("/activate-store")},1e3)):(a.showNotification("Product changes has been saved."),setTimeout(function(){var e="?",t="";e+=a.state.page&&a.state.page>1?"page=".concat(a.state.page,"&"):"",e+=a.state.keyword&&""!==a.state.keyword?"keyword=".concat(a.state.keyword,"&"):"",e+=a.state.status&&""!==a.state.status?"status=".concat(a.state.status,"&"):"",e+=a.state.availability&&""!==a.state.availability?"availability=".concat(a.state.availability,"&"):"",e+=a.state.category&&""!==a.state.category?"category=".concat(a.state.category,"&"):"","&"===(e+=a.state.subCategory&&""!==a.state.subCategory?"subCategory=".concat(a.state.subCategory,"&"):"").substr(e.length-1)&&(t=e.slice(0,-1)),a.props.history.push("/products"+t)},1e3))):e?e.response&&e.response.status&&403===e.response.status?(a.setState({submitted:!1,isSaving:!1}),setTimeout(function(){a.props.history.push("/products")},1e3),a.showNotificationError("You are not allowed to update this product.")):a.showNotificationError(e.response):(a.setState({submitted:!1,isSaving:!1}),a.showNotificationError("An unknown error occured. Please try again."))})}else a.setState({submitted:!0}),a.showNotificationError("Some fields are required. Please fill the required fields.");else setTimeout(function(){a.setState({submitted:!1,isSaving:!1})},1e3),a.showNotificationError("Product information is missing.")},a.onKeyPress=function(e){"Enter"===e.key&&e.preventDefault()},a.generateVoucherCodes=function(){var e=a.state,t=e.productId,n=e.product;if(n.vouchers&&n.vouchers.length>0){if(!window.confirm("The product has existing voucher code, do you still want to continue generating the voucher codes?"))return!1}else if(!window.confirm("Do you want to continue generating the voucher codes?"))return!1;a.setState({isGenerating:!0}),console.log("Generating codes...");var r=JSON.parse(N("userData")).sessionToken;D(r).post("/product-vouchers/".concat(t,"/generate-codes"),{number:100}).then(function(e){if(e&&e.data&&"OK"===e.statusText){var t=e.data;a.showNotification("".concat(t.length," voucher codes has been added successfully for this product."))}else a.showNotificationError("An unknown error occured on generating voucher codes. Please try again!");a.setState({isGenerating:!1})}).catch(function(e){console.error(e),a.setState({isGenerating:!1}),e.response?"string"===typeof e.response?a.showNotificationError(e.response):e.response&&e.response.data&&e.response.data.message&&"string"===typeof e.response.data.message?a.showNotificationError(e.response.data.message):a.showNotificationError("An unknown error occured. Please try again!"):a.showNotificationError("An unknown error occured. Please try again!")})};var n=e.match.params._id;return a.state={productId:n,productExist:!1,product:null,productTypes:[],productCategories:[],places:[],checked:[],expanded:[],isLoading:!0,isSaving:!1,submitted:!1,isUploading:!1,isGrocery:!1,pageType:"food-drink",images:[],disableBarcode:!0,disableItemcode:!0,message:"",messageOpen:!1,page:1,keyword:"",status:"",availability:"",category:"",subCategory:"",activeStep:"product-info",steps:{productInfo:!0,price:!0,productSettings:!0,productCategory:!0,images:!0,vouchers:!0},hideTutorials:!1,isGenerating:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("userData")),a=JSON.parse(N("pageInfo")),n=JSON.parse(N("defaultPage")),r=this.props.location.search,o=je.a.parse(r);if(o.message&&""!==o.message&&this.setState({message:o.message,messageOpen:!0}),o.page&&Number(o.page)>1&&this.setState({page:o.page}),o.keyword&&""!==o.keyword&&this.setState({keyword:o.keyword}),o.status&&""!==o.status&&this.setState({status:o.status}),o.availability&&""!==o.availability&&this.setState({status:o.status}),o.category&&""!==o.category&&this.setState({category:o.category}),o.subCategory&&""!==o.subCategory&&this.setState({subC:o.subCategory}),a&&(a&&"5cd141d10d437be772373ddb"===a.pageType?(this.setState({isGrocery:!0}),this.setState({pageType:"grocery"})):"5dea2304f6bba08323a3ddce"===a.pageType&&this.setState({pageType:"sb-tours"})),null!==t){var l=t.sessionToken,s=this.state.productId;if(this.setState({hideTutorials:!(!a||!a.hideTutorials||!0!==a.hideTutorials)}),this.props.getProductById(s,l,function(t,n){if(!t&&n){var r=n.product,o=r.tags.filter(function(e){return""!==e.trim()}),l=[];o instanceof Array&&o.length>0&&o.forEach(function(e){var t={};t.id=e,t.text=e,l.push(t)});var s=[];a&&a.useCreatedProductCategory?r.productCategories instanceof Array&&r.productCategories.length>0&&r.productCategories.forEach(function(e){if(e&&e._id&&void 0!==e.parent&&null!==e.parent){var t=e._id;s.push(t)}}):r.categories instanceof Array&&r.categories.length>0&&r.categories.forEach(function(e){if(e&&e._id){var t=e._id;s.push(t)}}),e.setState({productExist:!0,product:{name:r.name,placeId:r.places[0]._id,summary:r.summary,description:r.description,tags2d:l,productType:r.productType?r.productType._id:null,isFeatured:r.isFeatured,forSale:r.forSale,isActive:r.isActive,barcode:r.barcode,itemCode:r.itemCode,unit:r.unit,limit:r.limit,autofullfill:r.autofullfill,cost:r.cost,price:r.price,comparePrice:r.comparePrice,amenitites:r.amenity,productCategories:r.productCategories,photos:r.photos,forDinein:!(!r.options||!r.options.DineIn)&&r.options.DineIn,forPickup:!(!r.options||!r.options.PickUp)&&r.options.PickUp,forDelivery:!(!r.options||!r.options.Delivery)&&r.options.Delivery,containerFeeAmt:r.containerFee&&r.containerFee.amount?r.containerFee.amount:0,containerFeeDelivery:!!(r.containerFee&&r.containerFee.supportedOrderOption&&r.containerFee.supportedOrderOption.delivery)&&r.containerFee.supportedOrderOption.delivery,containerFeePickup:!!(r.containerFee&&r.containerFee.supportedOrderOption&&r.containerFee.supportedOrderOption.pickup)&&r.containerFee.supportedOrderOption.pickup,vouchers:r.vouchers?r.vouchers:[]},checked:[].concat(s)}),e.setState({isLoading:!1})}else t&&e.setState({isLoading:!1})}),this.props.getProductTypes(function(t,a){!t&&a&&e.setState({productTypes:a})}),this.props.getProviderPlaces(l,function(t,a){!t&&a&&e.setState({places:a.places})}),a&&a.useCreatedProductCategory){this.props.getProductCategoriesV2(n,{status:"active"},l,function(t,a){!t&&a&&e.setState({productCategories:a})})}else this.props.getProductCategories(l,function(t,a){!t&&a&&e.setState({productCategories:a})})}else this.props.history.push("/login"),window.location.reload()}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"renderProductTypes",value:function(){if(void 0!==this.state.productTypes||null!=this.state.productTypes)return this.state.productTypes.filter(function(e){return e.isActive}).map(function(e,t){return o.a.createElement("option",{key:t,value:e._id},e.name)})}},{key:"renderVerticalNavBar",value:function(){var e=this;return o.a.createElement(_.Nav,{vertical:!0},o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"product-info"===this.state.activeStep?" active-link":""),to:"#",onClick:function(){e.setState({activeStep:"product-info"})}},"Product Information",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"})))),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"price"===this.state.activeStep?" active-link":"")+(!1===this.state.steps.price?" disabled":""),to:"#",onClick:function(){!0===e.state.steps.price&&e.setState({activeStep:"price"})}},"Price ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"})))),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"product-settings"===this.state.activeStep?" active-link":"")+(!1===this.state.steps.productSettings?" disabled":""),to:"#",onClick:function(){!0===e.state.steps.productSettings&&e.setState({activeStep:"product-settings"})}},"Product Settings ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"})))),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"product-category"===this.state.activeStep?" active-link":"")+(!1===this.state.steps.productCategory?" disabled":""),to:"#",onClick:function(){!0===e.state.steps.productCategory&&e.setState({activeStep:"product-category"})}},"Product Category ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"})))),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"images"===this.state.activeStep?" active-link":"")+(!1===this.state.steps.images?" disabled":""),to:"#",onClick:function(){!0===e.state.steps.images&&e.setState({activeStep:"images"})}},"Images ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"})))),this.state.product.vouchers&&this.state.product.vouchers.length>0&&o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"vouchers"===this.state.activeStep?" active-link":"")+(!1===this.state.steps.vouchers?" disabled":""),to:"#",onClick:function(){!0===e.state.steps.vouchers&&e.setState({activeStep:"vouchers"})}},"Vouchers ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"})))))}},{key:"renderProductInfoStep",value:function(e){var t=this.state.submitted;return o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.FormGroup,{className:t&&!e.name?" has-danger":""},o.a.createElement("label",{htmlFor:"name",className:"control-label"},"Product Name ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"name",name:"name",className:"name",placeholder:"Product Name",type:"text",value:e.name,onChange:this.handleChange,autoComplete:"off"})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"6",lg:"6"},o.a.createElement(_.FormGroup,{className:t&&!e.productType?" has-danger":""},o.a.createElement("label",{htmlFor:"productType",className:"control-label"},"Product Type ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"productType",name:"productType",className:"productType",placeholder:"Product Type",type:"select",value:e.productType,onChange:this.handleChange},o.a.createElement("option",{value:""},"Select One"),this.renderProductTypes())))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"description",className:"control-label"},"Description"),o.a.createElement(_.Input,{id:"description",name:"description",placeholder:"Description",type:"textarea",value:e.description,onChange:this.handleChange,style:{height:"150px"}})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"tags",className:"control-label"},"Tags"),o.a.createElement(ot.WithContext,{tags:e.tags2d,delimiters:dt,handleDelete:this.handleDelete,handleAddition:this.handleAddition,handleDrag:this.handleDrag,autofocus:!1})),o.a.createElement(_.FormGroup,{className:"enable-field-group"},o.a.createElement("label",{htmlFor:"barcode",className:"control-label"},"Barcode")),o.a.createElement(_.FormGroup,null,o.a.createElement(_.Label,{check:!0},o.a.createElement(_.Input,{type:"checkbox",className:"enable-disable-checkbox",id:"disableBarcode",name:"disableBarcode",defaultChecked:!this.state.disableBarcode,onChange:this.handleDisableBarcode}),o.a.createElement("span",{className:"form-check-sign"},o.a.createElement("span",{className:"check"})),"Enable Barcode"),o.a.createElement(_.Input,{readOnly:this.state.disableBarcode,id:"barcode",name:"barcode",className:"barcode",placeholder:"Barcode",type:"text",value:e.barcode,onChange:this.handleChange})),o.a.createElement(_.FormGroup,{className:"enable-field-group"},o.a.createElement("label",{htmlFor:"barcode",className:"control-label"},"Item Code")),o.a.createElement(_.FormGroup,null,o.a.createElement(_.Label,{check:!0},o.a.createElement(_.Input,{type:"checkbox",className:"enable-disable-checkbox",id:"disableItemcode",name:"disableItemcode",defaultChecked:!this.state.disableItemcode,onChange:this.handleDisableItemcode}),o.a.createElement("span",{className:"form-check-sign"},o.a.createElement("span",{className:"check"})),"Enable Item Code"),o.a.createElement(_.Input,{readOnly:this.state.disableItemcode,id:"itemCode",name:"itemCode",className:"itemCode",placeholder:"Item Code",type:"text",value:e.itemCode,onChange:this.handleChange})))))}},{key:"renderPriceStep",value:function(e){var t=this.state.submitted;return o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"4"},o.a.createElement(_.FormGroup,{className:t&&(!e.price||isNaN(e.price)||e.price<=0)?" has-danger":""},o.a.createElement("label",{htmlFor:"price",className:"control-label"},"Price ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"price",name:"price",placeholder:"\u20b1",type:"text",value:e.price,onChange:this.handleChange}))),o.a.createElement(_.Col,{className:"px-md-1",md:"4"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"comparePrice",className:"control-label"},"Compare Price"),o.a.createElement(_.Input,{id:"comparePrice",name:"comparePrice",placeholder:"\u20b1",type:"text",value:e.comparePrice,onChange:this.handleChange}))))}},{key:"renderProductSettings",value:function(e){var t=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"4"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Label,null,o.a.createElement(Ue.a,{onClick:function(){t.setState({product:Object(A.a)({},t.state.product,{forSale:!e.forSale})})},on:e.forSale}),"For Sale (Availability)")),o.a.createElement(_.FormGroup,null,o.a.createElement(_.Label,null,o.a.createElement(Ue.a,{onClick:function(){t.setState({product:Object(A.a)({},t.state.product,{autofullfill:!e.autofullfill})})},on:e.autofullfill}),"Auto-confirm"))),o.a.createElement(_.Col,{md:"4"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Label,null,o.a.createElement(Ue.a,{onClick:function(){t.setState({product:Object(A.a)({},t.state.product,{isActive:!e.isActive})})},on:e.isActive}),"Publish")))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"4",style:{marginBottom:"15px"}},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Label,{className:"control-label"},"Pick-up Options")),o.a.createElement(_.FormGroup,{check:!0},o.a.createElement(_.Label,{check:!0},o.a.createElement(_.Input,{type:"checkbox",className:"",id:"forPickup",name:"forPickup",defaultChecked:e.forPickup,onChange:this.handleChange}),o.a.createElement("span",{className:"form-check-sign"},o.a.createElement("span",{className:"check"})),"Pickup")),o.a.createElement(_.FormGroup,{check:!0},o.a.createElement(_.Label,{check:!0},o.a.createElement(_.Input,{type:"checkbox",className:"",id:"forDelivery",name:"forDelivery",defaultChecked:e.forDelivery,onChange:this.handleChange}),o.a.createElement("span",{className:"form-check-sign"},o.a.createElement("span",{className:"check"})),"Delivery")),o.a.createElement(_.FormGroup,{check:!0},o.a.createElement(_.Label,{check:!0},o.a.createElement(_.Input,{type:"checkbox",className:"",id:"forDinein",name:"forDinein",defaultChecked:e.forDinein,onChange:this.handleChange}),o.a.createElement("span",{className:"form-check-sign"},o.a.createElement("span",{className:"check"})),"Dine In"))),o.a.createElement(_.Col,{className:"px-md-1",md:"4",style:{marginBottom:"15px"}},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Label,{className:"control-label"},"Charges and Fees")))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Label,null,o.a.createElement(Ue.a,{onClick:function(){var a=!e.containerFeeDelivery;t.setState({product:Object(A.a)({},t.state.product,{containerFeeDelivery:a})})},on:e.containerFeeDelivery}),"Container Fee")),o.a.createElement(_.FormGroup,null,o.a.createElement(_.Input,{id:"containerFeeAmt",name:"containerFeeAmt",className:"containerFeeAmt",placeholder:"Enter Amount",type:"text",value:e.containerFeeAmt,onChange:this.handleChange})),o.a.createElement(_.FormGroup,null,o.a.createElement(_.Label,null,o.a.createElement(Ue.a,{onClick:function(){var a=!e.containerFeePickup;t.setState({product:Object(A.a)({},t.state.product,{containerFeePickup:a})})},on:this.state.product.containerFeePickup}),"Applicable for Pickup"))))),o.a.createElement(_.Col,{md:"4",style:{marginBottom:"15px"}},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"unit",className:"control-label"},"Product Unit"),o.a.createElement(_.Input,{id:"unit",name:"unit",className:"unit",placeholder:"Enter Unit (kg, lbs, L)",type:"text",value:e.unit,onChange:this.handleChange})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"limit",className:"control-label"},"Product Limit (per order)"),o.a.createElement(_.Input,{id:"limit",name:"limit",className:"limit",placeholder:"Enter product limit",type:"text",value:e.limit,onChange:this.handleChange})))))))}},{key:"renderProductCategory",value:function(e,t){var a=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{className:"control-label"},"Select Product Categories"),o.a.createElement(st.a,{nodes:e,checked:this.state.checked,expanded:this.state.expanded,onCheck:function(e){return a.setState({checked:e})},onExpand:function(e){return a.setState({expanded:e})},showNodeIcon:!1,icons:t,nativeCheckboxes:!0})))))}},{key:"renderImages",value:function(e){var t=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"images",className:"control-label"},"Upload Photo"),o.a.createElement("div",{className:"upload-photo",style:{margin:"10px auto",border:"1px solid #ccc",backgroundColor:"#efefef"}},o.a.createElement(_.Input,{name:"images",label:"upload file",type:"file",onChange:this.handleFileUpload,style:mt}),o.a.createElement("ul",{className:"product-photos"},e.photos.length>0&&o.a.createElement(o.a.Fragment,null,e.photos.map(function(e){var a=e.original,n=e.thumb,r=e._id;return o.a.createElement("li",{key:r},o.a.createElement("img",{alt:a,title:r,src:n}),o.a.createElement("button",{"data-id":r,type:"button",onClick:t.removeImage,className:"remove-image"},o.a.createElement("span",{style:{color:"#fefefe"}},"\xd7")))})),this.state.isUploading&&o.a.createElement("li",{style:{border:"0",padding:"10px"}},o.a.createElement(Ve.SyncLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isUploading}))))))))}},{key:"renderVouchers",value:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{lg:"12",md:"12",sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("h4",null,"Product Vouchers"),o.a.createElement("div",{className:"vouchers"},o.a.createElement(ie.a,{to:"/product-vouchers",className:"btn btn-round btn-sm btn-info"},"Manage Vouchers"),e.vouchers&&e.vouchers.length>0?o.a.createElement(_.Table,{className:"product-vouchers table-striped responsive",responsive:!0},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"\xa0"),o.a.createElement("th",{colSpan:"2"},"Code"),o.a.createElement("th",null,"Product"),o.a.createElement("th",null,"Used"),o.a.createElement("th",null,"Added"))),o.a.createElement("tbody",null,e.vouchers.map(function(t,a){return o.a.createElement("tr",{key:t._id},o.a.createElement("td",null,a+1,"."),o.a.createElement("td",null,o.a.createElement(ct.a,{size:50,value:t.code})),o.a.createElement("td",null,o.a.createElement("span",{style:{fontFamily:"monospace"}},t.code)),o.a.createElement("td",null,e.name),t.isUsed?o.a.createElement("td",null,o.a.createElement(_.Badge,{color:"secondary"},"YES")):o.a.createElement("td",null,o.a.createElement(_.Badge,{color:"success"},"NO")),o.a.createElement("td",null,Object(_e.default)(new Date(t.createdAt),"MMM dd, yyyy hh:mm a")))}))):o.a.createElement("p",null,o.a.createElement("em",{className:"text-danger"},"No vouchers added.")))))))}},{key:"render",value:function(){var e=JSON.parse(N("userData")),t=JSON.parse(N("pageInfo")),a="";e?a=e.userId:(this.props.history.push("/login"),window.location.reload());var n=this.state.product,r=this.state.productCategories,l=r.filter(function(e){return!e.parent}),s=r.filter(function(e){return e.parent}),i=[];s.forEach(function(e){void 0!==e.provider&&e.provider.toString()!==a||i.push(e)});var c=[];l&&l.forEach(function(e){var t=e._id.toString(),a=e.name,n=[],r=[];if((n=i.filter(function(e){return e.parent._id.toString()===t}))instanceof Array&&n.length>0){var o=[];n.forEach(function(e){var t={value:e._id,label:e.name,children:[]};o.push(t)}),r=o}var l={value:t,label:a,children:r};c.push(l)});var d={check:o.a.createElement(me.a,{className:"rct-icon rct-icon-check",icon:["far","check-square"]}),uncheck:o.a.createElement(me.a,{className:"rct-icon rct-icon-uncheck",icon:["far","square"]}),halfCheck:o.a.createElement(me.a,{className:"rct-icon rct-icon-half-check",icon:["far","check-square"]}),expandClose:o.a.createElement(me.a,{className:"rct-icon rct-icon-expand-close",icon:"chevron-right"}),expandOpen:o.a.createElement(me.a,{className:"rct-icon rct-icon-expand-open",icon:"chevron-down"}),expandAll:o.a.createElement(me.a,{className:"rct-icon rct-icon-expand-all",icon:"plus-square"}),collapseAll:o.a.createElement(me.a,{className:"rct-icon rct-icon-collapse-all",icon:"minus-square"}),parentClose:o.a.createElement(me.a,{className:"rct-icon rct-icon-parent-close",icon:["far","folder"]}),parentOpen:o.a.createElement(me.a,{className:"rct-icon rct-icon-parent-open",icon:["far","folder-open"]}),leaf:o.a.createElement(me.a,{className:"rct-icon rct-icon-leaf-close",icon:["far","file"]})};if("sb-tours"!==this.state.pageType){if(this.state.isLoading)return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Edit Product")),o.a.createElement(_.CardBody,null,o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading})))))));var m="?",u="";m+=this.state.page&&this.state.page>1?"page=".concat(this.state.page,"&"):"",m+=this.state.keyword&&""!==this.state.keyword?"keyword=".concat(this.state.keyword,"&"):"",m+=this.state.status&&""!==this.state.status?"status=".concat(this.state.status,"&"):"",m+=this.state.availability&&""!==this.state.availability?"availability=".concat(this.state.availability,"&"):"",m+=this.state.category&&""!==this.state.category?"category=".concat(this.state.category,"&"):"","&"===(m+=this.state.subCategory&&""!==this.state.subCategory?"subCategory=".concat(this.state.subCategory,"&"):"").substr(m.length-1)&&(u=m.slice(0,-1));var p="/products".concat(u);return this.state.product?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Alert,{color:"success",isOpen:this.state.messageOpen,toggle:this.onAlertDismiss},this.state.message),o.a.createElement(_.Card,null,o.a.createElement(_.Form,{onSubmit:this.handleSubmit,onKeyPress:this.onKeyPress},o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Edit Product - ",o.a.createElement("em",null,n.name))),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,!t.hideTutorials&&o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Alert,{className:"alert-compact",color:"primary",isOpen:!this.state.hideTutorials,toggle:this.onDismiss,fade:!1},o.a.createElement("h4",{className:"alert-heading"},"New on Products?"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"Check our videos here on how to manage your products.",o.a.createElement("br",null)),o.a.createElement("a",{className:"btn btn-sm btn-primary-v2",href:"https://www.youtube.com/watch?v=k8VEDqbPv7w"},"View Tutorials"),o.a.createElement(_.Button,{className:"btn-fill btn-sm",color:"danger",type:"button",onClick:this.onHideTutorials},"Hide Permanently")))))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"3",lg:"3"},this.renderVerticalNavBar()),o.a.createElement(_.Col,{sm:"12",md:"9",lg:"9"},"product-info"===this.state.activeStep&&!0===this.state.steps.productInfo?this.renderProductInfoStep(this.state.product):"price"===this.state.activeStep&&!0===this.state.steps.price?this.renderPriceStep(this.state.product):"product-settings"===this.state.activeStep&&!0===this.state.steps.productSettings?this.renderProductSettings(this.state.product):"product-category"===this.state.activeStep&&!0===this.state.steps.productCategory?this.renderProductCategory(c,d):"images"===this.state.activeStep&&!0===this.state.steps.images?this.renderImages(this.state.product):"vouchers"===this.state.activeStep&&!0===this.state.steps.vouchers&&this.state.product.vouchers&&this.state.product.vouchers.length>0?this.renderVouchers(this.state.product):this.renderProductInfoStep(this.state.product)))),o.a.createElement(_.CardFooter,null,o.a.createElement(_.Button,{className:"btn-round",color:"info",type:"submit"},"Save"),o.a.createElement(ie.a,{to:p,className:"btn btn-round btn-light"},"Cancel"))))))),o.a.createElement(z.a,{active:this.state.isSaving,spinner:!0,text:"Saving..."}),o.a.createElement(z.a,{active:this.state.isGenerating,spinner:!0,text:"Generating Vouchers Codes..."})):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Edit Product")),o.a.createElement(_.CardBody,null,o.a.createElement("h4",{className:"text-danger"},"Product not found")),o.a.createElement(_.CardFooter,null,o.a.createElement(ie.a,{to:p,className:"btn btn-round btn-default"},"Back to Products")))))))}return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",null,"This page is disabled.")),o.a.createElement(_.CardBody,null))))))}}]),t}(o.a.Component),pt=Object(E.b)(function(){return{}},{getProductById:Pe,getProductTypes:xe,getProductCategories:Te,getProductCategoriesV2:Ie,getProviderPlaces:F,updateProduct:De,uploadPhoto:Fe,removePhoto:Me})(ut),ht=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChangeKeyword=function(e){var t=e.target.value;a.setState({keyword:t})},a.handleEnter=function(e){if("Enter"===e.key){a.setState({isLoading:!0});var t=a.state.keyword,n=a.props.location.search,r=je.a.parse(n);delete r.message,delete r.page,""!==t?r.keyword=t:delete r.keyword;var o="?"+je.a.stringify(r);a.refreshProductList(o)}},a.handleDelete=function(e){if(!window.confirm("Do you want to delete this tour?"))return!1;var t=a.props.location.search,n=je.a.parse(t);delete n.message;var r="?"+je.a.stringify(n),o=e.currentTarget.dataset.item;if(o){var l=JSON.parse(N("userData"));if(l){var s=l.sessionToken;D(s).delete("/business/places?_id=".concat(o)).then(function(e){e&&e.data&&e.data&&"Deleted"===e.data.status&&(a.showNotification("Tour has been deleted!"),a.refreshProductList(r))}).catch(function(e){e&&(e.response&&e.response.status&&403===e.response.status?(setTimeout(function(){a.setState({isLoading:!0});var e=a.props.location.search,t=je.a.parse(e);delete t.message,delete t.page;var n="?"+je.a.stringify(t);a.setState({activePage:1}),a.refreshProductList(n)},1e3),a.showNotificationError("You are not allowed to delete this tour.")):a.showNotificationError(e.response))})}else a.props.history.push("/login"),window.location.reload()}},a.cloneItem=function(e){if(!window.confirm("Do you want to clone this tour?"))return!1;var t=e.currentTarget.dataset.item;if(t){var n=JSON.parse(N("userData"));if(null!==n){var r=n.sessionToken;D(r).get("/provider/tours/".concat(t)).then(function(e){if(e&&e.data){var t=e.data.page,n={name:t.name?t.name:"",isSuperGuide:!t.tourDetails.isSuperGuide||t.tourDetails.isSuperGuide,about:t.about?t.about:"",pageType:t.pageType?t.pageType:"5dea2304f6bba08323a3ddce",photos:t.photos?t.photos:[],price:t.tourDetails.price?t.tourDetails.price:0,comparePrice:t.tourDetails.comparePrice?t.tourDetails.comparePrice:0,numberOfPax:t.tourDetails.numberOfPax?t.tourDetails.numberOfPax:0,numberOfGroups:t.tourDetails.numberOfGroups?t.tourDetails.numberOfGroups:0,minNumber:t.tourDetails.minNumber?t.tourDetails.minNumber:0,maxNumber:t.tourDetails.maxNumber?t.tourDetails.maxNumber:0,highlights:t.tourDetails.activities?t.tourDetails.activities:[],sections:t.tourDetails.sections?t.tourDetails.sections:[],addons:t.tourDetails.addons?t.tourDetails.addons:[]};D(r).post("/provider/tours",n).then(function(e){e&&e.data&&e.data.place&&setTimeout(function(){var t=e.data.place._id;a.props.history.push("/tours/".concat(t,"/edit?message=A tour has been cloned!"))},1e3)}).catch(function(e){e.response&&"string"===typeof e.response?a.showNotificationError(e.response):a.showNotificationError("There is an error cloning the tour!")})}else a.showNotificationError("There is an error cloning the tour!")}).catch(function(e){a.showNotificationError("There is an error cloning the tour!")})}else a.props.history.push("/login"),window.location.reload()}},a.handleChangeProductStatus=function(e){a.setState({isLoading:!0});var t=e.target.value,n=a.props.location.search,r=je.a.parse(n);delete r.message,delete r.page,""!==t?r.status=t:delete r.status;var o="?"+je.a.stringify(r);a.setState({status:t,activePage:1}),a.refreshProductList(o)},a.handlePageChange=function(e){a.setState({isLoading:!0});var t=a.props.location.search,n=je.a.parse(t);delete n.message,n.page=e;var r="?"+je.a.stringify(n);a.setState({activePage:e}),a.refreshProductList(r)},a.handleChangePerPage=function(e){a.setState({isLoading:!0});var t=e.target.value,n=a.props.location.search,r=je.a.parse(n);delete r.message,delete r.page,""!==t?r.size=t:delete r.size;var o="?"+je.a.stringify(r);a.setState({size:t,activePage:1}),a.refreshProductList(o)},a.handleCheckAll=function(e){var t=e.target.checked,n=document.querySelectorAll('input[name="product"]'),r=Array.from(n);if(t){var o=r.map(function(e){return e.value});a.setState({checked:o})}else a.setState({checked:[]});n.forEach(function(e){e.checked=!!t})},a.handleCheck=function(e){var t=e.target,n=t.value;if(t.checked)a.setState({checked:[].concat(Object(Ne.a)(a.state.checked),[n])});else{var r=a.state.checked.filter(function(e){return n!==e});a.setState({checked:r})}},a.handleDeleteChecked=function(){var e=0,t=0,n=!1,r=a.state.checked;if(r instanceof Array&&r.length>0){if(!window.confirm("Are you sure you want to delete this tour(s)?"))return!1;a.setState({isProcessing:!0});var o=a.props.location.search,l=je.a.parse(o);l.message&&delete l.message,r.forEach(function(r,o,s){var i=JSON.parse(N("userData")).sessionToken,c=a.state.tours.find(function(e){return e._id===r});c.isActive=!0,c&&a.props.deleteProduct(r,i,function(r,o){if("Deleted"===o.status?t++:r&&(n=!0),++e===s.length)if(a.setState({isProcessing:!1}),document.getElementById("check-all").checked=!1,document.querySelectorAll('input[name="product"]').forEach(function(e){e.checked=!1}),t>0){var i=t+" tours(s) has been deleted.";a.showNotification(i);var c="?"+je.a.stringify(l);a.refreshProductList(c)}else n&&a.showNotificationError("There is a error in deleting the tour(s)!")})})}else a.showNotificationError("Please select a tour!")},a.handlePublishChecked=function(){var e=a.state.checked,t=0,n=0,r=!1;return e instanceof Array&&e.length>0?!!window.confirm("Are you sure you want to publish this tour(s)?")&&(a.setState({isProcessing:!0}),void e.forEach(function(e,o,l){var s=JSON.parse(N("userData")).sessionToken,i=a.state.tours.find(function(t){return t._id===e});i.isActive=!0,i&&a.props.updateProduct(i,e,s,function(e,o){o?(a.setState(function(e){return{list:e.tours.map(function(t){return ft(t,e.tours)})}}),n++):e&&(r=!0),++t===l.length&&(a.setState({isProcessing:!1}),n>0&&a.showNotification(n+" tour(s) has been published!"),r&&a.showNotificationError("There is a error in updating the tour(s)!"))})})):(a.showNotificationError("Please select a tour!"),!1)},a.handleUnpublishChecked=function(){var e=a.state.checked,t=0,n=0,r=!1;return e instanceof Array&&e.length>0?!!window.confirm("Are you sure you want to unpublish this tour(s)?")&&(a.setState({isProcessing:!0}),void e.forEach(function(e,o,l){var s=JSON.parse(N("userData")).sessionToken,i=a.state.tours.find(function(t){return t._id===e});i.isActive=!1,i&&a.props.updateProduct(i,e,s,function(e,o){o?(a.setState(function(e){return{list:e.tours.map(function(t){return ft(t,e.tours)})}}),n++):e&&(r=!0),++t===l.length&&(a.setState({isProcessing:!1}),n>0&&a.showNotification(n+" tour(s) has been unpublished!"),r&&a.showNotificationError("There is a error in updating the tour(s)!"))})})):(a.showNotificationError("Please select a tour!"),!1)},a.sortCreated=function(){var e="";e="created"===a.state.sortBy?"desc"!==a.state.sort?"desc":"asc":"desc";var t=a.props.location.search,n=je.a.parse(t);delete n.message,n.sort=e,n.sortBy="created";var r="?"+je.a.stringify(n);a.setState({sort:e}),a.setState({sortBy:"created"}),a.refreshProductList(r)},a.sortPrice=function(){var e="";e="price"===a.state.sortBy?"desc"!==a.state.sort?"desc":"asc":"desc";var t=a.props.location.search,n=je.a.parse(t);delete n.message,n.sort=e,n.sortBy="price";var r="?"+je.a.stringify(n);a.setState({sort:e}),a.setState({sortBy:"price"}),a.refreshProductList(r)},a.sortName=function(){var e="";e="name"===a.state.sortBy?"desc"!==a.state.sort?"desc":"asc":"desc";var t=a.props.location.search,n=je.a.parse(t);delete n.message,n.sort=e,n.sortBy="name";var r="?"+je.a.stringify(n);a.setState({sort:e}),a.setState({sortBy:"name"}),a.refreshProductList(r)},a.state={tours:[],checked:[],defaultPage:"",pagination:{},activePage:1,selectedPage:"",selectedAvailability:"",selectedProductCategory:"",selectedProductCategorySub:"",sortBy:"",sort:"",status:"",keyword:"",size:25,isLoading:!0,isProcessing:!1,isGrocery:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("userData")),a=JSON.parse(N("pageInfo"));if(null!==t){var n=JSON.parse(N("defaultPage")),r=t.sessionToken;if(n)if(""!==n){var o=this.props.location.search,l=je.a.parse(o),s=l.page?Number(l.page):1,i=l.status?l.status:"",c=l.sortBy?l.sortBy:"created",d=l.sort?l.sort:"desc",m=l.keyword?l.keyword:"",u=l.size?l.size:25,p="?"+je.a.stringify(l);this.setState({activePage:s,selectedPage:n,status:i,sort:d,sortBy:c,keyword:m,size:u}),this.refreshProductList(p)}else this.props.getProviderPlaces(r,function(t,r){if(!t&&r){if(r.places&&r.places instanceof Array&&r.places.length>0){var o=r.places.find(function(e){return e.isDefault});o&&o._id?(n=o._id,a=o):(n=r.places[0]._id,a=r.places[0])}S("pageInfo",JSON.stringify(a));var l=e.props.location.search,s=je.a.parse(l),i=s.page?Number(s.page):1,c=s.status?s.status:"",d=s.sortBy?s.sortBy:"created",m=s.sort?s.sort:"desc",u=s.keyword?s.keyword:"",p=s.size?s.size:25,h="?"+je.a.stringify(s);e.setState({activePage:i,selectedPage:n,status:c,sort:m,sortBy:d,keyword:u,size:p}),e.refreshProductList(h)}else e.setState({isLoading:!1})});else this.props.getProviderPlaces(r,function(t,r){if(!t&&r){if(r.places&&r.places instanceof Array&&r.places.length>0){var o=r.places.find(function(e){return e.isDefault});o&&o._id?(n=o._id,a=o):(n=r.places[0]._id,a=r.places[0])}S("pageInfo",JSON.stringify(a));var l=e.props.location.search,s=je.a.parse(l),i=s.page?Number(s.page):1,c=s.status?s.status:"",d=s.sortBy?s.sortBy:"created",m=s.sort?s.sort:"desc",u=s.keyword?s.keyword:"",p=s.size?s.size:25,h="?"+je.a.stringify(s);e.setState({activePage:i,selectedPage:n,status:c,sort:m,sortBy:d,keyword:u,size:p}),e.refreshProductList(h)}else e.setState({isLoading:!1})})}else this.props.history.push("/login"),window.location.reload()}},{key:"renderRows",value:function(){var e=this;return this.state.isLoading?o.a.createElement("tr",null,o.a.createElement("td",{colSpan:"6"},o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading}))):this.state.tours instanceof Array&&this.state.tours.length>0?this.state.tours.map(function(t,a,n){return o.a.createElement("tr",{key:a},o.a.createElement("td",null,o.a.createElement(_.Input,{style:{position:"inherit",margin:"0"},className:"form-control",type:"checkbox",name:"product",value:t._id,onClick:e.handleCheck})),o.a.createElement("td",{width:"450"},e.renderImage(t)),o.a.createElement("td",{width:"150"},Object(_e.default)(new Date(t.createdAt),"MMM dd, yyyy hh:mm a")),o.a.createElement("td",{align:"right"},"\u20b1",t.tourDetails&&t.tourDetails.price?gt(t.tourDetails.price):"0.00"),o.a.createElement("td",{width:"75",align:"center"},o.a.createElement(ie.a,{to:"/tours/"+t._id+"/edit",style:{paddingRight:"10px"}},o.a.createElement(me.a,{icon:"edit"})),o.a.createElement(ie.a,{to:"#",className:"text-danger",onClick:e.handleDelete,"data-item":t._id,style:{paddingRight:"10px"}},o.a.createElement(me.a,{icon:"trash-alt"})),o.a.createElement(ie.a,{to:"#",onClick:e.cloneItem,"data-item":t._id},o.a.createElement(me.a,{icon:"copy"}))),o.a.createElement("td",null,o.a.createElement(Ue.a,{onClick:function(){var r=!t.isActive;e.toggleSwitchIsActive(t),n[a].isActive=r,e.setState({tours:n})},on:t.isActive})))}):o.a.createElement("tr",null,o.a.createElement("td",{colSpan:"67"},o.a.createElement("strong",{className:"text-danger"},o.a.createElement("em",null,"No tours found."))))}},{key:"renderImage",value:function(e){var t,a=e.name,n=e.photos;return t=void 0!==n[0]||null!=n[0]?n[0]:{thumb:We.a},o.a.createElement(_.Media,{className:"mt-1"},t&&t.thumb&&o.a.createElement(_.Media,{left:!0,middle:!0},o.a.createElement(_.Media,{object:!0,"data-src":t.thumb,src:t.thumb,alt:a,title:a})),o.a.createElement(_.Media,{body:!0},o.a.createElement(_.Media,null,o.a.createElement(ie.a,{to:"/tours/"+e._id+"/edit"},a))))}},{key:"toggleSwitchIsActive",value:function(e){var t=this,a=JSON.parse(N("userData")).sessionToken,n=e._id,r={isActive:!e.isActive};D(a).patch("/provider/tours/".concat(n,"/update-status"),r).then(function(e){e&&e.data&&t.showNotification("Tour updated.")}).catch(function(e){t.setState({submitted:!1,isSaving:!1}),e.response&&"string"===typeof e.response?t.showNotificationError(e.response):t.showNotificationError("There is a error updating the tour!")})}},{key:"showNotification",value:function(e){if(e&&"string"===typeof e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:2};t&&this.refs.notify&&this.refs.notify.notificationAlert&&this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e&&"string"===typeof e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:2};t&&this.refs.notify&&this.refs.notify.notificationAlert&&this.refs.notify.notificationAlert(t)}}},{key:"refreshProductList",value:function(e){var t=this,a=je.a.parse(e),n=a.message;document.getElementById("check-all").checked=!1,document.querySelectorAll('input[name="product"]').forEach(function(e){e.checked=!1}),n&&(delete a.message,this.showNotification(n)),this.props.history.push("/tours"+e);var r=JSON.parse(N("userData")),o=r.sessionToken;null!=r?D(o).get("/provider/tours",{params:a}).then(function(e){if(e&&e.data){var a=e.data,n=a.tours,r=a.pagination;t.setState({tours:n,pagination:r}),t.setState({isLoading:!1})}else t.setState({isLoading:!1})}).catch(function(e){t.setState({isLoading:!1})}):this.setState({isLoading:!1})}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h3",{className:"title"},"Tours List"),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Input,{id:"keyword",name:"keyword",type:"text",placeholder:"Search...",onChange:this.handleChangeKeyword,onKeyPress:this.handleEnter,value:this.state.keyword}))))),o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"offset-md-6",md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Input,{id:"productStatus",name:"productStatus",type:"select",onChange:this.handleChangeProductStatus,value:this.state.status},o.a.createElement("option",{value:""},"Filter by status"),o.a.createElement("option",{value:"active"},"Active"),o.a.createElement("option",{value:"inActive"},"Inactive"))))))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pull-right",md:"12"},o.a.createElement(_.Button,{alt:"Unpublish",title:"Unpublish",className:"btn btn-sm btn-round btn-info pull-right",onClick:this.handleUnpublishChecked},o.a.createElement(me.a,{icon:"eye-slash"}),"\xa0Unpublish"),o.a.createElement(_.Button,{alt:"Publish",title:"Publish",className:"btn btn-sm btn-round btn-info pull-right",onClick:this.handlePublishChecked},o.a.createElement(me.a,{icon:"eye"}),"\xa0Publish"),o.a.createElement(_.Button,{alt:"Delete",title:"Delete",className:"btn btn-sm btn-round btn-info pull-right",onClick:this.handleDeleteChecked},o.a.createElement(me.a,{icon:"archive"}),"\xa0Delete"),o.a.createElement(ie.a,{to:"/tours/new",alt:"Add New Product",title:"Add New Product",className:"btn btn-sm btn-round btn-info pull-right"},o.a.createElement(me.a,{icon:"plus"}),"\xa0Add New")))),o.a.createElement(_.CardBody,null,o.a.createElement(_.Table,{className:"tablesorter table-striped",responsive:!0},o.a.createElement("thead",{className:"text-primary"},o.a.createElement("tr",null,o.a.createElement("th",null,o.a.createElement(_.Input,{style:{position:"inherit",margin:"0"},type:"checkbox",id:"check-all",onClick:this.handleCheckAll})),o.a.createElement("th",{style:{whiteSpace:"nowrap"},onClick:this.sortName},"Tour"," ","name"===this.state.sortBy&&"desc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-info"})," ","name"===this.state.sortBy&&"asc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-up",className:"text-info"})," ","name"!==this.state.sortBy&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-disabled"})," "),o.a.createElement("th",{style:{whiteSpace:"nowrap"},onClick:this.sortCreated},"Added"," ","created"===this.state.sortBy&&"desc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-info"})," ","created"===this.state.sortBy&&"asc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-up",className:"text-info"})," ","created"!==this.state.sortBy&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-disabled"})," "),o.a.createElement("th",{style:{whiteSpace:"nowrap"},className:"text-right",onClick:this.sortPrice},o.a.createElement("span",{style:{display:"block"}},"Price"," ","price"===this.state.sortBy&&"desc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-info"})," ","price"===this.state.sortBy&&"asc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-up",className:"text-info"})," ","price"!==this.state.sortBy&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-disabled"})," ")),o.a.createElement("th",null,"\xa0"),o.a.createElement("th",{style:{whiteSpace:"nowrap"}},"Publish"))),o.a.createElement("tbody",null,this.renderRows(this.state.tours)))),o.a.createElement(_.CardFooter,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Row,{className:"pull-right"},o.a.createElement(_.Col,{md:"4",lg:"4"},this.state.pagination&&this.state.pagination.total>0&&o.a.createElement(_.Input,{style:{marginBottom:"5px"},id:"perPage",name:"perPage",type:"select",onChange:this.handleChangePerPage,value:this.state.size},o.a.createElement("option",{value:"10"},"10 / page"),o.a.createElement("option",{value:"25"},"25 / page"),o.a.createElement("option",{value:"50"},"50 / page"),o.a.createElement("option",{value:"100"},"100 / page"))),o.a.createElement(_.Col,{md:"8",lg:"8"},this.state.pagination&&this.state.pagination.total>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Qe.a,{innerClass:"pagination",activePage:this.state.activePage,itemsCountPerPage:this.state.pagination.limit,totalItemsCount:this.state.pagination.total,pageRangeDisplayed:3,onChange:this.handlePageChange}),o.a.createElement("p",null,"Page ",o.a.createElement("em",null,this.state.activePage)," of ",o.a.createElement("em",null,Math.ceil(this.state.pagination.total/this.state.pagination.limit))," of ",o.a.createElement("em",null,this.state.pagination.total)," tours."))))))))))),o.a.createElement(z.a,{active:this.state.isProcessing,spinner:!0,text:"Processing..."}))}}]),t}(o.a.Component),gt=function(e){return Et(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},ft=function(e,t){if(e._id===t._id)return t},Et=function(e,t){if(void 0===t&&(t=2),0!==e&&(!e||isNaN(e)))throw new Error("price is not a number"+e);return parseFloat(Math.round(100*e)/100).toFixed(t)},yt=Object(E.b)(function(){return{}},{getProductsByPageId:Se,getProductsGroceryByPageId:Ce,getProductsByProviderId:we,getProviderPlaces:F,getProductCategoriesAll:G,getProductCategoriesAllV2:L,updateProduct:De,deleteProduct:Oe})(ht),vt=a(26),bt=a.n(vt),At=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChangeKeyword=function(e){var t=e.target.value;a.setState({keyword:t})},a.handleEnter=function(e){if("Enter"===e.key){a.setState({isLoading:!0,activePage:1});var t=a.state.keyword,n=a.props.location.search,r=je.a.parse(n);delete r.page,delete r.message,""!==t?r.keyword=t:delete r.keyword;var o="?"+je.a.stringify(r);a.refreshTourDates(o)}},a.handleChangeTourDate=function(e){var t=e.target,n=t.name,r=t.value;a.setState({tourDate:Object(A.a)({},a.state.tourDate,Object(T.a)({},n,r))})},a.handleChangeStartDate=function(e){a.setState({dateStart:e}),a.setState({tourDate:Object(A.a)({},a.state.tourDate,{dateStart:e})})},a.handleChangeEndDate=function(e){a.setState({dateEnd:e}),a.setState({tourDate:Object(A.a)({},a.state.tourDate,{dateEnd:e})})},a.handleDelete=function(e){if(!window.confirm("Do you want to delete this item?"))return!1;var t=a.props.location.search,n=je.a.parse(t);n.message&&delete n.message;var r="?"+je.a.stringify(n),o=e.currentTarget.dataset.item;if(o){var l=JSON.parse(N("userData"));if(l){var s=l.sessionToken;D(s).delete("/provider/tour-dates/".concat(o)).then(function(e){e&&e.data&&e.data&&"deleted"===e.data.status&&(a.showNotification("Item has been deleted successfully!"),a.refreshTourDates(r))}).catch(function(e){e&&(e.response&&e.response.status&&403===e.response.status?(setTimeout(function(){a.setState({isLoading:!0});var e=a.props.location.search,t=je.a.parse(e);delete t.message,delete t.page;var n="?"+je.a.stringify(t);a.setState({activePage:1}),a.refreshTourDates(n)},1e3),a.showNotificationError("You are not allowed to delete this tour date.")):a.showNotificationError(e.response))})}else a.props.history.push("/login"),window.location.reload()}},a.handleChangeTour=function(e){a.setState({isLoading:!0});var t=e.target.value,n=a.props.location.search,r=je.a.parse(n);r.message&&delete r.message,""!==t?r.tour=t:delete r.tour;var o="?"+je.a.stringify(r);a.setState({tour:t,activePage:1}),a.refreshTourDates(o)},a.handlePageChange=function(e){a.setState({isLoading:!0});var t=a.props.location.search,n=je.a.parse(t);delete n.message,n.page=e;var r="?"+je.a.stringify(n);a.setState({activePage:e}),a.refreshTourDates(r)},a.handleChangePerPage=function(e){a.setState({isLoading:!0});var t=e.target.value,n=a.props.location.search,r=je.a.parse(n);delete r.message,""!==t?r.size=t:delete r.size;var o="?"+je.a.stringify(r);a.setState({size:t}),a.refreshTourDates(o)},a.sortPrice=function(){var e="";e="price"===a.state.sortBy?"desc"!==a.state.sort?"desc":"asc":"desc";var t=a.props.location.search,n=je.a.parse(t);delete n.message,n.sort=e,n.sortBy="price";var r="?"+je.a.stringify(n);a.setState({sort:e}),a.setState({sortBy:"price"}),a.refreshTourDates(r)},a.toggleAddTourDateModal=function(){a.setState(function(e){return{addTourDateModalOpen:!e.addTourDateModalOpen,tourDate:{type:"",status:"",place:"",placeName:"",price:"",promotionalText:"",isActive:!1,dateStart:new Date,dateEnd:new Date},dateStart:new Date,dateEnd:new Date}})},a.handleAddTourDate=function(e){e.preventDefault(),a.setState({addingTourDate:!0,submittedTourDate:!0});var t=a.state.tourDate;if(delete t.placeName,t&&t.dateStart&&t.dateEnd&&t.price&&t.place){var n=JSON.parse(N("userData")).sessionToken;if(!window.confirm("Do you want to save this item?"))return!1;a.setState({submitted:!0,isSaving:!0}),D(n).post("/provider/tour-dates",t).then(function(e){if(e&&e.data){var t=a.props.location.search,n=je.a.parse(t),r=n.page?Number(n.page):1,o=n.tour?n.tour:"",l=n.sortBy?n.sortBy:"created",s=n.sort?n.sort:"desc",i=n.keyword,c="?"+je.a.stringify(n);n.message&&delete n.message,a.setState({activePage:r,tour:o,sort:s,sortBy:l,keyword:i}),a.refreshTourDates(c),a.setState({addingTourDate:!1,submittedAddon:!1}),a.toggleAddTourDateModal(),a.showNotification("Tour date has been added!")}}).catch(function(e){a.setState({addingTourDate:!1,submittedAddon:!1}),e.response&&"string"===typeof e.response?a.showNotificationError(e.response):a.showNotificationError("There is a error saving the tour date!")})}else a.setState({addingTourDate:!1}),a.showNotificationError("Some fields are required!")},a.handleEditTourDate=function(e){e.preventDefault();var t=a.state,n=t.tourDateId,r=t.tourDate;if(delete r.placeName,r&&r.dateStart&&r.dateEnd&&r.price&&r.place){var o=JSON.parse(N("userData")).sessionToken;if(!window.confirm("Do you want to save the changes to this item?"))return!1;a.setState({editingTourDate:!0,submittedTourDateEdit:!0}),D(o).patch("/provider/tour-dates/".concat(n),r).then(function(e){if(e&&e.data){var t=a.props.location.search,n=je.a.parse(t),r=n.page?Number(n.page):1,o=n.tour?n.tour:"",l=n.sortBy?n.sortBy:"created",s=n.sort?n.sort:"desc",i=n.keyword,c="?"+je.a.stringify(n);n.message&&delete n.message,a.setState(function(e){return{editTourDateModalOpen:!e.editTourDateModalOpen,submittedTourDateEdit:!1,editingTourDate:!1,activePage:r,tour:o,sort:s,sortBy:l,keyword:i}}),a.refreshTourDates(c),a.showNotification("Tour date has been added!")}}).catch(function(e){a.setState({editingTourDate:!1,submittedTourDateEdit:!1}),e.response&&"string"===typeof e.response?a.showNotificationError(e.response):a.showNotificationError("There is a error saving the tour date!")})}else a.setState({editingTourDate:!1}),a.showNotificationError("Some fields are required!")},a.editTourDate=function(e){var t=JSON.parse(N("userData")),n=e.currentTarget.dataset.id;if(null!==t){var r=t.sessionToken;D(r).get("/provider/tour-dates/".concat(n)).then(function(e){if(e&&e.data){var t=e.data.tourDate;t&&a.setState(function(e){return{submittedHighlightEdit:!1,editTourDateModalOpen:!e.editTourDateModalOpen,tourDateId:t._id,tourDate:{type:t.type?t.type:"",status:t.status?t.status:"",place:t.place._id?t.place._id:"",placeName:t.place.name?t.place.name:"",price:t.price?t.price:"",promotionalText:t.promotionalText?t.promotionalText:"",isActive:!!t.isActive&&t.isActive,dateStart:t.dateStart?new Date(t.dateStart):new Date,dateEnd:t.dateEnd?new Date(t.dateEnd):new Date},dateStart:new Date,dateEnd:new Date}})}}).catch(function(e){console.error({error:e})})}else a.props.history.push("/login"),window.location.reload()},a.toggleEditTourDateModal=function(){if(!0===a.state.editTourDateModalOpen&&!window.confirm("Do you want to discard these changes?"))return!1;a.setState(function(e){return{submittedTourDateEdit:!1,editTourDateModalOpen:!e.editTourDateModalOpen,tourDate:{type:"",status:"",place:"",placeName:"",price:"",promotionalText:"",isActive:!1,dateStart:new Date,dateEnd:new Date},dateStart:new Date,dateEnd:new Date}})},a.state={tourDate:{type:"",status:"",place:"",placeName:"",price:"",promotionalText:"",isActive:!1,dateStart:new Date,dateEnd:new Date},tourDates:[],tour:"",tours:[],tourDateId:"",useCreatedProductCategory:!1,place:{},defaultPage:"",pagination:{},activePage:1,selectedPage:"",sortBy:"",sort:"",keyword:"",size:25,message:"",isLoading:!0,addTourDateModalOpen:!1,submittedTourDate:!1,addingTourDate:!1,editTourDateModalOpen:!1,submittedTourDateEdit:!1,edingTourDate:!1,today:new Date,dateStart:new Date,dateEnd:new Date},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("userData")),a=this.props.location.search,n=je.a.parse(a),r=n.page?Number(n.page):1,o=n.tour?n.tour:"",l=n.sortBy?n.sortBy:"created",s=n.sort?n.sort:"desc",i=n.message?n.message:"",c=n.keyword,d="?"+je.a.stringify(n);if(null!==t){var m=t.sessionToken;this.setState({tourDate:{type:"",status:"",place:"",placeName:"",price:"",promotionalText:"",isActive:!1,dateStart:new Date,dateEnd:new Date},tour:o,activePage:r,sort:s,sortBy:l,keyword:c,message:i}),this.refreshTourDates(d),D(m).get("/provider/tours").then(function(t){if(t&&t.data){var a=t.data.tours;e.setState({tours:a}),e.setState({isLoading:!1})}else e.setState({isLoading:!1})}).catch(function(t){e.setState({isLoading:!1})})}}},{key:"renderRows",value:function(){var e=this;return this.state.isLoading?o.a.createElement("tr",null,o.a.createElement("td",{colSpan:"8"},o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading}))):this.state.tourDates instanceof Array&&this.state.tourDates.length>0?this.state.tourDates.map(function(t,a,n){return o.a.createElement("tr",{key:t._id},o.a.createElement("td",null,Object(_e.default)(new Date(t.dateStart),"MMM dd, yyyy")," - ",Object(_e.default)(new Date(t.dateEnd),"MMM dd, yyyy")),o.a.createElement("td",null,"\u20b1",Nt(t.price)),o.a.createElement("td",null,t.place&&t.place.name),o.a.createElement("td",null,o.a.createElement(Ue.a,{onClick:function(){var r=!t.isActive;e.toggleSwitchIsActive(t),n[a].isActive=r,e.setState({tourDates:n})},on:t.isActive})),o.a.createElement("td",{width:"75",align:"center"},o.a.createElement(ie.a,{to:"#",style:{paddingRight:"10px"},onClick:e.editTourDate,"data-id":t._id},o.a.createElement(me.a,{icon:"edit"})),o.a.createElement(ie.a,{to:"#",className:"text-danger",onClick:e.handleDelete,"data-item":t._id},o.a.createElement(me.a,{icon:"trash-alt"}))))}):o.a.createElement("tr",null,o.a.createElement("td",{colSpan:"5"},o.a.createElement("strong",{className:"text-danger"},o.a.createElement("em",null,"No dates found"))))}},{key:"renderImage",value:function(e){var t=e.name,a=e.photos,n=We.a;return a instanceof Array&&a.length>0&&(n=a[0].thumb),o.a.createElement("img",{className:"thumb",src:n,alt:t,title:t})}},{key:"renderPlaces",value:function(){if(void 0!==this.state.places||null!=this.state.places)return this.state.places.map(function(e,t){return o.a.createElement("option",{key:t,value:e.place._id.toString()},e.place.name)})}},{key:"toggleSwitchIsActive",value:function(e){var t=this,a=JSON.parse(N("userData")).sessionToken,n=e._id,r={isActive:!e.isActive};D(a).patch("/provider/tour-dates/".concat(n,"/update-status"),r).then(function(e){e&&e.data&&t.showNotification("Tour Date updated.")}).catch(function(e){t.setState({submitted:!1,isSaving:!1}),e.response&&"string"===typeof e.response?t.showNotificationError(e.response):t.showNotificationError("There is a error updating the Tour Date!")})}},{key:"showNotification",value:function(e){if(e&&"string"===typeof e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:2};t&&this.refs.notify&&this.refs.notify.notificationAlert&&this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e&&"string"===typeof e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:2};t&&this.refs.notify&&this.refs.notify.notificationAlert&&this.refs.notify.notificationAlert(t)}}},{key:"refreshTourDates",value:function(e){var t=this,a=je.a.parse(e),n=a.message;n&&(delete a.message,this.showNotification(n)),this.props.history.push("/tour-dates"+e);var r=JSON.parse(N("userData")),o=r.sessionToken;null!==r&&r&&r.isSBTours&&D(o).get("/provider/tour-dates",{params:a}).then(function(e){if(e&&e.data){var a=e.data,n=a.tourDates,r=a.pagination;t.setState({tourDates:n,pagination:r}),t.setState({isLoading:!1})}else t.setState({isLoading:!1})}).catch(function(e){console.error({error:e}),t.setState({isLoading:!1})})}},{key:"renderTours",value:function(){if(void 0!==this.state.tours||null!==this.state.tours)return this.state.tours.map(function(e,t){return o.a.createElement("option",{key:t,value:e._id},e.name)})}},{key:"renderAddTourDateModal",value:function(){var e=this;return o.a.createElement(_.Modal,{className:"modal-lg",isOpen:this.state.addTourDateModalOpen,toggle:this.addTourDateModalOpen,backdrop:"static"},o.a.createElement("div",{className:"modal-header"},o.a.createElement(_.Col,{sm:"12"},o.a.createElement("h4",{className:"modal-title"},"Add Tour Date")),o.a.createElement("button",{type:"button",className:"close",onClick:this.toggleAddTourDateModal,"aria-label":"Close",style:{color:"rgba(0, 0, 0, 0.6)"}},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement(_.ModalBody,null,o.a.createElement("form",{action:""},o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"6"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!this.state.tourDate.dateStart?" has-danger":""},o.a.createElement("label",{htmlFor:"dateStart",className:"control-label",style:{display:"block"}},"Start Date:"),o.a.createElement(bt.a,{id:"add-dateStart",name:"startDate",className:"form-control",autoComplete:"off",selectsStart:!0,startDate:this.state.dateStart,endDate:this.state.dateEnd,minDate:this.state.today,selected:this.state.dateStart,onChange:this.handleChangeStartDate}))),o.a.createElement(_.Col,{sm:"6"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!this.state.tourDate.dateEnd?" has-danger":""},o.a.createElement("label",{htmlFor:"add-dateEnd",className:"control-label",style:{display:"block"}},"End Date:"),o.a.createElement(bt.a,{id:"add-dateEnd",name:"startDate",className:"form-control",autoComplete:"off",selectsStart:!0,startDate:this.state.dateStart,endDate:this.state.dateEnd,minDate:this.state.dateStart,selected:this.state.dateEnd,onChange:this.handleChangeEndDate}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedTourDate&&!this.state.tourDate.price?" has-danger":""},o.a.createElement("label",{htmlFor:"add-price",className:"control-label"},"Price ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"add-price",name:"price",placeholder:"\u20b1",type:"text",defaultValue:this.state.tourDate.price,onChange:this.handleChangeTourDate}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedTourDate&&!this.state.tourDate.place?" has-danger":""},o.a.createElement("label",{htmlFor:"add-tour",className:"control-label"},"Tour ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"add-tour",name:"place",placeholder:"Select tour",type:"select",onChange:this.handleChangeTourDate,value:this.state.tourDate.place},o.a.createElement("option",{value:""},"-Select-"),this.renderTours()))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"tour-date-type",className:"control-label"},"Type"),o.a.createElement(_.Input,{id:"add-type",name:"type",type:"select",onChange:this.handleChangeTourDate,value:this.state.tourDate.type},o.a.createElement("option",{value:"solo"},"Solo"),o.a.createElement("option",{value:"joiner"},"Joiner"),o.a.createElement("option",{value:"couple"},"Couple")))),o.a.createElement(_.Col,{sm:"12",md:"6",lg:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Label,null,o.a.createElement(Ue.a,{onClick:function(){e.setState({tourDate:Object(A.a)({},e.state.tourDate,{isActive:!e.state.tourDate.isActive})})},on:this.state.tourDate.isActive}),"Is Active"))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"add-promotionalText",className:"control-label"},"Promotional Text"),o.a.createElement(_.Input,{id:"add-promotionalText",name:"promotionalText",placeholder:"Promotional Text",type:"textarea",defaultValue:this.state.tourDate.promotionalText,onChange:this.handleChangeTourDate}))))))),o.a.createElement(_.ModalFooter,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Button,{color:"info",onClick:this.handleAddTourDate},"Add")," ",this.state.addingTourDate&&o.a.createElement("img",{alt:"loading",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}),o.a.createElement(_.Button,{color:"secondary",onClick:this.toggleAddTourDateModal},"Cancel"))))}},{key:"renderEditTourDateModal",value:function(){var e=this;return o.a.createElement(_.Modal,{className:"modal-lg",isOpen:this.state.editTourDateModalOpen,toggle:this.editTourDateModalOpen,backdrop:"static"},o.a.createElement("div",{className:"modal-header"},o.a.createElement(_.Col,{sm:"12"},o.a.createElement("h4",{className:"modal-title"},"Edit Tour Date - ",o.a.createElement("em",{className:"text-info"},this.state.tourDate.placeName," - ",Object(_e.default)(new Date(this.state.tourDate.dateStart),"MMM dd, yyyy")," to ",Object(_e.default)(new Date(this.state.tourDate.dateEnd),"MMM dd, yyyy")))),o.a.createElement("button",{type:"button",className:"close",onClick:this.toggleEditTourDateModal,"aria-label":"Close",style:{color:"rgba(0, 0, 0, 0.6)"}},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement(_.ModalBody,null,o.a.createElement("form",{action:""},o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"6"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!this.state.tourDate.dateStart?" has-danger":""},o.a.createElement("label",{htmlFor:"dateStart",className:"control-label",style:{display:"block"}},"Start Date:"),o.a.createElement(bt.a,{id:"add-dateStart",name:"startDate",className:"form-control",autoComplete:"off",selectsStart:!0,startDate:this.state.tourDate.dateStart,endDate:this.state.dateEnd,minDate:this.state.today,selected:this.state.tourDate.dateStart,onChange:this.handleChangeStartDate}))),o.a.createElement(_.Col,{sm:"6"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!this.state.tourDate.dateEnd?" has-danger":""},o.a.createElement("label",{htmlFor:"add-dateEnd",className:"control-label",style:{display:"block"}},"End Date:"),o.a.createElement(bt.a,{id:"add-dateEnd",name:"startDate",className:"form-control",autoComplete:"off",selectsStart:!0,startDate:this.state.tourDate.dateStart,endDate:this.state.dateEnd,minDate:this.state.dateStart,selected:this.state.tourDate.dateEnd,onChange:this.handleChangeEndDate}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedTourDate&&!this.state.tourDate.price?" has-danger":""},o.a.createElement("label",{htmlFor:"add-price",className:"control-label"},"Price ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"add-price",name:"price",placeholder:"\u20b1",type:"text",defaultValue:this.state.tourDate.price,onChange:this.handleChangeTourDate}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedTourDate&&!this.state.tourDate.place?" has-danger":""},o.a.createElement("label",{htmlFor:"add-tour",className:"control-label"},"Tour ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"add-tour",name:"place",placeholder:"Select tour",type:"select",onChange:this.handleChangeTourDate,value:this.state.tourDate.place},o.a.createElement("option",{value:""},"-Select-"),this.renderTours()))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"tour-date-type",className:"control-label"},"Type"),o.a.createElement(_.Input,{id:"add-type",name:"type",type:"select",onChange:this.handleChangeTourDate,value:this.state.tourDate.type},o.a.createElement("option",{value:"solo"},"Solo"),o.a.createElement("option",{value:"joiner"},"Joiner"),o.a.createElement("option",{value:"couple"},"Couple")))),o.a.createElement(_.Col,{sm:"12",md:"6",lg:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Label,null,o.a.createElement(Ue.a,{onClick:function(){e.setState({tourDate:Object(A.a)({},e.state.tourDate,{isActive:!e.state.tourDate.isActive})})},on:this.state.tourDate.isActive}),"Is Active"))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"add-promotionalText",className:"control-label"},"Promotional Text"),o.a.createElement(_.Input,{id:"add-promotionalText",name:"promotionalText",placeholder:"Promotional Text",type:"textarea",defaultValue:this.state.tourDate.promotionalText,onChange:this.handleChangeTourDate}))))))),o.a.createElement(_.ModalFooter,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Button,{color:"info",onClick:this.handleEditTourDate},"Save")," ",this.state.editingTourDate&&o.a.createElement("img",{alt:"loading",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}),o.a.createElement(_.Button,{color:"secondary",onClick:this.toggleEditTourDateModal},"Cancel"))))}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement(_.CardTitle,{tag:"h4"},o.a.createElement("strong",null,"Tour Dates")),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"4",sm:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"tour",className:"control-label"},"Tour:"),o.a.createElement(_.Input,{id:"tour",name:"tour",placeholder:"Select tour",type:"select",onChange:this.handleChangeTour,value:this.state.tour},o.a.createElement("option",{value:""},"All"),this.renderTours()))),o.a.createElement(_.Col,{md:"4",sm:"6",className:"pull-right offset-md-4 offset-sm-3"},o.a.createElement(_.Button,{type:"button",onClick:this.toggleAddTourDateModal,className:"pull-right btn btn-round btn-info btn-sm"},o.a.createElement(me.a,{icon:"plus"}),"\xa0Add New")))),o.a.createElement(_.CardBody,null,o.a.createElement(_.Table,{className:"tablesorter table-striped responsive",responsive:!0},o.a.createElement("thead",{className:"text-primary"},o.a.createElement("tr",null,o.a.createElement("th",null,"Date"),o.a.createElement("th",{onClick:this.sortPrice},"Price"," ","price"===this.state.sortBy&&"desc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-info"})," ","price"===this.state.sortBy&&"asc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-up",className:"text-info"})," ","price"!==this.state.sortBy&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-disabled"})," "),o.a.createElement("th",null,"Place"),o.a.createElement("th",null,"Active"),o.a.createElement("th",null,"\xa0"))),o.a.createElement("tbody",null,this.renderRows()))),o.a.createElement(_.CardFooter,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Row,{className:"pull-right"},o.a.createElement(_.Col,{md:"4",lg:"4"},o.a.createElement(_.FormGroup,null,this.state.pagination&&this.state.pagination.total>0&&o.a.createElement(_.Input,{style:{marginBottom:"5px"},id:"perPage",name:"perPage",type:"select",onChange:this.handleChangePerPage,value:this.state.size},o.a.createElement("option",{value:"10"},"10 / page"),o.a.createElement("option",{value:"25"},"25 / page"),o.a.createElement("option",{value:"50"},"50 / page"),o.a.createElement("option",{value:"100"},"100 / page")))),o.a.createElement(_.Col,{md:"8",lg:"8"},this.state.pagination&&this.state.pagination.total>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Qe.a,{innerClass:"pagination",activePage:this.state.activePage,itemsCountPerPage:this.state.pagination.limit,totalItemsCount:this.state.pagination.total,pageRangeDisplayed:3,onChange:this.handlePageChange}),o.a.createElement("p",null,o.a.createElement("strong",null,"Page ",o.a.createElement("em",null,this.state.activePage)," of ",o.a.createElement("em",null,Math.ceil(this.state.pagination.total/this.state.pagination.limit))," of ",o.a.createElement("em",null,this.state.pagination.total)," items."))))))))))),o.a.createElement("div",{className:"portal"},this.renderAddTourDateModal(),this.renderEditTourDateModal())))}}]),t}(o.a.Component),Nt=function(e){return St(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},St=function(e,t){if(void 0===t&&(t=2),0!==e&&(!e||isNaN(e)))throw new Error("price is not a number"+e);return parseFloat(Math.round(100*e)/100).toFixed(t)},Ct=Object(E.b)(function(){return{}},{getProductCategories:R,getProductCategoriesV2:j,getProductCategoriesAll:G,getProductCategoriesAllV2:L,deleteProductCategory:U,getPageById:X})(At),wt=[{value:"times",label:o.a.createElement("strong",null,o.a.createElement(me.a,{icon:"times"})," fa-times")},{value:"trash",label:o.a.createElement("strong",null,o.a.createElement(me.a,{icon:"trash"})," fa-trash")},{value:"file",label:o.a.createElement("strong",null,o.a.createElement(me.a,{icon:"file"})," fa-file")},{value:"file-alt",label:o.a.createElement("strong",null,o.a.createElement(me.a,{icon:"file-alt"})," fa-file-alt")},{value:"map",label:o.a.createElement("strong",null,o.a.createElement(me.a,{icon:"map"})," fa-map")},{value:"cube",label:o.a.createElement("strong",null,o.a.createElement(me.a,{icon:"cube"})," fa-cube")},{value:"question-circle",label:o.a.createElement("strong",null,o.a.createElement(me.a,{icon:"question-circle"})," fa-question-circle")},{value:"times-circle",label:o.a.createElement("strong",null,o.a.createElement(me.a,{icon:"times-circle"})," fa-times-circle")},{value:"exclamation-triangle",label:o.a.createElement("strong",null,o.a.createElement(me.a,{icon:"exclamation-triangle"})," fa-exclamation-triangle")}],Pt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChangeDesc=function(e){a.setState({tour:Object(A.a)({},a.state.tour,{about:e})})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;"checkbox"===t.type&&(r=e.target.checked);a.setState({tour:Object(A.a)({},a.state.tour,Object(T.a)({},n,r))})},a.handleChangeHighlight=function(e){var t=e.target,n=t.name,r=t.value;a.setState({highlight:Object(A.a)({},a.state.highlight,Object(T.a)({},n,r))})},a.handleChangeDateTime=function(e){a.setState({dateStart:e}),a.setState({highlight:Object(A.a)({},a.state.highlight,{dateTime:e})})},a.handleChangeSection=function(e){var t=e.target,n=t.name,r=t.value;a.setState({section:Object(A.a)({},a.state.section,Object(T.a)({},n,r))})},a.handleChangeSectionIcon=function(e){var t=e.value;a.setState({section:Object(A.a)({},a.state.section,{iconName:t})})},a.handleChangeAddon=function(e){var t=e.target,n=t.name,r=t.value;a.setState({addon:Object(A.a)({},a.state.addon,Object(T.a)({},n,r))})},a.handleAddHighlight=function(e){e.preventDefault();var t=1,n=a.state.tour.highlights;n instanceof Array&&n.length>0&&(t=n.length+1),a.setState({submittedHighlight:!0,addingHighlight:!0});var r=a.state.highlight,o=!1;if(r&&r.name&&r.order&&r.day){if(n&&n.length>0){var l=n.find(function(e){return e.name===r.name});"object"===typeof l&&""!==l.name&&(o=!0)}o?(a.setState({submittedHighlight:!1,addingHighlight:!1}),a.showNotificationError("Tour highlight is already on the list!")):(n=[].concat(Object(Ne.a)(n),[r]),a.setState({submittedHighlight:!1,addingHighlight:!1,tour:Object(A.a)({},a.state.tour,{highlights:n}),highlight:{name:"",order:t+1,day:1,image:"",description:"",dateTime:new Date}}),a.setState(function(e){return{addHighlightModalOpen:!e.addHighlightModalOpen}}),a.showNotification("Tour highlight has been added!"))}else a.setState({addingHighlight:!1}),a.showNotificationError("Some fields are required!")},a.handleAddSection=function(e){e.preventDefault();var t=1,n=a.state.tour.sections;n instanceof Array&&n.length>0&&(t=n.length+1),a.setState({submittedSection:!0,addingSection:!0});var r=a.state.section,o=[],l={title:r.title,text:r.text};o=[].concat(Object(Ne.a)(o),[l]),r.data=o;var s=!1;if(r&&r.name&&r.order&&r.iconName&&r.route){if(n&&n.length>0){var i=n.find(function(e){return e.name===r.name});"object"===typeof i&&""!==i.name&&(s=!0)}s?(a.setState({submittedSection:!1,addingSection:!1}),a.showNotificationError("Tour section is already on the list!")):(delete r.title,delete r.text,n=[].concat(Object(Ne.a)(n),[r]),a.setState({submittedSection:!1,addingSection:!1,tour:Object(A.a)({},a.state.tour,{sections:n}),section:{name:"",order:t+1,route:"",iconName:"",iconType:"FontAwesome",title:"",text:""}}),a.toggleAddSectionModal(),a.showNotification("Tour section has been added!"))}else a.setState({addingSection:!1}),a.showNotificationError("Some fields are required!")},a.handleAddAddon=function(e){e.preventDefault();var t=a.state.tour.addons;a.setState({submittedAddon:!0,addingAddon:!0});var n=a.state.addon,r=!1;if(n&&n.title&&n.price){if(t&&t.length>0){var o=t.find(function(e){return e.title===n.title});"object"===typeof o&&""!==o.title&&(r=!0)}r?(a.setState({submittedAddon:!1,addingAddon:!1}),a.showNotificationError("Tour addon is already on the list!")):(t=[].concat(Object(Ne.a)(t),[n]),a.setState({addingAddon:!1,tour:Object(A.a)({},a.state.tour,{addons:t}),addon:{title:"",image:"",price:"0",description:""}}),a.toggleAddAddonModal(),a.showNotification("Tour addon has been added!"))}else a.setState({addingAddon:!1}),a.showNotificationError("Some fields are required!")},a.handleSubmit=function(e){e.preventDefault();var t=JSON.parse(N("userData"));if(t){var n=t.sessionToken,r=Object(A.a)({},a.state.tour);if(!r.name||isNaN(r.price)||isNaN(r.numberOfPax))a.setState({submitted:!0}),a.showNotificationError("Some fields are required. Please fill in the required fields.");else{if(!window.confirm("Do you want to save this tour?"))return!1;a.setState({submitted:!0,isSaving:!0}),a.props.addTour(r,n,function(e,t){t?setTimeout(function(){if(a.setState({submitted:!1,isSaving:!1}),t&&t.place){var e=t.place._id;a.props.history.push("/tours/".concat(e,"/edit?message=A tour has been added!"))}},1e3):e?(setTimeout(function(){a.setState({submitted:!1,isSaving:!1})},1e3),e.response&&"string"===typeof e.response?a.showNotificationError(e.response):a.showNotificationError("There is a error saving the tour!")):(setTimeout(function(){a.setState({submitted:!1,isSaving:!1})},1e3),a.showNotificationError("An unknown error occured. Please try again."))})}}else a.props.history.push("/login"),window.location.reload()},a.onKeyPress=function(e){"Enter"===e.key&&e.preventDefault()},a.toggleAddHighlightModal=function(){if(a.state.addHighlightModalOpen&&!window.confirm("Do you want to discard this highlight?"))return!1;var e=1,t=a.state.tour.highlights;t instanceof Array&&t.length>0&&(e=t.length+1),a.setState(function(t){return{submittedHighlight:!1,addHighlightModalOpen:!t.addHighlightModalOpen,highlight:{name:"",order:e,day:1,image:"",description:"",dateTime:new Date}}})},a.removeHighlight=function(e){if(!window.confirm("Are you sure you sure you want to remove this highlight?"))return!1;var t=Number(e.currentTarget.dataset.id),n=a.state.tour.highlights;if(n instanceof Array&&n.length>0){var r=n.filter(function(e,a){return a!==t});a.setState({tour:Object(A.a)({},a.state.tour,{highlights:r})})}},a.toggleAddSectionModal=function(){var e=1,t=a.state.tour.sections;t instanceof Array&&t.length>0&&(e=t.length+1),a.setState(function(t){return{submittedSection:!1,addSectionModalOpen:!t.addSectionModalOpen,section:{name:"",order:e,route:"",iconName:"",iconType:"FontAwesome",title:"",text:""}}})},a.removeSection=function(e){if(!window.confirm("Are you sure you sure you want to remove this section?"))return!1;var t=Number(e.currentTarget.dataset.id),n=a.state.tour.sections;if(n instanceof Array&&n.length>0){var r=n.filter(function(e,a){return a!==t});a.setState({tour:Object(A.a)({},a.state.tour,{sections:r})})}},a.toggleAddAddonModal=function(){a.setState(function(e){return{submittedAddon:!1,addAddonModalOpen:!e.addAddonModalOpen,section:{title:"",image:"",price:"0",description:""}}})},a.removeAddon=function(e){if(!window.confirm("Are you sure you sure you want to remove this addon?"))return!1;var t=Number(e.currentTarget.dataset.id),n=a.state.tour.addons;if(n instanceof Array&&n.length>0){var r=n.filter(function(e,a){return a!==t});a.setState({tour:Object(A.a)({},a.state.tour,{addons:r})})}},a.state={tour:{name:"",pageType:"5dea2304f6bba08323a3ddce",about:"",numberOfPax:"",numberOfGroups:"",minNumber:"",maxNumber:"",isSuperGuide:!0,highlights:[],sections:[],addons:[]},highlight:{name:"",order:1,day:1,image:"",description:"",dateTime:new Date},section:{name:"",order:1,route:"",iconName:"",iconType:"FontAwesome",title:"",text:""},addon:{name:"",image:"",price:"0",description:""},pageType:"sb-tours",isLoading:!1,submitted:!1,submittedHighlight:!1,submittedSection:!1,submittedAddon:!1,isSaving:!1,addingHighlight:!1,addHighlightModalOpen:!1,addingSection:!1,addSectionModalOpen:!1,addAddonModalOpen:!1,addingAddon:!1,messageOpen:!1,dateStart:new Date,dateNow:new Date},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){null===JSON.parse(N("userData"))&&(this.props.history.push("/login"),window.location.reload())}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",iconName:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",iconName:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"renderProductTypes",value:function(){if(void 0!==this.state.tourTypes||null!==this.state.tourTypes)return this.state.tourTypes.filter(function(e){return e.isActive}).map(function(e,t){return o.a.createElement("option",{key:t,value:e._id},e.name)})}},{key:"renderPlaces",value:function(){if(void 0!==this.state.places||null!==this.state.places)return this.state.places.map(function(e,t){return o.a.createElement("option",{key:t,value:e.place._id},e.place.name)})}},{key:"renderTourHighlights",value:function(){var e=this;return this.state.tour&&this.state.tour.highlights&&this.state.tour.highlights.length>0?o.a.createElement(_.ListGroup,null,this.state.tour.highlights.map(function(t,a){return o.a.createElement(_.ListGroupItem,{key:a},o.a.createElement("span",null,o.a.createElement(_.Label,{className:"header-label text-info-v2"},t.name),o.a.createElement("span",{onClick:e.removeHighlight,className:"pointer text-muted pull-right-v2","data-id":a},o.a.createElement(me.a,{icon:"times"})),o.a.createElement("br",null),t.description))})):o.a.createElement("em",{className:"text-danger"},"Please add a highlight.")}},{key:"renderTourSections",value:function(){var e=this;return this.state.tour&&this.state.tour.sections&&this.state.tour.sections.length>0?o.a.createElement(_.ListGroup,null,this.state.tour.sections.map(function(t,a){return o.a.createElement(_.ListGroupItem,{key:a},o.a.createElement("span",null,o.a.createElement(_.Label,{className:"header-label text-info-v2"},o.a.createElement(me.a,{icon:t.iconName})," ",t.name),o.a.createElement("span",{onClick:e.removeSection,className:"pointer text-muted pull-right-v2","data-id":a},o.a.createElement(me.a,{icon:"times"})),o.a.createElement("br",null),t.description))})):o.a.createElement("em",{className:"text-danger"},"Please add a section.")}},{key:"renderTourAddons",value:function(){var e=this;return this.state.tour&&this.state.tour.addons&&this.state.tour.addons.length>0?o.a.createElement(_.ListGroup,null,this.state.tour.addons.map(function(t,a){return o.a.createElement(_.ListGroupItem,{key:a},o.a.createElement("span",null,o.a.createElement(_.Label,{className:"header-label text-info-v2"},o.a.createElement(me.a,{icon:t.iconName})," ",t.title),o.a.createElement("span",{onClick:e.removeAddon,className:"pointer text-muted pull-right-v2","data-id":a},o.a.createElement(me.a,{icon:"times"})),o.a.createElement("br",null),o.a.createElement(_.Label,{className:"text-navy"},"\u20b1",kt(t.price)),o.a.createElement("br",null),t.description))})):o.a.createElement("em",{className:"text-danger"},"Please add an addon.")}},{key:"renderAddHighlightModal",value:function(){return o.a.createElement(_.Modal,{className:"modal-lg",isOpen:this.state.addHighlightModalOpen,toggle:this.toggleAddHighlightModal,backdrop:"static"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h4",{className:"modal-title"},"Add Tour Highlight"),o.a.createElement("button",{type:"button",className:"close",onClick:this.toggleAddHighlightModal,"aria-label":"Close",style:{color:"rgba(0, 0, 0, 0.6)"}},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement(_.ModalBody,null,o.a.createElement("form",{action:""},o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedHighlight&&!this.state.highlight.name?" has-danger":""},o.a.createElement("label",{htmlFor:"name",className:"control-label"},"Tour Highlight ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"name",name:"name",className:"name",placeholder:"Highlight",type:"text",defaultValue:this.state.highlight.name,onChange:this.handleChangeHighlight}))),o.a.createElement(_.Col,{sm:"12",md:"6",lg:"6"},o.a.createElement(_.FormGroup,{className:this.state.submittedHighlight&&!this.state.highlight.order?" has-danger":""},o.a.createElement("label",{htmlFor:"order",className:"control-label"},"Order ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"order",name:"order",className:"order",placeholder:"Order",type:"number",defaultValue:this.state.highlight.order,onChange:this.handleChangeHighlight}))),o.a.createElement(_.Col,{sm:"12",md:"6",lg:"6"},o.a.createElement(_.FormGroup,{className:this.state.submittedHighlight&&!this.state.highlight.day?" has-danger":""},o.a.createElement("label",{htmlFor:"day",className:"control-label"},"Day ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"day",name:"day",placeholder:"Day",type:"number",defaultValue:this.state.highlight.day,onChange:this.handleChangeHighlight}))),o.a.createElement(_.Col,{sm:"12",md:"6",lg:"6"},o.a.createElement(_.FormGroup,{className:this.state.submittedHighlight&&!this.state.highlight.dateTime?" has-danger":""},o.a.createElement("label",{htmlFor:"dateTime",className:"control-label",style:{display:"block"}},"Date Time:"),o.a.createElement(bt.a,{id:"dateTime",name:"dateTime",className:"form-control",autoComplete:"off",selectsStart:!0,startDate:this.state.dateStart,minDate:this.state.dateNow,selected:this.state.highlight.dateTime,onChange:this.handleChangeDateTime,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,timeCaption:"time",dateFormat:"MMM d, yyyy h:mm aa"}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"description",className:"control-label"},"Description"),o.a.createElement(_.Input,{id:"description",name:"description",placeholder:"Description",type:"textarea",defaultValue:this.state.highlight.description,onChange:this.handleChangeHighlight}))))))),o.a.createElement(_.ModalFooter,null,o.a.createElement(_.Button,{color:"info",onClick:this.handleAddHighlight},"Add")," ",this.state.addingHighlight&&o.a.createElement("img",{alt:"loading",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}),o.a.createElement(_.Button,{color:"secondary",onClick:this.toggleAddHighlightModal},"Cancel")))}},{key:"renderAddSectionModal",value:function(){var e=this;return o.a.createElement(_.Modal,{className:"modal-lg",isOpen:this.state.addSectionModalOpen,toggle:this.toggleAddSectionModal,backdrop:"static"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h4",{className:"modal-title"},"Add Tour Section"),o.a.createElement("button",{type:"button",className:"close",onClick:this.toggleAddSectionModal,"aria-label":"Close",style:{color:"rgba(0, 0, 0, 0.6)"}},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement(_.ModalBody,null,o.a.createElement("form",{action:""},o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedSection&&!this.state.section.name?" has-danger":""},o.a.createElement("label",{htmlFor:"name",className:"control-label"},"Tour Section ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"name",name:"name",placeholder:"Section Name",type:"text",defaultValue:this.state.section.name,onChange:this.handleChangeSection}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedSection&&!this.state.section.order?" has-danger":""},o.a.createElement("label",{htmlFor:"order",className:"control-label"},"Order ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"order",name:"order",placeholder:"Order",type:"number",defaultValue:this.state.section.order,onChange:this.handleChangeSection}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedSection&&!this.state.section.route?" has-danger":""},o.a.createElement("label",{htmlFor:"route",className:"control-label"},"Route ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"route",name:"route",placeholder:"Section Route",type:"text",defaultValue:this.state.section.route,onChange:this.handleChangeSection}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedSection&&!this.state.section.iconName?" has-danger":""},o.a.createElement("label",{htmlFor:"location",className:"control-label"},"Icon ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(Ke.a,{className:"react-select",styles:{fontSize:"13px !important"},options:wt,onChange:this.handleChangeSectionIcon,placeholder:"Select icon",defaultValue:wt.filter(function(t){return t.value===e.state.section.iconName})}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"title",className:"control-label"},"Title"),o.a.createElement(_.Input,{id:"title",name:"title",placeholder:"Section Title",type:"text",defaultValue:this.state.section.title,onChange:this.handleChangeSection}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"text",className:"control-label"},"Text"),o.a.createElement(_.Input,{id:"text",name:"text",placeholder:"Section Text",type:"textarea",defaultValue:this.state.section.text,onChange:this.handleChangeSection}))))))),o.a.createElement(_.ModalFooter,null,o.a.createElement(_.Button,{color:"info",onClick:this.handleAddSection},"Add")," ",this.state.addingHighlight&&o.a.createElement("img",{alt:"loading",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}),o.a.createElement(_.Button,{color:"secondary",onClick:this.toggleAddSectionModal},"Cancel")))}},{key:"renderAddTourAddonModal",value:function(){return o.a.createElement(_.Modal,{className:"modal-lg",isOpen:this.state.addAddonModalOpen,toggle:this.toggleAddAddonModal,backdrop:"static"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h4",{className:"modal-title"},"Add Tour Addon"),o.a.createElement("button",{type:"button",className:"close",onClick:this.toggleAddAddonModal,"aria-label":"Close",style:{color:"rgba(0, 0, 0, 0.6)"}},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement(_.ModalBody,null,o.a.createElement("form",{action:""},o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedAddon&&!this.state.addon.title?" has-danger":""},o.a.createElement("label",{htmlFor:"name",className:"control-label"},"Title ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"title",name:"title",placeholder:"Title",type:"text",defaultValue:this.state.addon.title,onChange:this.handleChangeAddon}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedAddon&&!this.state.addon.price?" has-danger":""},o.a.createElement("label",{htmlFor:"price",className:"control-label"},"Price ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"price",name:"price",placeholder:"\u20b1",type:"text",defaultValue:this.state.addon.price,onChange:this.handleChangeAddon}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"description",className:"control-label"},"Description"),o.a.createElement(_.Input,{id:"description",name:"description",placeholder:"Description",type:"textarea",defaultValue:this.state.addon.description,onChange:this.handleChangeAddon}))))))),o.a.createElement(_.ModalFooter,null,o.a.createElement(_.Button,{color:"info",onClick:this.handleAddAddon},"Add")," ",this.state.addingAddon&&o.a.createElement("img",{alt:"loading",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}),o.a.createElement(_.Button,{color:"secondary",onClick:this.toggleAddAddonModal},"Cancel")))}},{key:"render",value:function(){var e=this.state,t=e.submitted;return"sb-tours"===e.pageType?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.Form,{onSubmit:this.handleSubmit,onKeyPress:this.onKeyPress},o.a.createElement(_.CardHeader,null,o.a.createElement("h3",{className:"title"},"Add New Tour")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,{style:{marginBottom:"20px"}},o.a.createElement(_.Col,{sm:"12",md:"3",lg:"3"},o.a.createElement("legend",null,"General"),o.a.createElement("p",null,"Change general information for this tour.")),o.a.createElement(_.Col,{sm:"12",md:"9",lg:"9"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.FormGroup,{className:t&&!this.state.tour.name?" has-danger":""},o.a.createElement("label",{htmlFor:"name",className:"control-label"},"Tour Name ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"name",name:"name",placeholder:"Tour Name",type:"text",defaultValue:this.state.tour.name,onChange:this.handleChange})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",md:"4"},o.a.createElement(_.FormGroup,{className:t&&!this.state.tour.numberOfPax?" has-danger":""},o.a.createElement("label",{htmlFor:"price",className:"control-label"},"No. of Pax ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"numberOfPax",name:"numberOfPax",placeholder:"No. of Pax",type:"number",defaultValue:this.state.tour.numberOfPax,onChange:this.handleChange}))),o.a.createElement(_.Col,{className:"px-md-1",md:"4"},o.a.createElement(_.FormGroup,{className:t&&!this.state.tour.price?" has-danger":""},o.a.createElement("label",{htmlFor:"price",className:"control-label"},"Price ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"price",name:"price",placeholder:"\u20b1",type:"text",defaultValue:this.state.tour.price,onChange:this.handleChange}))),o.a.createElement(_.Col,{className:"pl-md-1",md:"4"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"compare-price",className:"control-label"},"Compare Price"),o.a.createElement(_.Input,{id:"comparePrice",name:"comparePrice",placeholder:"\u20b1",type:"text",defaultValue:this.state.tour.comparePrice,onChange:this.handleChange})))))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"about"},o.a.createElement("strong",null,"About")),o.a.createElement(_.Input,{style:{height:"200px"},id:"about",name:"about",placeholder:"About",type:"textarea",value:this.state.section.about,onChange:this.handleChangeSection})))))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"3",lg:"3"},o.a.createElement("legend",null,"Tour Settings")),o.a.createElement(_.Col,{sm:"12",md:"9",lg:"9"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",md:"4"},o.a.createElement(_.FormGroup,{className:t&&!this.state.tour.numberOfGroups?" has-danger":""},o.a.createElement("label",{htmlFor:"price",className:"control-label"},"No. of Groups ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"numberOfGroups",name:"numberOfGroups",placeholder:"No. of Groups",type:"number",defaultValue:this.state.tour.numberOfGroups,onChange:this.handleChange}))),o.a.createElement(_.Col,{className:"px-md-1",md:"4"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"minNumber",className:"control-label"},"Min. number"),o.a.createElement(_.Input,{id:"minNumber",name:"minNumber",placeholder:"Min. number",type:"number",defaultValue:this.state.tour.minNumber,onChange:this.handleChange}))),o.a.createElement(_.Col,{className:"pl-md-1",md:"4"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"maxNumber",className:"control-label"},"Max number"),o.a.createElement(_.Input,{id:"maxNumber",name:"maxNumber",placeholder:"Nax number",type:"number",defaultValue:this.state.tour.maxNumber,onChange:this.handleChange})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement("legend",null,"Tour Highlights")),o.a.createElement(_.Col,{sm:"12"},this.renderTourHighlights()),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Button,{color:"primary-v2",className:"btn-sm",type:"button",onClick:this.toggleAddHighlightModal},o.a.createElement(me.a,{icon:"plus"})," Add Highlight")))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement("legend",null,"Tour Sections")),o.a.createElement(_.Col,{sm:"12"},this.renderTourSections()),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Button,{color:"primary-v2",className:"btn-sm",type:"button",onClick:this.toggleAddSectionModal},o.a.createElement(me.a,{icon:"plus"})," Add Section")))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement("legend",null,"Tour Addons")),o.a.createElement(_.Col,{sm:"12"},this.renderTourAddons()),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Button,{color:"primary-v2",className:"btn-sm",type:"button",onClick:this.toggleAddAddonModal},o.a.createElement(me.a,{icon:"plus"})," Add Addon"))))))),o.a.createElement(_.CardFooter,{className:"pull-right"},o.a.createElement(_.Button,{color:"info",type:"submit"},"Save"),o.a.createElement(ie.a,{to:"/tours",className:"btn btn-light"},"Cancel")))))),o.a.createElement("div",null,this.renderAddHighlightModal(),this.renderAddSectionModal(),this.renderAddTourAddonModal()),o.a.createElement(z.a,{active:this.state.isSaving,spinner:!0,text:"Saving..."}))):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",null,"This page is disabled.")),o.a.createElement(_.CardBody,null))))))}}]),t}(o.a.Component),kt=function(e){return Dt(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},Dt=function(e,t){if(void 0===t&&(t=2),0!==e&&(!e||isNaN(e)))throw new Error("price is not a number"+e);return parseFloat(Math.round(100*e)/100).toFixed(t)},Ot=Object(E.b)(function(){return{}},{addTour:function(e,t,a){return function(n,r){var o=e;D(t).post("/provider/tours",o).then(function(e){if(e&&e.data)return a(null,e.data);a(e,null)}).catch(function(e){a(e,null)})}}})(Pt),xt=[{value:"times",label:o.a.createElement("strong",null,o.a.createElement(me.a,{icon:"times"})," fa-times")},{value:"trash",label:o.a.createElement("strong",null,o.a.createElement(me.a,{icon:"trash"})," fa-trash")},{value:"file",label:o.a.createElement("strong",null,o.a.createElement(me.a,{icon:"file"})," fa-file")},{value:"file-alt",label:o.a.createElement("strong",null,o.a.createElement(me.a,{icon:"file-alt"})," fa-file-alt")},{value:"map",label:o.a.createElement("strong",null,o.a.createElement(me.a,{icon:"map"})," fa-map")},{value:"cube",label:o.a.createElement("strong",null,o.a.createElement(me.a,{icon:"cube"})," fa-cube")},{value:"question-circle",label:o.a.createElement("strong",null,o.a.createElement(me.a,{icon:"question-circle"})," fa-question-circle")},{value:"times-circle",label:o.a.createElement("strong",null,o.a.createElement(me.a,{icon:"times-circle"})," fa-times-circle")},{value:"exclamation-triangle",label:o.a.createElement("strong",null,o.a.createElement(me.a,{icon:"exclamation-triangle"})," fa-exclamation-triangle")}],Tt={position:"relative",height:145,display:"flex",justifyContent:"center",alignItems:"center",borderWidth:2,borderColor:"#666",borderStyle:"solid",borderRadius:5},It=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChangeDesc=function(e){a.setState({tour:Object(A.a)({},a.state.tour,{about:e})})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;"checkbox"===t.type&&(r=e.target.checked);a.setState({tour:Object(A.a)({},a.state.tour,Object(T.a)({},n,r))})},a.handleChangeHighlight=function(e){var t=e.target,n=t.name,r=t.value;a.setState({highlight:Object(A.a)({},a.state.highlight,Object(T.a)({},n,r))})},a.handleChangeHighlightEdit=function(e){var t=e.target,n=t.name,r=t.value;a.setState({highlightEdit:Object(A.a)({},a.state.highlightEdit,Object(T.a)({},n,r))})},a.handleChangeDateTime=function(e){a.setState({dateStart:e}),a.setState({highlight:Object(A.a)({},a.state.highlight,{dateTime:e})})},a.handleChangeDateTimeEdit=function(e){a.setState({dateStart:e}),a.setState({highlightEdit:Object(A.a)({},a.state.highlightEdit,{dateTime:e})})},a.handleChangeSection=function(e){var t=e.target,n=t.name,r=t.value;a.setState({section:Object(A.a)({},a.state.section,Object(T.a)({},n,r))})},a.handleChangeSectionIcon=function(e){var t=e.value;a.setState({section:Object(A.a)({},a.state.section,{iconName:t})})},a.handleChangeSectionEdit=function(e){var t=e.target,n=t.name,r=t.value;a.setState({sectionEdit:Object(A.a)({},a.state.sectionEdit,Object(T.a)({},n,r))})},a.handleChangeSectionIconEdit=function(e){var t=e.value;a.setState({sectionEdit:Object(A.a)({},a.state.sectionEdit,{iconName:t})})},a.handleChangeCheckbox=function(e){var t=e.target.name;a.setState(function(e){return{tourDate:Object(A.a)({},a.state.tourDate,Object(T.a)({},t,!e.tourDate.name))}})},a.handleChangeAddon=function(e){var t=e.target,n=t.name,r=t.value;a.setState({addon:Object(A.a)({},a.state.addon,Object(T.a)({},n,r))})},a.handleChangeAddonEdit=function(e){var t=e.target,n=t.name,r=t.value;a.setState({addonEdit:Object(A.a)({},a.state.addonEdit,Object(T.a)({},n,r))})},a.handleAddHighlight=function(e){e.preventDefault();var t=1,n=a.state.tour.highlights;n instanceof Array&&n.length>0&&(t=n.length+1),a.setState({submittedHighlight:!0,addingHighlight:!0});var r=a.state.highlight,o=!1;if(r&&r.name&&r.order&&r.day){if(n&&n.length>0){var l=n.find(function(e){return e.name===r.name});"object"===typeof l&&""!==l.name&&(o=!0)}o?(a.setState({submittedHighlight:!1,addingHighlight:!1}),a.showNotificationError("Tour highlight is already on the list!")):(n=[].concat(Object(Ne.a)(n),[r]),a.setState({submittedHighlight:!1,addingHighlight:!1,tour:Object(A.a)({},a.state.tour,{highlights:n}),highlight:{id:"",name:"",order:t+1,day:1,image:"",description:"",dateTime:new Date}}),a.setState(function(e){return{addHighlightModalOpen:!e.addHighlightModalOpen}}),a.showNotification("Tour highlight has been added!"))}else a.setState({addingHighlight:!1}),a.showNotificationError("Some fields are required!")},a.handleEditHighlight=function(e){e.preventDefault();var t=a.state.tour.highlights;a.setState({submittedHighlightEdit:!0,editingHighlight:!0});var n=a.state.highlightEdit,r=t.filter(function(e,t){return t!==n.index}),o=!1;if(n&&n.name&&n.order&&n.day){if(r&&r.length>0){var l=r.find(function(e){return e.name===n.name});"object"===typeof l&&""!==l.name&&(o=!0)}if(o)a.setState({submittedHighlightEdit:!1,editingHighlight:!1}),a.showNotificationError("Tour highlight name is already on the list!");else{for(var s=0;s<t.length;s++)s===n.index&&(delete n.index,t.splice(s,1,n));a.setState({submittedHighlightEdit:!1,editingHighlight:!1,tour:Object(A.a)({},a.state.tour,{highlights:t}),highlightEdit:{index:"",name:"",order:1,day:1,image:{},description:"",dateTime:new Date}}),a.setState(function(e){return{editHighlightModalOpen:!e.editHighlightModalOpen}}),a.showNotification("Tour highlight has been updated!")}}else a.setState({editingHighlight:!1}),a.showNotificationError("Some fields are required!")},a.handleAddSection=function(e){e.preventDefault();var t=1,n=a.state.tour.sections;n instanceof Array&&n.length>0&&(t=n.length+1),a.setState({submittedSection:!0,addingSection:!0});var r=a.state.section,o=[],l={title:r.title,text:r.text};o=[].concat(Object(Ne.a)(o),[l]),r.data=o;var s=!1;if(r&&r.name&&r.order&&r.iconName&&r.route){if(n&&n.length>0){var i=n.find(function(e){return e.name===r.name});"object"===typeof i&&""!==i.name&&(s=!0)}s?(a.setState({submittedSection:!1,addingSection:!1}),a.showNotificationError("Tour section is already on the list!")):(delete r.title,delete r.text,n=[].concat(Object(Ne.a)(n),[r]),a.setState({submittedSection:!1,addingSection:!1,tour:Object(A.a)({},a.state.tour,{sections:n}),section:{name:"",order:t+1,route:"",iconName:"",iconType:"FontAwesome",map:{},title:"",text:""}}),a.toggleAddSectionModal(),a.showNotification("Tour section has been added!"))}else a.setState({addingSection:!1}),a.showNotificationError("Some fields are required!")},a.handleEditSection=function(e){e.preventDefault();var t=1,n=a.state.tour.sections;n instanceof Array&&n.length>0&&(t=n.length+1),a.setState({submittedSectionEdit:!0,editingSection:!0});var r=a.state.sectionEdit,o=n.filter(function(e,t){return t!==r.index}),l=[],s={title:r.title,text:r.text};l=[].concat(Object(Ne.a)(l),[s]),r.data=l;var i=!1;if(r&&r.name&&r.order&&r.iconName&&r.route){if(o&&o.length>0){var c=o.find(function(e){return e.name===r.name});"object"===typeof c&&""!==c.name&&(i=!0)}if(i)a.setState({submittedSectionEdit:!1,editingSection:!1}),a.showNotificationError("Tour section is already on the list!");else{delete r.title,delete r.text;for(var d=0;d<n.length;d++)d===r.index&&(delete r.index,n.splice(d,1,r));a.setState({submittedSectionEdit:!1,editingSection:!1,tour:Object(A.a)({},a.state.tour,{sections:n}),sectionEdit:{index:"",name:"",order:t+1,route:"",iconName:"",iconType:"FontAwesome",map:{},title:"",text:""}}),a.setState(function(e){return{editSectionModalOpen:!e.editSectionModalOpen}}),a.showNotification("Tour section has been updated!")}}else a.setState({editingSection:!1}),a.showNotificationError("Some fields are required!")},a.handleAddAddon=function(e){e.preventDefault();var t=a.state.tour.addons;a.setState({submittedAddon:!0,addingAddon:!0});var n=a.state.addon,r=!1;if(n&&n.name&&n.price){if(t&&t.length>0){var o=t.find(function(e){return e.name===n.name});"object"===typeof o&&""!==o.name&&(r=!0)}r?(a.setState({submittedAddon:!1,addingAddon:!1}),a.showNotificationError("Tour addon is already on the list!")):(t=[].concat(Object(Ne.a)(t),[n]),a.setState({submittedAddon:!1,addingAddon:!1,tour:Object(A.a)({},a.state.tour,{addons:t}),addon:{name:"",image:{},price:"0",type:"group",description:""}}),a.toggleAddAddonModal(),a.showNotification("Tour addon has been added!"))}else a.setState({addingAddon:!1}),a.showNotificationError("Some fields are required!")},a.handleEditAddon=function(e){e.preventDefault();var t=a.state.tour.addons;a.setState({submittedAddonEdit:!0,editingAddon:!0});var n=a.state.addonEdit,r=t.filter(function(e,t){return t!==n.index}),o=!1;if(n&&n.name&&n.price){if(r&&r.length>0){var l=r.find(function(e){return e.name===n.name});"object"===typeof l&&""!==l.name&&(o=!0)}if(o)a.setState({submittedAddonEdit:!1,editingAddon:!1}),a.showNotificationError("Tour addon is already on the list!");else{for(var s=0;s<t.length;s++)s===n.index&&(delete n.index,t.splice(s,1,n));a.setState({submittedAddonEdit:!1,editingAddon:!1,tour:Object(A.a)({},a.state.tour,{addons:t}),addonEdit:{name:"",image:{},price:"0",type:"group",description:""}}),a.toggleEditAddonModal(),a.showNotification("Tour addon has been added!")}}else a.setState({editingAddon:!1}),a.showNotificationError("Some fields are required!")},a.handleFileUpload=function(e){var t=JSON.parse(N("userData")),n=e.target.files,r=a.state.tour.photos;if(n[0])if(r.length<6){a.setState({isUploading:!0});var o=a.state.tourId,l=t.sessionToken,s=a.state.tour.photos,i=new FormData;i.append("file",n[0]),D(l).post("/provider/tours/".concat(o,"/media"),i).then(function(e){a.setState({isUploading:!1});var t=e.data;t._id&&(s.push(t),a.setState({tour:Object(A.a)({},a.state.tour,{photos:s})}))}).catch(function(e){a.setState({isUploading:!1}),e.response&&"string"===typeof e.response?(console.error(e.response),a.showNotificationError(e.response)):(console.error({error:e}),a.showNotificationError("There is an error uploading the file. Please try again"))})}else a.setState({isUploading:!1}),console.log("No. of files: ",n.length),a.showNotificationError("You are only allowed to upload a maximum of 6 files!")},a.handleFileUploadHighlight=function(e){var t=e.target.files;if(t[0]){a.setState({isUploadingHighlight:!0});var n=JSON.parse(N("userData")),r=a.state.tourId,o=n.sessionToken,l=new FormData;l.append("file",t[0]),D(o).post("/provider/tours/".concat(r,"/upload-content-image"),l).then(function(e){a.setState({isUploadingHighlight:!1});var t=e.data;t&&a.setState({highlight:Object(A.a)({},a.state.highlight,{image:t})})}).catch(function(e){a.setState({isUploadingHighlight:!1}),e.response&&"string"===typeof e.response?(console.error(e.response),a.showNotificationError(e.response)):(console.error({error:e}),a.showNotificationError("There is an error uploading the file. Please try again"))})}},a.handleFileUploadHighlightEdit=function(e){var t=e.target.files;if(t[0]){a.setState({isUploadingHighlight:!0});var n=JSON.parse(N("userData")),r=a.state.tourId,o=n.sessionToken,l=new FormData;l.append("file",t[0]),D(o).post("/provider/tours/".concat(r,"/upload-content-image"),l).then(function(e){a.setState({isUploadingHighlight:!1});var t=e.data;t&&a.setState({highlightEdit:Object(A.a)({},a.state.highlightEdit,{image:t})})}).catch(function(e){a.setState({isUploadingHighlight:!1}),e.response&&"string"===typeof e.response?(console.error(e.response),a.showNotificationError(e.response)):(console.error({error:e}),a.showNotificationError("There is an error uploading the file. Please try again"))})}},a.handleFileUploadSection=function(e){var t=e.target.files;if(t[0]){a.setState({isUploadingSection:!0});var n=JSON.parse(N("userData")),r=a.state.tourId,o=n.sessionToken,l=new FormData;l.append("file",t[0]),D(o).post("/provider/tours/".concat(r,"/upload-content-image"),l).then(function(e){a.setState({isUploadingSection:!1});var t=e.data;t&&a.setState({section:Object(A.a)({},a.state.section,{map:t})})}).catch(function(e){a.setState({isUploadingSection:!1}),e.response&&"string"===typeof e.response?(console.error(e.response),a.showNotificationError(e.response)):(console.error({error:e}),a.showNotificationError("There is an error uploading the file. Please try again"))})}},a.handleFileUploadSectionEdit=function(e){var t=e.target.files;if(t[0]){a.setState({isUploadingSection:!0});var n=JSON.parse(N("userData")),r=a.state.tourId,o=n.sessionToken,l=new FormData;l.append("file",t[0]),D(o).post("/provider/tours/".concat(r,"/upload-content-image"),l).then(function(e){a.setState({isUploadingSection:!1});var t=e.data;t&&a.setState({sectionEdit:Object(A.a)({},a.state.sectionEdit,{map:t})})}).catch(function(e){a.setState({isUploadingSection:!1}),e.response&&"string"===typeof e.response?(console.error(e.response),a.showNotificationError(e.response)):(console.error({error:e}),a.showNotificationError("There is an error uploading the file. Please try again"))})}},a.handleFileUploadAddon=function(e){var t=e.target.files;if(t[0]){a.setState({isUploadingAddon:!0});var n=JSON.parse(N("userData")),r=a.state.tourId,o=n.sessionToken,l=new FormData;l.append("file",t[0]),D(o).post("/provider/tours/".concat(r,"/upload-content-image"),l).then(function(e){a.setState({isUploadingAddon:!1});var t=e.data;t&&a.setState({addon:Object(A.a)({},a.state.addon,{image:t})})}).catch(function(e){a.setState({isUploadingAddon:!1}),e.response&&"string"===typeof e.response?(console.error(e.response),a.showNotificationError(e.response)):(console.error({error:e}),a.showNotificationError("There is an error uploading the file. Please try again"))})}},a.handleFileUploadAddonEdit=function(e){var t=e.target.files;if(t[0]){a.setState({isUploadingAddon:!0});var n=JSON.parse(N("userData")),r=a.state.tourId,o=n.sessionToken,l=new FormData;l.append("file",t[0]),D(o).post("/provider/tours/".concat(r,"/upload-content-image"),l).then(function(e){a.setState({isUploadingAddon:!1});var t=e.data;t&&a.setState({addonEdit:Object(A.a)({},a.state.addonEdit,{image:t})})}).catch(function(e){a.setState({isUploadingAddon:!1}),e.response&&"string"===typeof e.response?(console.error(e.response),a.showNotificationError(e.response)):(console.error({error:e}),a.showNotificationError("There is an error uploading the file. Please try again"))})}},a.removeImage=function(e){var t=JSON.parse(N("userData")),n=a.state.tourId,r=e.currentTarget.dataset.id,o=t.sessionToken;D(o).delete("provider/tours/".concat(n,"/media/").concat(r)).then(function(e){if(e&&"ok"===e.data.deleted){var t=a.state.tour.photos.filter(function(e){return e._id.toString()!==r});a.setState({tour:Object(A.a)({},a.state.tour,{photos:t})}),a.showNotification("Image was successfully removed.")}}).catch(function(e){e.response&&"string"===typeof e.response?(console.error(e.response),a.showNotificationError(e.response)):(console.error({error:e}),a.showNotificationError("There is error removing the image."))})},a.removeImageHighlight=function(e){a.setState({highlight:Object(A.a)({},a.state.highlight,{image:""})}),a.showNotification("Highlight image has been removed!")},a.removeImageHighlightEdit=function(e){a.setState({highlightEdit:Object(A.a)({},a.state.highlightEdit,{image:""})}),a.showNotification("Highlight image has been removed!")},a.removeImageSection=function(e){a.setState({section:Object(A.a)({},a.state.section,{map:{}})}),a.showNotification("Section image has been removed!")},a.removeImageSectionEdit=function(e){a.setState({sectionEdit:Object(A.a)({},a.state.sectionEdit,{map:""})}),a.showNotification("Section image has been removed!")},a.removeImageAddon=function(e){a.setState({addonEdit:Object(A.a)({},a.state.addon,{image:""})}),a.showNotification("Addon image has been removed!")},a.removeImageAddonEdit=function(e){a.setState({addonEdit:Object(A.a)({},a.state.addonEdit,{image:""})}),a.showNotification("Addon image has been removed!")},a.onAlertDismiss=function(e){a.setState(function(e){return{messageOpen:!e.messageOpen}})},a.handleSubmit=function(e){e.preventDefault();var t,n,r=JSON.parse(N("userData")),o="";if(r?(o=r.sessionToken,t=Object(A.a)({},a.state.tour),n=a.state.tourId,delete t.photos):(a.props.history.push("/login"),window.location.reload()),t)if(!t.name||isNaN(t.price)||isNaN(t.numberOfPax))a.setState({submitted:!0}),a.showNotificationError("Some fields are required. Please fill the required fields.");else{if(!window.confirm("Do you want to save this item?"))return!1;a.setState({submitted:!0,isSaving:!0}),D(o).patch("/provider/tours/".concat(n),t).then(function(e){e&&e.data&&(a.setState({submitted:!1,isSaving:!1}),a.props.history.push("/tours?message=Tour changes has been saved!"))}).catch(function(e){a.setState({submitted:!1,isSaving:!1}),e.response&&"string"===typeof e.response?a.showNotificationError(e.response):a.showNotificationError("There is a error saving the tour!")})}else setTimeout(function(){a.setState({submitted:!1,isSaving:!1})},1e3),a.showNotificationError("Product information is missing.")},a.onKeyPress=function(e){"Enter"===e.key&&e.preventDefault()},a.toggleAddHighlightModal=function(){if(a.state.addHighlightModalOpen&&!window.confirm("Do you want to discard this highlight?"))return!1;var e=1,t=a.state.tour.highlights;t instanceof Array&&t.length>0&&(e=t.length+1),a.setState(function(t){return{submittedHighlight:!1,addHighlightModalOpen:!t.addHighlightModalOpen,highlight:{name:"",order:e,day:1,image:"",description:"",dateTime:new Date}}})},a.editHighlight=function(e){var t=Number(e.currentTarget.dataset.id),n=a.state.tour.highlights;if(n instanceof Array&&n.length>0){var r=n.find(function(e,a){return a===t});a.setState(function(e){return{submittedHighlightEdit:!1,editHighlightModalOpen:!e.editHighlightModalOpen,highlightEdit:{index:t,name:r.name?r.name:"",order:r.order?r.order:"",day:r.day?r.day:"",image:r.image?r.image:"",description:r.description?r.description:"",dateTime:r.dateTime?new Date(r.dateTime):new Date}}})}},a.toggleEditHighlightModal=function(){if(!0===a.state.editHighlightModalOpen&&!window.confirm("Do you want to discard these changes?"))return!1;a.setState(function(e){return{submittedHighlightEdit:!1,editHighlightModalOpen:!e.editHighlightModalOpen,highlight:{name:"",order:"",day:"",image:{},description:"",dateTime:new Date}}})},a.removeHighlight=function(e){if(!window.confirm("Do you want to remove this highlight?"))return!1;var t=Number(e.currentTarget.dataset.id),n=a.state.tour.highlights;if(n instanceof Array&&n.length>0){var r=n.filter(function(e,a){return a!==t});a.setState({tour:Object(A.a)({},a.state.tour,{highlights:r})})}},a.toggleAddSectionModal=function(){var e=1,t=a.state.tour.sections;t instanceof Array&&t.length>0&&(e=t.length+1),a.setState(function(t){return{addSectionModalOpen:!t.addSectionModalOpen,section:{name:"",order:e,route:"",iconName:"",iconType:"FontAwesome",map:{},title:"",text:""}}})},a.toggleEditSectionModal=function(){if(!0===a.state.editSectionModalOpen&&!window.confirm("Do you want to discard these changes?"))return!1;a.setState(function(e){return{editSectionModalOpen:!e.editSectionModalOpen,submittedSectionEdit:!1,sectionEdit:{index:"",name:"",order:"",route:"",iconName:"",map:{},title:"",text:""}}})},a.editSection=function(e){var t=1,n=Number(e.currentTarget.dataset.id),r=a.state.tour.sections;if(r instanceof Array&&r.length>0){t=r.length+1;var o=r.find(function(e,t){return t===n}),l=o.data instanceof Array&&o.data.length>0?o.data[0]:null;a.setState(function(e){return{editSectionModalOpen:!e.editSectionModalOpen,submittedSectionEdit:!1,sectionEdit:{index:n,name:o.name?o.name:"",order:o.order?o.order:t,route:o.route?o.route:"",iconName:o.iconName?o.iconName:"",map:o.map?o.map:{},title:l&&l.title?l.title:"",text:l&&l.text?l.text:""}}})}},a.removeSection=function(e){if(!window.confirm("Are you sure you want to remove this section?"))return!1;var t=Number(e.currentTarget.dataset.id),n=a.state.tour.sections;if(n instanceof Array&&n.length>0){var r=n.filter(function(e,a){return a!==t});a.setState({tour:Object(A.a)({},a.state.tour,{sections:r})})}},a.editAddon=function(e){var t=Number(e.currentTarget.dataset.id),n=a.state.tour.addons;if(n instanceof Array&&n.length>0){var r=n.find(function(e,a){return a===t});a.setState(function(e){return{submittedAddonEdit:!1,editAddonModalOpen:!e.editAddonModalOpen,addonEdit:{index:t,name:r.name?r.name:"",image:r.image?r.image:"",price:r.price?r.price:"0",type:r.type?r.type:"group",description:r.description?r.description:""}}})}},a.toggleAddAddonModal=function(){a.setState(function(e){return{addAddonModalOpen:!e.addAddonModalOpen,addon:{name:"",image:{},price:"0",description:""}}})},a.toggleEditAddonModal=function(){a.setState(function(e){return{editAddonModalOpen:!e.editAddonModalOpen,addonEdit:{name:"",image:{},price:"0",description:""}}})},a.removeAddon=function(e){if(!window.confirm("Are you sure you sure you want to remove this addon?"))return!1;var t=Number(e.currentTarget.dataset.id),n=a.state.tour.addons;if(n instanceof Array&&n.length>0){var r=n.filter(function(e,a){return a!==t});a.setState({tour:Object(A.a)({},a.state.tour,{addons:r})})}};var n=e.match.params._id;return a.state={tourId:n,tour:{name:"",about:"",photos:[],numberOfPax:"",numberOfGroups:"",minNumber:"",maxNumber:"",highlights:[],sections:[],addons:[]},highlight:{name:"",order:1,day:1,image:{},description:"",dateTime:new Date},highlightEdit:{index:"",name:"",order:1,day:1,image:{},description:"",dateTime:new Date},section:{name:"",order:1,route:"",iconName:"",iconType:"FontAwesome",map:{},title:"",text:""},sectionEdit:{index:"",name:"",order:1,route:"",iconName:"",iconType:"FontAwesome",map:{},title:"",text:""},addon:{name:"",image:{},price:"0",type:"group",description:""},addonEdit:{name:"",image:{},price:"0",type:"group",description:""},pageType:"sb-tours",isLoading:!1,submitted:!1,isSaving:!1,addHighlightModalOpen:!1,submittedHighlight:!1,addingHighlight:!1,editHighlightModalOpen:!1,submittedHighlightEdit:!1,editingHighlight:!1,addSectionModalOpen:!1,submittedSection:!1,addingSection:!1,editSectionModalOpen:!1,submittedSectionEdit:!1,editingSection:!1,addAddonModalOpen:!1,submittedAddon:!1,addingAddon:!1,editAddonModalOpen:!1,submittedAddonEdit:!1,editingAddon:!1,messageOpen:!1,isUploading:!1,isUploadingHighlight:!1,isUploadingSection:!1,isUploadingAddon:!1,dateStart:new Date,dateNow:new Date},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("userData")),a=this.props.location.search,n=je.a.parse(a).message;if(n&&this.setState({message:n,messageOpen:!0}),null!==t){var r=t.sessionToken,o=this.state.tourId;D(r).get("/provider/tours/".concat(o)).then(function(t){if(t&&t.data){var a=t.data.page;e.setState({tour:{name:a.name?a.name:"",about:a.about?a.about:"",photos:a.photos?a.photos:[],price:a.tourDetails.price,comparePrice:a.tourDetails.comparePrice,numberOfPax:a.tourDetails.numberOfPax,numberOfGroups:a.tourDetails.numberOfGroups,minNumber:a.tourDetails.minNumber,maxNumber:a.tourDetails.maxNumber,highlights:a.tourDetails.activities?a.tourDetails.activities:[],sections:a.tourDetails.sections?a.tourDetails.sections:[],addons:a.tourDetails.addons?a.tourDetails.addons:[]}}),e.setState({isLoading:!1})}else e.setState({isLoading:!1})}).catch(function(t){e.setState({isLoading:!1})})}else this.props.history.push("/login"),window.location.reload()}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",iconName:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",iconName:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"renderProductTypes",value:function(){if(void 0!==this.state.tourTypes||null!=this.state.tourTypes)return this.state.tourTypes.filter(function(e){return e.isActive}).map(function(e,t){return o.a.createElement("option",{key:t,value:e._id},e.name)})}},{key:"renderTourHighlights",value:function(){var e=this;return this.state.tour&&this.state.tour.highlights&&this.state.tour.highlights.length>0?o.a.createElement(_.ListGroup,null,this.state.tour.highlights.map(function(t,a){return o.a.createElement(_.ListGroupItem,{key:a},o.a.createElement("span",null,o.a.createElement(_.Label,{className:"pointer header-label text-info-v2",onClick:e.editHighlight,"data-id":a},t.name),o.a.createElement("span",{className:"pointer text-muted pull-right-v2",onClick:e.removeHighlight,"data-id":a},o.a.createElement(me.a,{icon:"times"})),o.a.createElement("br",null),o.a.createElement(_.Media,{className:"mt-1"},t.image&&t.image.thumb&&o.a.createElement(_.Media,{left:!0,middle:!0},o.a.createElement(_.Media,{object:!0,"data-src":t.image.thumb,src:t.image.thumb,alt:t.name,title:t.name})),o.a.createElement(_.Media,{body:!0},o.a.createElement(_.Media,null,o.a.createElement("p",null,t.description))))))})):o.a.createElement("em",{className:"text-danger"},"Please add a highlight.")}},{key:"renderTourSections",value:function(){var e=this;return this.state.tour&&this.state.tour.sections&&this.state.tour.sections.length>0?o.a.createElement(_.ListGroup,null,this.state.tour.sections.map(function(t,a){return o.a.createElement(_.ListGroupItem,{key:a},o.a.createElement("span",null,o.a.createElement(_.Label,{className:"pointer header-label text-info-v2",onClick:e.editSection,"data-id":a},o.a.createElement(me.a,{icon:t.iconName})," ",t.name),o.a.createElement("span",{onClick:e.removeSection,className:"text-muted pull-right-v2","data-id":a},o.a.createElement(me.a,{icon:"times"})),o.a.createElement("br",null),t.description))})):o.a.createElement("em",{className:"text-danger"},"Please add a section.")}},{key:"renderTourAddons",value:function(){var e=this;return this.state.tour&&this.state.tour.addons&&this.state.tour.addons.length>0?o.a.createElement(_.ListGroup,null,this.state.tour.addons.map(function(t,a){return o.a.createElement(_.ListGroupItem,{key:a},o.a.createElement("span",null,o.a.createElement(_.Label,{className:"pointer header-label text-info-v2",onClick:e.editAddon,"data-id":a},t.name),o.a.createElement("span",{className:"pointer text-muted pull-right-v2",onClick:e.removeAddon,"data-id":a},o.a.createElement(me.a,{icon:"times"})),o.a.createElement("br",null),o.a.createElement(_.Media,{className:"mt-1"},t.image&&t.image.thumb&&o.a.createElement(_.Media,{left:!0,middle:!0},o.a.createElement(_.Media,{object:!0,"data-src":t.image.thumb,src:t.image.thumb,alt:t.name,title:t.name})),o.a.createElement(_.Media,{body:!0},o.a.createElement(_.Media,null,o.a.createElement(_.Label,{className:"text-navy"},"\u20b1",Ft(t.price))),o.a.createElement(_.Media,null,o.a.createElement("p",null,t.description))))))})):o.a.createElement("em",{className:"text-danger"},"Please add an addon.")}},{key:"renderAddHighlightModal",value:function(){return o.a.createElement(_.Modal,{className:"modal-lg",isOpen:this.state.addHighlightModalOpen,toggle:this.toggleAddHighlightModal,backdrop:"static"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h4",{className:"modal-title"},"Add Tour Highlight"),o.a.createElement("button",{type:"button",className:"close",onClick:this.toggleAddHighlightModal,"aria-label":"Close",style:{color:"rgba(0, 0, 0, 0.6)"}},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement(_.ModalBody,null,o.a.createElement("form",{action:""},o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedHighlight&&!this.state.highlight.name?" has-danger":""},o.a.createElement("label",{htmlFor:"name",className:"control-label"},"Tour Highlight ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"name",name:"name",placeholder:"Highlight",type:"text",defaultValue:this.state.highlight.name,onChange:this.handleChangeHighlight}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"image",className:"control-label"},"Image"),o.a.createElement("div",{style:{border:"1px solid #ccc",borderRadius:"3px",padding:"3px"}},o.a.createElement(_.Input,{name:"images",label:"upload file",type:"file",onChange:this.handleFileUploadHighlight,style:{position:"relative",cursor:"pointer"}})),this.state.highlight.image&&this.state.highlight.image.thumb&&o.a.createElement("div",{className:"item-image",style:{border:"0",padding:"10px"}},o.a.createElement("img",{alt:this.state.highlight.name,title:this.state.highlight.name,src:this.state.highlight.image.thumb}),o.a.createElement("button",{type:"button",onClick:this.removeImageHighlight,className:"remove-image-tour"},o.a.createElement("span",{style:{color:"#fefefe"}},"\xd7"))),this.state.isUploadingHighlight&&o.a.createElement("div",{className:"item-image",style:{border:"0",padding:"10px"}},o.a.createElement(Ve.SyncLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isUploadingHighlight})))),o.a.createElement(_.Col,{sm:"12",md:"6",lg:"6"},o.a.createElement(_.FormGroup,{className:this.state.submittedHighlight&&!this.state.highlight.order?" has-danger":""},o.a.createElement("label",{htmlFor:"order",className:"control-label"},"Order ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"order",name:"order",placeholder:"Order",type:"number",defaultValue:this.state.highlight.order,onChange:this.handleChangeHighlight}))),o.a.createElement(_.Col,{sm:"12",md:"6",lg:"6"},o.a.createElement(_.FormGroup,{className:this.state.submittedHighlight&&!this.state.highlight.day?" has-danger":""},o.a.createElement("label",{htmlFor:"day",className:"control-label"},"Day ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"day",name:"day",placeholder:"Day",type:"number",defaultValue:this.state.highlight.day,onChange:this.handleChangeHighlight}))),o.a.createElement(_.Col,{sm:"12",md:"6",lg:"6"},o.a.createElement(_.FormGroup,{className:this.state.submittedHighlight&&!this.state.highlight.dateTime?" has-danger":""},o.a.createElement("label",{htmlFor:"dateTime",className:"control-label",style:{display:"block"}},"Date Time:"),o.a.createElement(bt.a,{id:"dateTime",name:"dateTime",className:"form-control",autoComplete:"off",selectsStart:!0,startDate:this.state.dateStart,minDate:this.state.dateNow,selected:this.state.highlight.dateTime,onChange:this.handleChangeDateTime,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,timeCaption:"time",dateFormat:"MMM d, yyyy h:mm aa"}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"description",className:"control-label"},"Description"),o.a.createElement(_.Input,{id:"description",name:"description",placeholder:"Description",type:"textarea",defaultValue:this.state.highlight.description,onChange:this.handleChangeHighlight}))))))),o.a.createElement(_.ModalFooter,null,o.a.createElement(_.Button,{color:"info",onClick:this.handleAddHighlight},"Add")," ",this.state.addingHighlight&&o.a.createElement("img",{alt:"loading",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}),o.a.createElement(_.Button,{color:"secondary",onClick:this.toggleAddHighlightModal},"Cancel")))}},{key:"renderEditHighlightModal",value:function(){return o.a.createElement(_.Modal,{className:"modal-lg",isOpen:this.state.editHighlightModalOpen,toggle:this.toggleEditHighlightModal,backdrop:"static"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h4",{className:"modal-title"},"Edit Tour Highlight - ",o.a.createElement("em",{className:"text-info"},this.state.highlightEdit.name)),o.a.createElement("button",{type:"button",className:"close",onClick:this.toggleEditHighlightModal,"aria-label":"Close",style:{color:"rgba(0, 0, 0, 0.6)"}},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement(_.ModalBody,null,o.a.createElement("form",{action:""},o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedHighlightEdit&&!this.state.highlightEdit.name?" has-danger":""},o.a.createElement("label",{htmlFor:"name",className:"control-label"},"Tour Highlight ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"name",name:"name",placeholder:"Highlight",type:"text",defaultValue:this.state.highlightEdit.name,onChange:this.handleChangeHighlightEdit}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"image",className:"control-label"},"Image"),o.a.createElement("div",{style:{border:"1px solid #ccc",borderRadius:"3px",padding:"3px"}},o.a.createElement(_.Input,{name:"images",label:"upload file",type:"file",onChange:this.handleFileUploadHighlightEdit,style:{position:"relative",cursor:"pointer"}})),this.state.highlightEdit.image&&this.state.highlightEdit.image.thumb&&o.a.createElement("div",{className:"item-image",style:{border:"0",padding:"10px"}},o.a.createElement("img",{alt:this.state.highlightEdit.name,title:this.state.highlightEdit.name,src:this.state.highlightEdit.image.thumb}),o.a.createElement("button",{type:"button",onClick:this.removeImageHighlightEdit,className:"remove-image-tour"},o.a.createElement("span",{style:{color:"#fefefe"}},"\xd7"))),this.state.isUploadingHighlight&&o.a.createElement("div",{className:"item-image",style:{border:"0",padding:"10px"}},o.a.createElement(Ve.SyncLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isUploadingHighlight})))),o.a.createElement(_.Col,{sm:"12",md:"6",lg:"6"},o.a.createElement(_.FormGroup,{className:this.state.submittedHighlightEdit&&!this.state.highlightEdit.order?" has-danger":""},o.a.createElement("label",{htmlFor:"order",className:"control-label"},"Order ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"order",name:"order",placeholder:"Order",type:"number",defaultValue:this.state.highlightEdit.order,onChange:this.handleChangeHighlightEdit}))),o.a.createElement(_.Col,{sm:"12",md:"6",lg:"6"},o.a.createElement(_.FormGroup,{className:this.state.submittedHighlightEdit&&!this.state.highlightEdit.day?" has-danger":""},o.a.createElement("label",{htmlFor:"day",className:"control-label"},"Day ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"day",name:"day",placeholder:"Day",type:"number",defaultValue:this.state.highlightEdit.day,onChange:this.handleChangeHighlightEdit}))),o.a.createElement(_.Col,{sm:"12",md:"6",lg:"6"},o.a.createElement(_.FormGroup,{className:this.state.highlightEdit&&!this.state.highlightEdit.dateTime?" has-danger":""},o.a.createElement("label",{htmlFor:"dateTime",className:"control-label",style:{display:"block"}},"Date Time:"),o.a.createElement(bt.a,{id:"dateTime",name:"dateTime",className:"form-control",autoComplete:"off",selectsStart:!0,startDate:this.state.dateStart,minDate:this.state.dateNow,selected:this.state.highlightEdit.dateTime,onChange:this.handleChangeDateTimeEdit,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,timeCaption:"time",dateFormat:"MMM d, yyyy h:mm aa"}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"description",className:"control-label"},"Description"),o.a.createElement(_.Input,{id:"description",name:"description",placeholder:"Description",type:"textarea",defaultValue:this.state.highlightEdit.description,onChange:this.handleChangeHighlightEdit}))))))),o.a.createElement(_.ModalFooter,null,o.a.createElement(_.Button,{color:"info",onClick:this.handleEditHighlight},"Save")," ",this.state.editingHighlight&&o.a.createElement("img",{alt:"loading",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}),o.a.createElement(_.Button,{color:"secondary",onClick:this.toggleEditHighlightModal},"Cancel")))}},{key:"renderAddSectionModal",value:function(){var e=this;return o.a.createElement(_.Modal,{className:"modal-lg",isOpen:this.state.addSectionModalOpen,toggle:this.toggleAddSectionModal,backdrop:"static"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h4",{className:"modal-title"},"Add Tour Section"),o.a.createElement("button",{type:"button",className:"close",onClick:this.toggleAddSectionModal,"aria-label":"Close",style:{color:"rgba(0, 0, 0, 0.6)"}},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement(_.ModalBody,null,o.a.createElement("form",{action:""},o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedSection&&!this.state.section.name?" has-danger":""},o.a.createElement("label",{htmlFor:"name",className:"control-label"},"Tour Section ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"name",name:"name",placeholder:"Section Name",type:"text",defaultValue:this.state.section.name,onChange:this.handleChangeSection}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedSection&&!this.state.section.order?" has-danger":""},o.a.createElement("label",{htmlFor:"price",className:"control-label"},"Order ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"order",name:"order",placeholder:"Order",type:"number",defaultValue:this.state.section.order,onChange:this.handleChangeSection}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedSection&&!this.state.section.route?" has-danger":""},o.a.createElement("label",{htmlFor:"route",className:"control-label"},"Route ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"route",name:"route",placeholder:"Section Route",type:"text",defaultValue:this.state.section.route,onChange:this.handleChangeSection}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedSection&&!this.state.section.iconName?" has-danger":""},o.a.createElement("label",{htmlFor:"location",className:"control-label"},"Icon ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(Ke.a,{className:"react-select",styles:{fontSize:"13px !important"},options:xt,onChange:this.handleChangeSectionIcon,placeholder:"Select icon",defaultValue:xt.filter(function(t){return t.value===e.state.section.iconName})}))),o.a.createElement(_.Col,{className:"pr-md-1",sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"image",className:"control-label"},"Image"),o.a.createElement("div",{style:{border:"1px solid #ccc",borderRadius:"3px",padding:"3px"}},o.a.createElement(_.Input,{name:"images",label:"upload file",type:"file",onChange:this.handleFileUploadSection,style:{position:"relative",cursor:"pointer"}})),this.state.section.map&&this.state.section.map.thumb&&o.a.createElement("div",{className:"item-image",style:{border:"0",padding:"10px"}},o.a.createElement("img",{alt:this.state.section.name,title:this.state.section.name,src:this.state.section.map.thumb}),o.a.createElement("button",{type:"button",onClick:this.removeImageSection,className:"remove-image-tour"},o.a.createElement("span",{style:{color:"#fefefe"}},"\xd7"))),this.state.isUploadingSection&&o.a.createElement("div",{className:"item-image",style:{border:"0",padding:"10px"}},o.a.createElement(Ve.SyncLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isUploadingSection})))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"title",className:"control-label"},"Title"),o.a.createElement(_.Input,{id:"title",name:"title",placeholder:"Section Title",type:"text",defaultValue:this.state.section.title,onChange:this.handleChangeSection}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"text",className:"control-label"},"Text"),o.a.createElement(_.Input,{id:"text",name:"text",placeholder:"Section Text",type:"textarea",defaultValue:this.state.section.text,onChange:this.handleChangeSection}))))))),o.a.createElement(_.ModalFooter,null,o.a.createElement(_.Button,{color:"info",onClick:this.handleAddSection},"Add")," ",this.state.addingSection&&o.a.createElement("img",{alt:"loading",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}),o.a.createElement(_.Button,{color:"secondary",onClick:this.toggleAddSectionModal},"Cancel")))}},{key:"renderEditSectionModal",value:function(){var e=this;return o.a.createElement(_.Modal,{className:"modal-lg",isOpen:this.state.editSectionModalOpen,toggle:this.toggleEditSectionModal,backdrop:"static"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h4",{className:"modal-title"},"Edit Tour Section - ",o.a.createElement("em",null,this.state.sectionEdit.name)),o.a.createElement("button",{type:"button",className:"close",onClick:this.toggleEditSectionModal,"aria-label":"Close",style:{color:"rgba(0, 0, 0, 0.6)"}},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement(_.ModalBody,null,o.a.createElement("form",{action:""},o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedSectionEdit&&!this.state.sectionEdit.name?" has-danger":""},o.a.createElement("label",{htmlFor:"name",className:"control-label"},"Tour Section ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"name",name:"name",placeholder:"Section Name",type:"text",defaultValue:this.state.sectionEdit.name,onChange:this.handleChangeSectionEdit}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedSection&&!this.state.sectionEdit.order?" has-danger":""},o.a.createElement("label",{htmlFor:"price",className:"control-label"},"Order ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"order",name:"order",placeholder:"Order",type:"number",defaultValue:this.state.sectionEdit.order,onChange:this.handleChangeSectionEdit}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedSectionEdit&&!this.state.sectionEdit.route?" has-danger":""},o.a.createElement("label",{htmlFor:"route",className:"control-label"},"Route ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"route",name:"route",placeholder:"Section Route",type:"text",defaultValue:this.state.sectionEdit.route,onChange:this.handleChangeSectionEdit}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedSectionEdit&&!this.state.sectionEdit.iconName?" has-danger":""},o.a.createElement("label",{htmlFor:"location",className:"control-label"},"Icon ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(Ke.a,{className:"react-select",styles:{fontSize:"13px !important"},options:xt,onChange:this.handleChangeSectionIconEdit,placeholder:"Select icon",defaultValue:xt.filter(function(t){return t.value===e.state.sectionEdit.iconName})}))),o.a.createElement(_.Col,{className:"pr-md-1",sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"image",className:"control-label"},"Image"),o.a.createElement("div",{style:{border:"1px solid #ccc",borderRadius:"3px",padding:"3px"}},o.a.createElement(_.Input,{name:"images",label:"upload file",type:"file",onChange:this.handleFileUploadSectionEdit,style:{position:"relative",cursor:"pointer"}})),this.state.sectionEdit.map&&this.state.sectionEdit.map.thumb&&o.a.createElement("div",{className:"item-image",style:{border:"0",padding:"10px"}},o.a.createElement("img",{alt:this.state.sectionEdit.name,title:this.state.sectionEdit.name,src:this.state.sectionEdit.map.thumb}),o.a.createElement("button",{type:"button",onClick:this.removeImageSectionEdit,className:"remove-image-tour"},o.a.createElement("span",{style:{color:"#fefefe"}},"\xd7"))),this.state.isUploadingSection&&o.a.createElement("div",{className:"item-image",style:{border:"0",padding:"10px"}},o.a.createElement(Ve.SyncLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isUploadingSection})))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"title",className:"control-label"},"Title"),o.a.createElement(_.Input,{id:"title",name:"title",placeholder:"Section Title",type:"text",defaultValue:this.state.sectionEdit.title,onChange:this.handleChangeSectionEdit}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"text",className:"control-label"},"Text"),o.a.createElement(_.Input,{id:"text",name:"text",placeholder:"Section Text",type:"textarea",defaultValue:this.state.sectionEdit.text,onChange:this.handleChangeSectionEdit}))))))),o.a.createElement(_.ModalFooter,null,o.a.createElement(_.Button,{color:"info",onClick:this.handleEditSection},"Save")," ",this.state.editingSection&&o.a.createElement("img",{alt:"loading",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}),o.a.createElement(_.Button,{color:"secondary",onClick:this.toggleEditSectionModal},"Cancel")))}},{key:"renderAddTourAddonModal",value:function(){return o.a.createElement(_.Modal,{isOpen:this.state.addAddonModalOpen,toggle:this.toggleAddAddonModal,backdrop:"static"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h4",{className:"modal-title"},"Add Tour Addon"),o.a.createElement("button",{type:"button",className:"close",onClick:this.toggleAddAddonModal,"aria-label":"Close",style:{color:"rgba(0, 0, 0, 0.6)"}},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement(_.ModalBody,null,o.a.createElement("form",{action:""},o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedAddon&&!this.state.addon.name?" has-danger":""},o.a.createElement("label",{htmlFor:"name",className:"control-label"},"Title ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"name",name:"name",placeholder:"Name",type:"text",defaultValue:this.state.addon.name,onChange:this.handleChangeAddon}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"image",className:"control-label"},"Image"),o.a.createElement("div",{style:{border:"1px solid #ccc",borderRadius:"3px",padding:"3px"}},o.a.createElement(_.Input,{name:"images",label:"upload file",type:"file",onChange:this.handleFileUploadAddon,style:{position:"relative",cursor:"pointer"}})),this.state.addon.image&&this.state.addon.image.thumb&&o.a.createElement("div",{className:"item-image",style:{border:"0",padding:"10px"}},o.a.createElement("img",{alt:this.state.addon.name,title:this.state.addon.name,src:this.state.addon.image.thumb}),o.a.createElement("button",{type:"button",onClick:this.removeImageAddon,className:"remove-image-tour"},o.a.createElement("span",{style:{color:"#fefefe"}},"\xd7"))),this.state.isUploadingAddon&&o.a.createElement("div",{className:"item-image",style:{border:"0",padding:"10px"}},o.a.createElement(Ve.SyncLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isUploadingAddon})))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedAddon&&!this.state.addon.price?" has-danger":""},o.a.createElement("label",{htmlFor:"price",className:"control-label"},"Price ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"price",name:"price",placeholder:"\u20b1",type:"text",defaultValue:this.state.addon.price,onChange:this.handleChangeAddon}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"addon-type",className:"control-label"},"Type:"),o.a.createElement(_.Input,{id:"addon-type",name:"type",type:"select",onChange:this.handleChangeAddon,value:this.state.addon.type},o.a.createElement("option",{value:"group"},"Group"),o.a.createElement("option",{value:"person"},"Person")))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"description",className:"control-label"},"Description"),o.a.createElement(_.Input,{id:"description",name:"description",placeholder:"Description",type:"textarea",defaultValue:this.state.addon.description,onChange:this.handleChangeAddon}))))))),o.a.createElement(_.ModalFooter,null,o.a.createElement(_.Button,{color:"info",onClick:this.handleAddAddon},"Add")," ",this.state.addingAddon&&o.a.createElement("img",{alt:"loading",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}),o.a.createElement(_.Button,{color:"secondary",onClick:this.toggleAddAddonModal},"Cancel")))}},{key:"renderEditTourAddonModal",value:function(){return o.a.createElement(_.Modal,{className:"modal-lg",isOpen:this.state.editAddonModalOpen,toggle:this.toggleEditAddonModal,backdrop:"static"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h4",{className:"modal-title"},"Edit Tour Addon - ",o.a.createElement("em",{className:"text-info"},this.state.addonEdit.name)),o.a.createElement("button",{type:"button",className:"close",onClick:this.toggleEditAddonModal,"aria-label":"Close",style:{color:"rgba(0, 0, 0, 0.6)"}},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement(_.ModalBody,null,o.a.createElement("form",{action:""},o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedAddonEdit&&!this.state.addonEdit.name?" has-danger":""},o.a.createElement("label",{htmlFor:"name",className:"control-label"},"Title ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"name",name:"name",placeholder:"Name",type:"text",defaultValue:this.state.addonEdit.name,onChange:this.handleChangeAddonEdit}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"image",className:"control-label"},"Image"),o.a.createElement("div",{style:{border:"1px solid #ccc",borderRadius:"3px",padding:"3px"}},o.a.createElement(_.Input,{name:"images",label:"upload file",type:"file",onChange:this.handleFileUploadAddonEdit,style:{position:"relative",cursor:"pointer"}})),this.state.addonEdit.image&&this.state.addonEdit.image.thumb&&o.a.createElement("div",{className:"item-image",style:{border:"0",padding:"10px"}},o.a.createElement("img",{alt:this.state.addonEdit.name,title:this.state.addonEdit.name,src:this.state.addonEdit.image.thumb}),o.a.createElement("button",{type:"button",onClick:this.removeImageAddonEdit,className:"remove-image-tour"},o.a.createElement("span",{style:{color:"#fefefe"}},"\xd7"))),this.state.isUploadingAddon&&o.a.createElement("div",{className:"item-image",style:{border:"0",padding:"10px"}},o.a.createElement(Ve.SyncLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isUploadingAddon})))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submittedAddonEdit&&!this.state.addonEdit.price?" has-danger":""},o.a.createElement("label",{htmlFor:"price",className:"control-label"},"Price ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"price",name:"price",placeholder:"\u20b1",type:"text",defaultValue:this.state.addonEdit.price,onChange:this.handleChangeAddonEdit}))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"addon-type",className:"control-label"},"Type:"),o.a.createElement(_.Input,{id:"addon-type",name:"type",type:"select",onChange:this.handleChangeAddonEdit,value:this.state.addonEdit.type},o.a.createElement("option",{value:"group"},"Group"),o.a.createElement("option",{value:"person"},"Person")))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"description",className:"control-label"},"Description"),o.a.createElement(_.Input,{id:"description",name:"description",placeholder:"Description",type:"textarea",defaultValue:this.state.addonEdit.description,onChange:this.handleChangeAddonEdit}))))))),o.a.createElement(_.ModalFooter,null,o.a.createElement(_.Button,{color:"info",onClick:this.handleEditAddon},"Save")," ",this.state.editingAddon&&o.a.createElement("img",{alt:"loading",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}),o.a.createElement(_.Button,{color:"secondary",onClick:this.toggleEditAddonModal},"Cancel")))}},{key:"render",value:function(){var e=this;JSON.parse(N("userData"))||(this.props.history.push("/login"),window.location.reload());var t=this.state.submitted;return this.state.isLoading?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Edit Tour")),o.a.createElement(_.CardBody,null,o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading}))))))):this.state.tour?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Alert,{color:"info",isOpen:this.state.messageOpen,toggle:this.onAlertDismiss},this.state.message)),o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.Form,{onSubmit:this.handleSubmit,onKeyPress:this.onKeyPress},o.a.createElement(_.CardHeader,null,o.a.createElement("h3",{className:"title"},"Edit Tour - ",o.a.createElement("em",{className:"text-info"},this.state.tour.name))),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,{style:{marginBottom:"20px"}},o.a.createElement(_.Col,{sm:"12",md:"3",lg:"3"},o.a.createElement("legend",null,"General"),o.a.createElement("p",null,"Change general information for this tour.")),o.a.createElement(_.Col,{sm:"12",md:"9",lg:"9"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.FormGroup,{className:t&&!this.state.tour.name?" has-danger":""},o.a.createElement("label",{htmlFor:"name",className:"control-label"},"Tour Name ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"name",name:"name",placeholder:"Tour Name",type:"text",defaultValue:this.state.tour.name,onChange:this.handleChange})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",md:"4"},o.a.createElement(_.FormGroup,{className:t&&!this.state.tour.numberOfPax?" has-danger":""},o.a.createElement("label",{htmlFor:"price",className:"control-label"},"No. of Pax ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"numberOfPax",name:"numberOfPax",placeholder:"No. of Pax",type:"number",defaultValue:this.state.tour.numberOfPax,onChange:this.handleChange}))),o.a.createElement(_.Col,{className:"px-md-1",md:"4"},o.a.createElement(_.FormGroup,{className:t&&!this.state.tour.price?" has-danger":""},o.a.createElement("label",{htmlFor:"price",className:"control-label"},"Price ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"price",name:"price",placeholder:"\u20b1",type:"text",defaultValue:this.state.tour.price,onChange:this.handleChange}))),o.a.createElement(_.Col,{className:"pl-md-1",md:"4"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"compare-price",className:"control-label"},"Compare Price"),o.a.createElement(_.Input,{id:"comparePrice",name:"comparePrice",placeholder:"\u20b1",type:"text",defaultValue:this.state.tour.comparePrice,onChange:this.handleChange})))))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"6",lg:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"images"},o.a.createElement("strong",null,"Upload Photo")),o.a.createElement("div",{className:"upload-photo",style:{margin:"10px auto",border:"1px solid #ccc",backgroundColor:"#efefef"}},o.a.createElement(_.Input,{name:"images",label:"upload file",type:"file",onChange:this.handleFileUpload,style:Tt}),o.a.createElement("ul",{className:"product-photos"},this.state.tour.photos.length>0&&o.a.createElement(o.a.Fragment,null,this.state.tour.photos.map(function(t){var a=t.original,n=t.thumb,r=t._id;return o.a.createElement("li",{key:r},o.a.createElement("img",{alt:a,title:r,src:n}),o.a.createElement("button",{"data-id":r,type:"button",onClick:e.removeImage,className:"remove-image"},o.a.createElement("span",{style:{color:"#fefefe"}},"\xd7")))})),this.state.isUploading&&o.a.createElement("li",{style:{border:"0",padding:"10px"}},o.a.createElement(Ve.SyncLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isUploading}))))))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"about"},o.a.createElement("strong",null,"About")),o.a.createElement(_.Input,{style:{height:"200px"},id:"about",name:"about",placeholder:"About",type:"textarea",value:this.state.tour.about,onChange:this.handleChange})))))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"3",lg:"3"},o.a.createElement("legend",null,"Tour Settings")),o.a.createElement(_.Col,{sm:"12",md:"9",lg:"9"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",md:"4"},o.a.createElement(_.FormGroup,{className:t&&!this.state.tour.numberOfGroups?" has-danger":""},o.a.createElement("label",{htmlFor:"price",className:"control-label"},"No. of Groups ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"numberOfGroups",name:"numberOfGroups",placeholder:"No. of Groups",type:"number",defaultValue:this.state.tour.numberOfGroups,onChange:this.handleChange}))),o.a.createElement(_.Col,{className:"px-md-1",md:"4"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"minNumber",className:"control-label"},"Min. number"),o.a.createElement(_.Input,{id:"minNumber",name:"minNumber",placeholder:"Min. number",type:"number",defaultValue:this.state.tour.minNumber,onChange:this.handleChange}))),o.a.createElement(_.Col,{className:"pl-md-1",md:"4"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"maxNumber",className:"control-label"},"Max number"),o.a.createElement(_.Input,{id:"maxNumber",name:"maxNumber",placeholder:"Nax number",type:"number",defaultValue:this.state.tour.maxNumber,onChange:this.handleChange})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement("legend",null,"Tour Highlights")),o.a.createElement(_.Col,{sm:"12"},this.renderTourHighlights()),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Button,{color:"primary-v2",className:"btn-sm",type:"button",onClick:this.toggleAddHighlightModal},o.a.createElement(me.a,{icon:"plus"})," Add Highlight")))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement("legend",null,"Tour Sections")),o.a.createElement(_.Col,{sm:"12"},this.renderTourSections()),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Button,{color:"primary-v2",className:"btn-sm",type:"button",onClick:this.toggleAddSectionModal},o.a.createElement(me.a,{icon:"plus"})," Add Section")))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement("legend",null,"Tour Addons")),o.a.createElement(_.Col,{sm:"12"},this.renderTourAddons()),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Button,{color:"primary-v2",className:"btn-sm",type:"button",onClick:this.toggleAddAddonModal},o.a.createElement(me.a,{icon:"plus"})," Add Addon"))))))),o.a.createElement(_.CardFooter,{className:"pull-right"},o.a.createElement(_.Button,{color:"info",type:"submit"},"Save"),o.a.createElement(ie.a,{to:"/tours",className:"btn btn-light"},"Cancel")))))),o.a.createElement("div",null,this.renderAddHighlightModal(),this.renderEditHighlightModal(),this.renderAddSectionModal(),this.renderEditSectionModal(),this.renderAddTourAddonModal(),this.renderEditTourAddonModal()),o.a.createElement(z.a,{active:this.state.isSaving,spinner:!0,text:"Saving..."}))):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Edit Tour")),o.a.createElement(_.CardBody,null,o.a.createElement("h4",{className:"text-danger"},o.a.createElement("strong",null,"Tour not found"))),o.a.createElement(_.CardFooter,null,o.a.createElement(ie.a,{to:"/tours",className:"btn btn-round btn-default"},"Back to Tours")))))))}}]),t}(o.a.Component),Ft=function(e){return Mt(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},Mt=function(e,t){if(void 0===t&&(t=2),0!==e&&(!e||isNaN(e)))throw new Error("price is not a number"+e);return parseFloat(Math.round(100*e)/100).toFixed(t)},Bt=Object(E.b)(function(){return{}},{getProductById:Pe,getProductTypes:xe,getProductCategories:Te,getProductCategoriesV2:Ie,getProviderPlaces:F,updateProduct:De,uploadPhoto:Fe,removePhoto:Me})(It),Gt=function(e){function t(e){var a;Object(i.a)(this,t);var n=JSON.parse(N("userData"));return(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;"checkbox"===t.type&&(r=e.target.checked);a.setState(Object(T.a)({},n,r))},a.handleImport=function(){a.setState({submitted:!0});var e=JSON.parse(N("userData")),t=JSON.parse(N("defaultPage")),n=e.sessionToken,r=a.state;if(r&&r.loginUrl&&r.apiUsername&&r.apiPassword&&r.productsUrl&&r.apiKey){if(!window.confirm("Are you sure you want to continue syncing the products?"))return!1;a.setState({isFetching:!0}),a.props.syncProductsFromAPI(r.productsUrl,r.apiKey,t,n,function(e,t){e?(setTimeout(function(){a.showNotificationError(e.message)},100),a.setState({isFetching:!1,submitted:!1})):t?(setTimeout(function(){a.showNotification("Updating the products. Please wait for few minutes")},100),a.setState({isFetching:!1,submitted:!1})):(setTimeout(function(){a.showNotificationError("There is an error in importing the product. Please try again.")},100),a.setState({isFetching:!1,submitted:!1}))})}else a.showNotificationError("Some fields are required. Please fill the required fields.")},a.state={userExist:!1,loginUrl:"",apiUsername:"",apiPassword:"",productsUrl:"",apiKey:"",payload:"",isLoading:!0,submitted:!1,isFetching:!1,userData:n},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("userData")),a=JSON.parse(N("defaultPage")),n=t.sessionToken;null!=t&&a?this.props.getPageById(a,n,function(t,a){if(a){var n=a.page;e.setState({pageExists:!0,loginUrl:n.privateApiInfo&&n.privateApiInfo.loginUrl?n.privateApiInfo.loginUrl:"",apiUsername:n.privateApiInfo&&n.privateApiInfo.username?n.privateApiInfo.username:"",apiPassword:n.privateApiInfo&&n.privateApiInfo.password?n.privateApiInfo.password:"",productsUrl:n.privateApiInfo&&n.privateApiInfo.productsUrl?n.privateApiInfo.productsUrl:"",apiKey:n.privateApiInfo&&n.privateApiInfo.apiKey?n.privateApiInfo.apiKey:"",isLoading:!1})}else t&&e.setState({isLoading:!1})}):this.setState({isLoading:!1})}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"render",value:function(){return this.state.isLoading?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Import Products from API")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",sm:"4"},o.a.createElement(_.Nav,{vertical:!0},o.a.createElement(ie.a,{className:"nav-link-vertical active-link",to:"/import-products"},"Sync using API ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))),o.a.createElement(ie.a,{className:"nav-link-vertical",to:"/import-products-json"},"Sync using JSON ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))),o.a.createElement(ie.a,{className:"nav-link-vertical",to:"/import-products-excel"},"Import using Excel ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))))),o.a.createElement(_.Col,{className:"pl-md-1",sm:"8"},o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading}))))))))):this.state.pageExists?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Import Products from API URL")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",sm:"4"},o.a.createElement(_.Nav,{vertical:!0},o.a.createElement(ie.a,{className:"nav-link-vertical active-link",to:"/import-products"},"Sync using API ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))),o.a.createElement(ie.a,{className:"nav-link-vertical",to:"/import-products-json"},"Sync using JSON ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))),o.a.createElement(ie.a,{className:"nav-link-vertical",to:"/import-products-excel"},"Import using Excel ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))))),o.a.createElement(_.Col,{className:"pl-md-1",sm:"8"},o.a.createElement(_.Form,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12",sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!this.state.loginUrl?" has-danger":""},o.a.createElement("label",{htmlFor:"loginUrl",className:"control-label"},"URL"),o.a.createElement(_.Input,{id:"loginUrl",name:"loginUrl",placeholder:"Login URL",type:"text",defaultValue:this.state.loginUrl,onChange:this.handleChange,autoComplete:"off"})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",md:"6",sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!this.state.apiUsername?" has-danger":""},o.a.createElement("label",{htmlFor:"apiUsername",className:"control-label"},"Username"),o.a.createElement(_.Input,{id:"apiUsername",name:"apiUsername",placeholder:"API Username",type:"text",value:this.state.apiUsername,onChange:this.handleChange,autoComplete:"off"}))),o.a.createElement(_.Col,{className:"pl-md-1",md:"6",sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!this.state.apiPassword?" has-danger":""},o.a.createElement("label",{htmlFor:"apiPassword",className:"control-label"},"Password"),o.a.createElement(_.Input,{id:"apiPassword",name:"apiPassword",placeholder:"Password",type:"password",value:this.state.apiPassword,onChange:this.handleChange,autoComplete:"off"})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12",sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!this.state.productsUrl?" has-danger":""},o.a.createElement("label",{htmlFor:"productsUrl",className:"control-label"},"Products URL"),o.a.createElement(_.Input,{id:"productsUrl",name:"productsUrl",placeholder:"Products URL",type:"text",defaultValue:this.state.productsUrl,onChange:this.handleChange,autoComplete:"off"})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12",sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!this.state.apiKey?" has-danger":""},o.a.createElement("label",{htmlFor:"apiKey",className:"control-label"},"API Key"),o.a.createElement(_.Input,{id:"apiKey",name:"apiKey",placeholder:"API Key",type:"text",value:this.state.apiKey,onChange:this.handleChange,autoComplete:"off"})))))))),o.a.createElement(_.CardFooter,null,o.a.createElement(_.Button,{className:"btn-fill btn-round",color:"info",type:"button",onClick:this.handleImport},"Sync Products"))))),o.a.createElement(z.a,{active:this.state.isFetching,spinner:!0,text:"Syncing Products..."}))):o.a.createElement("div",{className:"content"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"No Page Added")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",sm:"4"},o.a.createElement(_.Nav,{vertical:!0},o.a.createElement(ie.a,{className:"nav-link-vertical active-link",to:"/import-products"},"Sync using API ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))),o.a.createElement(ie.a,{className:"nav-link-vertical",to:"/import-products-json"},"Sync using JSON ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))),o.a.createElement(ie.a,{className:"nav-link-vertical",to:"/import-products-excel"},"Import using Excel ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))))),o.a.createElement(_.Col,{className:"pl-md-1",sm:"8"},o.a.createElement("p",null,"You have not added a page yet. Please signup as a Provider/Merchant"))))))))}}]),t}(o.a.Component),Lt=Object(E.b)(function(){return{}},{getPageById:X,merchantApiLogin:Be,importProductsFromApi:Ge,syncProductsFromAPI:Le,addProduct:ke})(Gt),Rt=function(e){function t(e){var a;Object(i.a)(this,t);var n=JSON.parse(N("userData"));return(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={userExist:!1,payload:"",invalidJsonText:"",products:[],totalItems:0,isLoading:!0,submitted:!1,isFetching:!1,userData:n},a.validatePayload=a.validatePayload.bind(Object(se.a)(Object(se.a)(a))),a.handleImport=a.handleImport.bind(Object(se.a)(Object(se.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({isLoading:!1})}},{key:"validatePayload",value:function(e){var t=e.target,a=t.name,n=t.value;try{var r=JSON.parse(n);if(r){var o,l=r,s=l.length;this.setState((o={},Object(T.a)(o,a,n),Object(T.a)(o,"products",l),Object(T.a)(o,"totalItems",s),Object(T.a)(o,"invalidJsonText",""),o))}}catch(i){console.log({err:i}),this.setState({invalidJsonText:"Invalid JSON Payload"})}}},{key:"handleImport",value:function(){var e=this;this.setState({submitted:!0});var t=JSON.parse(N("userData")),a=JSON.parse(N("defaultPage")),n=t.sessionToken,r=this.state.products;if(this.state&&this.state.products){if(!window.confirm("Are you sure you want to continue syncing the products?"))return!1;this.setState({isFetching:!0}),this.props.syncProductsFromJSON(r,a,n,function(t,a){t?(setTimeout(function(){e.showNotificationError(t.message)},100),e.setState({isFetching:!1,submitted:!1})):a?(setTimeout(function(){e.showNotification("Product(s) successfully synced.")},100),e.setState({isFetching:!1,submitted:!1})):(setTimeout(function(){e.showNotificationError("There is an error in importing the product. Please try again.")},100),e.setState({isFetching:!1,submitted:!1}))})}else this.showNotificationError("Some fields are required. Please fill the required fields.")}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"render",value:function(){return this.state.isLoading?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Import Products from API")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",sm:"4"},o.a.createElement(_.Nav,{vertical:!0},o.a.createElement(ie.a,{className:"nav-link-vertical active-link",to:"/import-products"},"Sync using API ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))),o.a.createElement(ie.a,{className:"nav-link-vertical",to:"/import-products-json"},"Sync using JSON ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))),o.a.createElement(ie.a,{className:"nav-link-vertical",to:"/import-products-excel"},"Import using Excel ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))))),o.a.createElement(_.Col,{className:"pl-md-1",sm:"8"},o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading}))))))))):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Import Products using JSON Payload")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",sm:"4"},o.a.createElement(_.Nav,{vertical:!0},o.a.createElement(ie.a,{className:"nav-link-vertical",to:"/import-products"},"Sync using API ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))),o.a.createElement(ie.a,{className:"nav-link-vertical active-link",to:"/import-products-json"},"Sync using JSON ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))),o.a.createElement(ie.a,{className:"nav-link-vertical",to:"/import-products-excel"},"Import using Excel ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))))),o.a.createElement(_.Col,{className:"pl-md-1",sm:"8"},o.a.createElement(_.Form,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12",sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!this.state.payload?" has-danger":""},o.a.createElement("label",{htmlFor:"payload",className:"control-label"},"Paste the JSON Payload"),o.a.createElement("p",{className:"text-danger"},this.state.invalidJsonText),o.a.createElement("textarea",{style:{maxHeight:"450px",fontFamily:"Menlo, Monaco, Consolas, monospace"},className:"form-control",id:"payload",rows:"50",name:"payload",defaultValue:this.state.payload,onChange:this.validatePayload,autoComplete:"off"}),o.a.createElement("p",{className:"text-info"},this.state.totalItems," item(s) selected")))))))),o.a.createElement(_.CardFooter,null,o.a.createElement(_.Button,{className:"btn-fill btn-round",color:"info",type:"button",onClick:this.handleImport},"Sync Products"))))),o.a.createElement(z.a,{active:this.state.isFetching,spinner:!0,text:"Syncing Products..."})))}}]),t}(o.a.Component),jt=Object(E.b)(function(){return{}},{getPageById:X,merchantApiLogin:Be,syncProductsFromJSON:function(e,t,a,n){return function(){var r={products:e,placeId:t};D(a).post("/business/sync-products-from-json",r).then(function(e){if(e&&e.data)return n(null,e.data);n(e,null)}).catch(function(e){n(e,null)})}},addProduct:ke})(Rt),Jt=a(63),Ut=a.n(Jt),Ht=function(e){function t(e){var a;Object(i.a)(this,t);var n=JSON.parse(N("userData"));return(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).validatePayload=function(e){var t=e.target,n=t.name,r=t.value;try{var o=JSON.parse(r);if(o){var l,s=o,i=s.length;a.setState((l={},Object(T.a)(l,n,r),Object(T.a)(l,"products",s),Object(T.a)(l,"totalItems",i),Object(T.a)(l,"invalidJsonText",""),l))}}catch(c){a.setState({invalidJsonText:"Invalid JSON Payload"})}},a.handleFileSelect=function(e){var t=e.target.files[0];a.setState({file:t})},a.handleFileUpload=function(e){if(!window.confirm("Do you want to continue uploading the products?"))return!1;a.setState({isUploading:!0});var t=JSON.parse(N("userData")),n=JSON.parse(N("defaultPage")),r="";if(t?r=t.sessionToken:(a.props.history.push("/login"),window.location.reload()),a.state.file){var o=new FileReader;o.onload=function(e){var t=e.target.result,a=Ut.a.read(t,{type:"binary"});a.SheetNames.forEach(function(e){var t=Ut.a.utils.sheet_to_row_object_array(a.Sheets[e]),o=JSON.stringify(t),l=JSON.parse(o),s={products:l};r&&l&&l instanceof Array&&l.length>0&&D(r).post("/provider/places/".concat(n,"/import-products-from-excel"),s).then(function(e){e&&alert("Uploading Products. This may take a while. Please wait for few minutes")}).catch(function(e){alert(e)})})},o.readAsBinaryString(a.state.file),a.setState({isUploading:!1})}else a.setState({isUploading:!1}),a.showNotificationError("No file selected. Please select an excel file.")},a.state={userExist:!1,payload:"",invalidJsonText:"",products:[],file:{},totalItems:0,isLoading:!0,submitted:!1,isUploading:!1,userData:n},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({isLoading:!1})}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"render",value:function(){var e=JSON.parse(N("pageInfo"));return this.state.isLoading?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Import Products from API")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",sm:"4"},o.a.createElement(_.Nav,{vertical:!0},o.a.createElement(ie.a,{className:"nav-link-vertical",to:"/import-products"},"Sync using API ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))),o.a.createElement(ie.a,{className:"nav-link-vertical",to:"/import-products-json"},"Sync using JSON ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))),o.a.createElement(ie.a,{className:"nav-link-vertical active-link",to:"/import-products-excel"},"Import using Excel ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))))),o.a.createElement(_.Col,{className:"pl-md-1",sm:"8"},o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading}))))))))):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Import Products from Excel file")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",sm:"4"},o.a.createElement(_.Nav,{vertical:!0},e&&"5cd141d10d437be772373ddb"===e.pageType&&o.a.createElement(o.a.Fragment,null,o.a.createElement(ie.a,{className:"nav-link-vertical",to:"/import-products"},"Sync using API ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))),o.a.createElement(ie.a,{className:"nav-link-vertical",to:"/import-products-json"},"Sync using JSON ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"})))),o.a.createElement(ie.a,{className:"nav-link-vertical active-link",to:"/import-products-excel"},"Import using Excel ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))))),o.a.createElement(_.Col,{className:"pl-md-1",sm:"8"},o.a.createElement(_.Form,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12",sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!this.state.payload?" has-danger":""},o.a.createElement("label",{htmlFor:"payload",className:"control-label"},"Select Excel file to upload"),o.a.createElement("p",{className:"text-danger"},this.state.invalidJsonText),o.a.createElement("input",{type:"file",id:"fileUploader",name:"fileUploader",onChange:this.handleFileSelect,accept:".xls, .xlsx",style:{opacity:1,position:"relative"}})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12",sm:"12"},o.a.createElement(_.Button,{className:"btn-fill btn-round",color:"info",type:"button",onClick:this.handleFileUpload},"Upload Products")))))))))),o.a.createElement(z.a,{active:this.state.isUploading,spinner:!0,text:"Uploading Products..."})))}}]),t}(o.a.Component),Qt=Object(E.b)(function(){return{}},{getPageById:X,merchantApiLogin:Be,addProduct:ke})(Ht),Vt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this))).handleChangeKeyword=function(e){var t=e.target.value;a.setState({keyword:t})},a.handleEnter=function(e){if("Enter"===e.key){a.setState({isLoading:!0,activePage:1});var t=a.state.keyword,n=JSON.parse(N("defaultPage")),r=a.props.location.search,o=je.a.parse(r);delete o.page,delete o.message,""!==t?o.keyword=t:delete o.keyword;var l="?"+je.a.stringify(o);a.refreshProductCategoryList(l,n)}},a.handleDelete=function(e){if(!window.confirm("Do you want to delete this category?"))return!1;var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n);r.message="Category has been deleted successfully.";var o="?"+je.a.stringify(r),l=e.currentTarget.dataset.item;if(l){var s=JSON.parse(N("userData")).sessionToken;a.props.deleteProductCategory(l,s,function(e,n){!e&&n?"deleted"===n.status?a.refreshProductCategoryList(o,t):a.showNotificationError("There is an error deleting the category"):e&&(console.error({error:e}),e&&e.response&&"string"===typeof e.response?a.showNotificationError(e.response):a.showNotificationError("There is an error deleting the category"))})}},a.handleChangeParent=function(e){a.setState({isLoading:!0});var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n),o=e.target.value;""!==o&&(a.setState({categoryType:"child"}),r.categoryType="child"),r.page=1,delete r.message,""!==o?r.parent=o:delete r.parent;var l="?"+je.a.stringify(r);a.setState({parent:o,activePage:1}),a.refreshProductCategoryList(l,t)},a.handleChangeStatus=function(e){a.setState({isLoading:!0});var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n),o=e.target.value;r.page=1,delete r.message,""!==o?r.status=o:delete r.status;var l="?"+je.a.stringify(r);a.setState({status:o,activePage:1}),a.refreshProductCategoryList(l,t)},a.handleChangeParentChild=function(e){a.setState({isLoading:!0});var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n),o=e.target.value;"parent"===o&&(a.setState({parent:""}),delete r.parent),r.page=1,delete r.message,""!==o?r.categoryType=o:delete r.categoryType;var l="?"+je.a.stringify(r);a.setState({categoryType:o,activePage:1}),a.refreshProductCategoryList(l,t)},a.handlePageChange=function(e){a.setState({isLoading:!0});var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n);delete r.message,r.page=e;var o="?"+je.a.stringify(r);a.setState({activePage:e}),a.refreshProductCategoryList(o,t)},a.handleChangePerPage=function(e){a.setState({isLoading:!0});var t=e.target.value,n=JSON.parse(N("defaultPage")),r=a.props.location.search,o=je.a.parse(r);delete o.message,""!==t?o.size=t:delete o.size;var l="?"+je.a.stringify(o);a.setState({size:t}),a.refreshProductCategoryList(l,n)},a.sortCreated=function(){var e="";e="created"===a.state.sortBy?"desc"!==a.state.sort?"desc":"asc":"desc";var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n);delete r.message,r.sort=e,r.sortBy="created";var o="?"+je.a.stringify(r);a.setState({sort:e}),a.setState({sortBy:"created"}),a.refreshProductCategoryList(o,t)},a.sortUpdated=function(){var e="";e="updated"===a.state.sortBy?"desc"!==a.state.sort?"desc":"asc":"desc";var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n);delete r.message,r.sort=e,r.sortBy="updated";var o="?"+je.a.stringify(r);a.setState({sort:e}),a.setState({sortBy:"updated"}),a.refreshProductCategoryList(o,t)},a.sortName=function(){var e="";e="name"===a.state.sortBy?"desc"!==a.state.sort?"desc":"asc":"desc";var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n);delete r.message,r.sort=e,r.sortBy="name";var o="?"+je.a.stringify(r);a.setState({sort:e}),a.setState({sortBy:"name"}),a.refreshProductCategoryList(o,t)},a.sortSlug=function(){var e="";e="slug"===a.state.sortBy?"desc"!==a.state.sort?"desc":"asc":"desc";var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n);delete r.message,r.sort=e,r.sortBy="slug";var o="?"+je.a.stringify(r);a.setState({sort:e}),a.setState({sortBy:"slug"}),a.refreshProductCategoryList(o,t)},a.sortCode=function(){var e="";e="code"===a.state.sortBy?"desc"!==a.state.sort?"desc":"asc":"desc";var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n);delete r.message,r.sort=e,r.sortBy="code";var o="?"+je.a.stringify(r);a.setState({sort:e}),a.setState({sortBy:"code"}),a.refreshProductCategoryList(o,t)},a.onDismiss=function(){a.setState({hideTutorials:!0});var e=JSON.parse(N("pageInfo"));e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))},a.onHideTutorials=function(){if(!window.confirm("Are you sure you want to hide this section permanently?"))return!1;var e=JSON.parse(N("pageInfo")),t=JSON.parse(N("userData")).sessionToken;D(t).patch("/provider/places/".concat(e._id),{hideTutorials:!0}).then(function(t){t&&t.data&&"ok"===t.data.status?(a.setState({hideTutorials:!0}),e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))):a.showNotificationError("An unknown error occured. Please try again!")}).catch(function(e){a.setState({submitted:!1,isSaving:!1}),e.response&&"string"===typeof e.response?a.showNotificationError(e.response):a.showNotificationError("An unknown error occured. Please try again!")})},a.state={productCategories:[],productCategoriesMain:[],useCreatedProductCategory:!1,place:{},defaultPage:"",pagination:{},activePage:1,selectedPage:"",sortBy:"",sort:"",keyword:"",size:25,message:"",parent:"",status:"",categoryType:"",isLoading:!0,hideTutorials:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.location.search,t=je.a.parse(e),a=t.page?Number(t.page):1,n=t.parent?t.parent:"",r=t.sortBy?t.sortBy:"created",o=t.sort?t.sort:"desc",l=t.message?t.message:"",s=t.keyword,i=t.status,c="?"+je.a.stringify(t),d=JSON.parse(N("pageInfo"));this.setState({activePage:a,parent:n,sort:o,sortBy:r,keyword:s,message:l,status:i,hideTutorials:!(!d||!d.hideTutorials||!0!==d.hideTutorials)}),this.refreshProductCategoryList(c)}},{key:"renderRows",value:function(e){var t=this,a=JSON.parse(N("pageInfo")),n="10";return a&&"5ccfe6aeb99ae3280fd246dc"===a._id&&(n="9"),this.state.isLoading?o.a.createElement("tr",null,o.a.createElement("td",{colSpan:n},o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading}))):e instanceof Array&&e.length>0?a&&a.useCreatedProductCategory?e.map(function(e,n,r){return o.a.createElement("tr",{key:e._id},o.a.createElement("td",{width:"50"},t.renderImage(e)),o.a.createElement("td",null,o.a.createElement(ie.a,{to:"/product-categories/"+e._id+"/edit",style:{paddingRight:"10px"}},e.name)),o.a.createElement("td",{style:{whiteSpace:"nowrap"}},Object(_e.default)(new Date(e.createdAt),"MMM dd, yyyy hh:mm a")),o.a.createElement("td",{style:{whiteSpace:"nowrap"}},Object(_e.default)(new Date(e.updatedAt),"MMM dd, yyyy hh:mm a")),o.a.createElement("td",{width:"150"},e.slug),o.a.createElement("td",null,e.description&&e.description.replace(/(<([^>]+)>)/gi,"")),a&&"5ccfe6aeb99ae3280fd246dc"===a._id&&o.a.createElement("td",null,e.code),o.a.createElement("td",{width:"150"},e.parent&&e.parent.name&&e.parent.name),o.a.createElement("td",null,o.a.createElement(Ue.a,{onClick:function(){var a=!e.isActive;t.toggleSwitchIsActive(e),r[n].isActive=a,t.setState({productCategories:r})},on:!!e.isActive&&e.isActive})),o.a.createElement("td",{width:"75",align:"center"},o.a.createElement(ie.a,{to:"/product-categories/"+e._id+"/edit",style:{paddingRight:"10px"}},o.a.createElement(me.a,{icon:"edit"})),o.a.createElement(ie.a,{to:"#",className:"text-danger",onClick:t.handleDelete,"data-item":e._id},o.a.createElement(me.a,{icon:"trash-alt"}))),o.a.createElement("td",null,"\xa0"))}):e.map(function(e){return o.a.createElement("tr",{key:e._id},o.a.createElement("td",{width:"50"},t.renderImage(e)),o.a.createElement("td",null,e.name),o.a.createElement("td",{style:{whiteSpace:"nowrap"}},Object(_e.default)(new Date(e.createdAt),"MMM dd, yyyy hh:mm a")),o.a.createElement("td",{style:{whiteSpace:"nowrap"}},Object(_e.default)(new Date(e.updatedAt),"MMM dd, yyyy hh:mm a")),o.a.createElement("td",{width:"150"},e.slug),o.a.createElement("td",null,e.description&&e.description.replace(/(<([^>]+)>)/gi,"")),o.a.createElement("td",{width:"150"},e.parent&&e.parent.name&&e.parent.name),o.a.createElement("td",{width:"75",align:"center"},"\xa0"),o.a.createElement("td",null,"\xa0"))}):o.a.createElement("tr",null,o.a.createElement("td",{colSpan:n},o.a.createElement("h5",{className:"text-danger"},o.a.createElement("em",null,"No category found"))))}},{key:"renderImage",value:function(e){var t=e.name,a=e.photos,n=We.a;return a instanceof Array&&a.length>0&&(n=a[0].thumb),o.a.createElement(_.Media,{className:"mt-1"},o.a.createElement(_.Media,{left:!0,middle:!0},o.a.createElement(_.Media,{object:!0,"data-src":n,src:n,alt:t,title:t})))}},{key:"renderPlaces",value:function(){if(void 0!==this.state.places||null!=this.state.places)return this.state.places.map(function(e,t){return o.a.createElement("option",{key:t,value:e.place._id.toString()},e.place.name)})}},{key:"toggleSwitchIsActive",value:function(e){var t=this,a=JSON.parse(N("userData")).sessionToken,n=e._id;e?this.props.updateProductCategory(e,n,a,function(e,a){a?t.showNotification("Category successfully updated."):e?t.showNotificationError(e.response):t.showNotificationError("Category not updated.")}):this.showNotificationError("No category found.")}},{key:"showNotification",value:function(e){if(e&&"string"===typeof e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:2};t&&this.refs.notify&&this.refs.notify.notificationAlert&&this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e&&"string"===typeof e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:2};t&&this.refs.notify&&this.refs.notify.notificationAlert&&this.refs.notify.notificationAlert(t)}}},{key:"refreshProductCategoryList",value:function(e){var t=this,a=je.a.parse(e),n=a.message;n&&(delete a.message,this.showNotification(n)),this.props.history.push("/product-categories"+e);var r=JSON.parse(N("userData")),o=JSON.parse(N("defaultPage")),l=JSON.parse(N("pageInfo")),s=r.sessionToken,i=!1;null!==r&&(o&&l&&l.useCreatedProductCategory?(l.useCreatedProductCategory&&(i=!0),i?(this.props.getProductCategoriesAllV2({},o,s,function(e,a){if(!e&&a){var n=a;if(n instanceof Array&&n.length>0){S("hasCategories",!0);var r=n.filter(function(e){return!e.parent});t.setState({productCategoriesMain:r},function(){this.setState({isLoading:!1})})}else S("hasCategories",!1),t.setState({productCategoriesMain:[]})}}),this.props.getProductCategoriesV2(a,o,s,function(e,a){!e&&a?t.setState({productCategories:a.productCategories,pagination:a.pagination},function(){this.setState({isLoading:!1})}):t.setState({isLoading:!1})})):(this.props.getProductCategoriesAll({},s,function(e,a){if(!e&&a){var n=a;if(n instanceof Array&&n.length>0){var r=n.filter(function(e){return!e.parent});t.setState({productCategoriesMain:r},function(){this.setState({isLoading:!1})})}else t.setState({productCategoriesMain:[]},function(){this.setState({isLoading:!1})})}}),this.props.getProductCategories(a,s,function(e,a){!e&&a?t.setState({productCategories:a.productCategories,pagination:a.pagination},function(){this.setState({isLoading:!1})}):t.setState({isLoading:!1})}))):(this.props.getProductCategoriesAll({},s,function(e,a){if(!e&&a){var n=a;if(n instanceof Array&&n.length>0){var r=n.filter(function(e){return!e.parent});t.setState({productCategoriesMain:r},function(){this.setState({isLoading:!1})})}else t.setState({productCategoriesMain:[]},function(){this.setState({isLoading:!1})})}}),this.props.getProductCategories(a,s,function(e,a){!e&&a?t.setState({productCategories:a.productCategories,pagination:a.pagination},function(){this.setState({isLoading:!1})}):t.setState({isLoading:!1})})))}},{key:"renderProductCategoriesMain",value:function(){if(void 0!==this.state.productCategoriesMain||null!==this.state.productCategoriesMain)return this.state.productCategoriesMain.map(function(e,t){return o.a.createElement("option",{key:t,value:e._id},e.name)})}},{key:"renderPageNotVerified",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"You Have Not Agreed with our Terms & Policies"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You must agree  with our Terms & Policies. Click "," "," ",o.a.createElement(ie.a,{to:"/statement-of-agreement"},"here")," "," "," to read our Terms & Policies.")))))))}},{key:"renderNoPageAdded",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"No Page Added"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You have not added a page yet. Click"," "," ",o.a.createElement(ie.a,{to:"/add-page"},"here")," "," ","to add a new page.")))))))}},{key:"render",value:function(){var e=JSON.parse(N("pageInfo")),t=JSON.parse(N("hasCategories")),a=JSON.parse(N("hasProducts"));return e&&e._id?!0===e.isVerified?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Product Categories - ",o.a.createElement("em",null,e.name)),o.a.createElement(_.Row,null,t&&a&&!0!==e.isActive&&o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"Store Not Activated"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You must activate your store so it will appear in the app and you can start selling.",o.a.createElement("br",null),"Click "," "," ",o.a.createElement(ie.a,{to:"/activate-store"},"here")," "," "," to activate you store."))))),!e.hideTutorials&&o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Alert,{className:"alert-compact",color:"primary",isOpen:!this.state.hideTutorials,toggle:this.onDismiss,fade:!1},o.a.createElement("h4",{className:"alert-heading"},"New on Product Categories?"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"Check our videos here on how to manage your categories.",o.a.createElement("br",null)),o.a.createElement("a",{className:"btn btn-sm btn-primary-v2",href:"https://www.youtube.com/watch?v=k8VEDqbPv7w"},"View Tutorials"),o.a.createElement(_.Button,{className:"btn-fill btn-sm",color:"danger",type:"button",onClick:this.onHideTutorials},"Hide Permanently"))))),o.a.createElement(_.Col,{className:"pr-md-1",md:"3"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"keyword",className:"control-label"},"Search"),o.a.createElement(_.Input,{id:"keyword",name:"keyword",type:"text",placeholder:"Search category...",onChange:this.handleChangeKeyword,onKeyPress:this.handleEnter,value:this.state.keyword||""}))),o.a.createElement(_.Col,{className:"px-md-1",md:"3"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"page",className:"control-label"},"Status"),o.a.createElement(_.Input,{id:"status",name:"status",className:"status",placeholder:"Status",type:"select",onChange:this.handleChangeStatus,value:this.state.status},o.a.createElement("option",{value:""},"All"),o.a.createElement("option",{value:"active"},"Active"),o.a.createElement("option",{value:"inactive"},"Inactive")))),o.a.createElement(_.Col,{className:"pl-md-1",md:"3"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"page",className:"control-label"},"Parent Category"),o.a.createElement(_.Input,{id:"productStatus",name:"productStatus",className:"productStatus",placeholder:"productStatus",type:"select",onChange:this.handleChangeParent,value:this.state.parent},o.a.createElement("option",{value:""},"All"),this.renderProductCategoriesMain()))),o.a.createElement(_.Col,{className:"px-md-1",md:"3"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"page",className:"control-label"},"Parent or Child"),o.a.createElement(_.Input,{id:"parentChild",name:"parentChild",className:"parentChild",placeholder:"Parent or Child ",type:"select",onChange:this.handleChangeParentChild,value:this.state.categoryType},o.a.createElement("option",{value:""},"All"),o.a.createElement("option",{value:"parent"},"Parent"),o.a.createElement("option",{value:"child"},"Child"))))),e&&e.useCreatedProductCategory&&o.a.createElement(_.Row,{className:"pull-right"},o.a.createElement(_.Col,{md:"12"},o.a.createElement(ie.a,{to:"/product-categories/new",className:"btn btn-round btn-info btn-sm"},o.a.createElement(me.a,{icon:"plus"}),"\xa0Add New"),o.a.createElement(ie.a,{to:"/import-categories-excel",className:"btn btn-round btn-info btn-sm"},o.a.createElement(me.a,{icon:"file-excel"}),"\xa0Upload Categories")))),o.a.createElement(_.CardBody,null,o.a.createElement(_.Table,{className:"tablesorter table-striped responsive",responsive:!0},o.a.createElement("thead",{className:"text-primary"},o.a.createElement("tr",null,o.a.createElement("th",null,"\xa0"),o.a.createElement("th",{onClick:this.sortName},"Name"," ","name"===this.state.sortBy&&"desc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-info"})," ","name"===this.state.sortBy&&"asc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-up",className:"text-info"})," ","name"!==this.state.sortBy&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-disabled"})," "),o.a.createElement("th",{onClick:this.sortCreated},"Added"," ","created"===this.state.sortBy&&"desc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-info"})," ","created"===this.state.sortBy&&"asc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-up",className:"text-info"})," ","created"!==this.state.sortBy&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-disabled"})," "),o.a.createElement("th",{onClick:this.sortUpdated},"Updated"," ","updated"===this.state.sortBy&&"desc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-info"})," ","updated"===this.state.sortBy&&"asc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-up",className:"text-info"})," ","updated"!==this.state.sortBy&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-disabled"})," "),o.a.createElement("th",{onClick:this.sortSlug},"Slug"," ","slug"===this.state.sortBy&&"desc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-info"})," ","slug"===this.state.sortBy&&"asc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-up",className:"text-info"})," ","slug"!==this.state.sortBy&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-disabled"})," "),o.a.createElement("th",null,"Description"),e&&"5ccfe6aeb99ae3280fd246dc"===e._id&&o.a.createElement("th",{onClick:this.sortCode},"Code"," ","code"===this.state.sortBy&&"desc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-info"})," ","code"===this.state.sortBy&&"asc"===this.state.sort&&o.a.createElement(me.a,{icon:"arrow-up",className:"text-info"})," ","code"!==this.state.sortBy&&o.a.createElement(me.a,{icon:"arrow-down",className:"text-disabled"})," "),o.a.createElement("th",null,"Parent"),o.a.createElement("th",null,"Status"),o.a.createElement("th",null,"\xa0"))),o.a.createElement("tbody",null,this.renderRows(this.state.productCategories)))),o.a.createElement(_.CardFooter,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Row,{className:"pull-right"},o.a.createElement(_.Col,{md:"4",lg:"4"},o.a.createElement(_.FormGroup,null,this.state.pagination&&this.state.pagination.total>0&&o.a.createElement(_.Input,{style:{marginBottom:"5px"},id:"perPage",name:"perPage",type:"select",onChange:this.handleChangePerPage,value:this.state.size},o.a.createElement("option",{value:"10"},"10 / page"),o.a.createElement("option",{value:"25"},"25 / page"),o.a.createElement("option",{value:"50"},"50 / page"),o.a.createElement("option",{value:"100"},"100 / page")))),o.a.createElement(_.Col,{md:"8",lg:"8"},this.state.pagination&&this.state.pagination.total>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Qe.a,{innerClass:"pagination",activePage:this.state.activePage,itemsCountPerPage:this.state.pagination.limit,totalItemsCount:this.state.pagination.total,pageRangeDisplayed:3,onChange:this.handlePageChange}),o.a.createElement("p",null,"Page ",o.a.createElement("em",null,this.state.activePage)," of ",o.a.createElement("em",null,Math.ceil(this.state.pagination.total/this.state.pagination.limit))," of ",o.a.createElement("em",null,zt(this.state.pagination.total))," categories.")))))))))))):this.renderPageNotVerified():this.renderNoPageAdded()}}]),t}(o.a.Component),zt=function(e){return Yt(e,0).replace(/\B(?=(\d{3})+(?!\d))/g,",")},Yt=function(e,t){if(void 0===t&&(t=2),0!==e&&(!e||isNaN(e)))throw new Error("price is not a number"+e);return parseFloat(Math.round(100*e)/100).toFixed(t)},Kt=Object(E.b)(function(){return{}},{getProductCategories:R,getProductCategoriesV2:j,getProductCategoriesAll:G,getProductCategoriesAllV2:L,deleteProductCategory:U,getPageById:X,updateProductCategory:J})(Vt),_t=a(146),qt=a.n(_t),Wt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;"checkbox"===t.type&&(r=e.target.checked);if(a.setState({category:Object(A.a)({},a.state.category,Object(T.a)({},n,r))}),"name"===n){var o=qt()(r.toLowerCase());""!==r?a.setState({category:Object(A.a)({},a.state.category,{slug:o,name:r})}):a.setState({category:Object(A.a)({},a.state.category,{name:r})})}},a.onDismiss=function(){a.setState({hideTutorials:!0});var e=JSON.parse(N("pageInfo"));e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))},a.onHideTutorials=function(){if(!window.confirm("Are you sure you want to hide this section permanently?"))return!1;var e=JSON.parse(N("pageInfo")),t=JSON.parse(N("userData")).sessionToken;D(t).patch("/provider/places/".concat(e._id),{hideTutorials:!0}).then(function(t){t&&t.data&&"ok"===t.data.status?(a.setState({hideTutorials:!0}),e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))):a.showNotificationError("An unknown error occured. Please try again!")}).catch(function(e){a.setState({submitted:!1,isSaving:!1}),e.response&&"string"===typeof e.response?a.showNotificationError(e.response):a.showNotificationError("An unknown error occured. Please try again!")})},a.handleSubmit=function(e){e.preventDefault();var t=JSON.parse(N("userData")),n=JSON.parse(N("pageInfo")),r=JSON.parse(N("hasProducts")),o=JSON.parse(N("defaultPage")),l=t.sessionToken,s=t.userId,i=Object(A.a)({},a.state.category);if(i.name&&i.slug){if(!window.confirm("Do you want to save this item?"))return!1;if(a.setState({submitted:!0,isSaving:!0}),i){i.provider=s,i.place=o;var c=a.state.productCategoriesMain,d=a.state.category.parent;if(d){var m=c.find(function(e){return e._id===d});i.ancestors.push(m._id)}else i.ancestors=[];a.props.addProductCategory(i,o,l,function(e,t){!e&&t?(S("hasCategories",!0),a.setState({submitted:!1,isSaving:!1}),!0!==n.isActive?r?(a.showNotification("Store has been updated. You can now activate your store."),setTimeout(function(){a.props.history.push("/activate-store")},3e3)):(a.showNotification("Store has been updated. You can now add products."),setTimeout(function(){a.props.history.push("/products/new")},3e3)):(a.showNotification("Product category has been added."),setTimeout(function(){a.props.history.push("/product-categories")},3e3))):e&&(a.showNotificationError(e.response),a.setState({submitted:!1,isSaving:!1}))})}else setTimeout(function(){a.setState({submitted:!1,isSaving:!1})},1e3),a.showNotificationError("Category information is missing.")}else a.setState({submitted:!0}),a.showNotificationError("Some fields are required. Please fill the required fields.")},a.onKeyPress=function(e){"Enter"===e.key&&e.preventDefault()},a.state={category:{name:"",slug:"",description:"",parent:"",ancestors:[]},productCategoriesMain:[],isLoading:!1,isSaving:!1,submitted:!1,hideTutorials:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("userData")),a=JSON.parse(N("defaultPage")),n=t.sessionToken,r=JSON.parse(N("pageInfo"));null!==t&&(this.setState({hideTutorials:!(!r||!r.hideTutorials||!0!==r.hideTutorials)}),this.props.getProductCategoriesAllV2({},a,n,function(t,a){if(!t&&a){var n=a;if(n instanceof Array&&n.length>0){var r=n.filter(function(e){return!e.parent});e.setState({productCategories:n,productCategoriesMain:r})}}e.setState({isLoading:!1})}))}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"renderProductCategoriesMain",value:function(){if(void 0!==this.state.productCategoriesMain||null!=this.state.productCategoriesMain)return this.state.productCategoriesMain.map(function(e,t){return o.a.createElement("option",{key:t,value:e._id},e.name)})}},{key:"render",value:function(){var e=JSON.parse(N("pageInfo")),t=this.state.submitted;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.Form,{onSubmit:this.handleSubmit,onKeyPress:this.onKeyPress},o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Add New Category")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,!e.hideTutorials&&o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Alert,{className:"alert-compact",color:"primary",isOpen:!this.state.hideTutorials,toggle:this.onDismiss,fade:!1},o.a.createElement("h4",{className:"alert-heading"},"New on Product Categories?"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"Check our videos here on how to manage your categories.",o.a.createElement("br",null)),o.a.createElement("a",{className:"btn btn-sm btn-primary-v2",href:"https://www.youtube.com/watch?v=k8VEDqbPv7w"},"View Tutorials"),o.a.createElement(_.Button,{className:"btn-fill btn-sm",color:"danger",type:"button",onClick:this.onHideTutorials},"Hide Permanently")))))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"3",lg:"3"},o.a.createElement("legend",null,"Basic Info")),o.a.createElement(_.Col,{sm:"12",md:"9",lg:"9"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,{className:t&&!this.state.category.name?" has-danger":""},o.a.createElement("label",{htmlFor:"name",className:"control-label"},"Name",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"name",name:"name",className:"name",placeholder:"Category Name",type:"text",value:this.state.category.name,onChange:this.handleChange,autoComplete:"off"}))),o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,{className:t&&!this.state.category.name?" has-danger":""},o.a.createElement("label",{htmlFor:"slug",className:"control-label"},"Slug",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"slug",name:"slug",placeholder:"Slug",type:"text",value:this.state.category.slug,onChange:this.handleChange}))),o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"parent",className:"control-label"},"Parent Category"),o.a.createElement(_.Input,{id:"parent",name:"parent",placeholder:"Parent Category",type:"select",value:this.state.category.parent,onChange:this.handleChange},o.a.createElement("option",{value:""},"Select One"),this.renderProductCategoriesMain()))),o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"description",className:"control-label"},"Description"),o.a.createElement(_.Input,{id:"description",name:"description",placeholder:"Description",type:"textarea",value:this.state.category.description,onChange:this.handleChange,style:{height:"150px"}}))))))),o.a.createElement(_.CardFooter,{className:"pull-right"},o.a.createElement(_.Button,{className:"btn-round",color:"info",type:"submit"},"Save"),o.a.createElement(ie.a,{to:"/product-categories",className:"btn btn-round btn-light"},"Cancel")))))),o.a.createElement(z.a,{active:this.state.isSaving,spinner:!0,text:"Saving..."})))}}]),t}(o.a.Component),Xt=Object(E.b)(function(){return{}},{getProductCategoriesAllV2:L,addProductCategory:function(e,t,a,n){return function(){var r=e;D(a).post("/places/".concat(t,"/product-categories"),r).then(function(e){if(e&&e.data)return n(null,e.data);n(e,null)}).catch(function(e){n(e,null)})}},uploadPhoto:H,removePhoto:Q})(Wt),Zt=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChangeDesc=function(e){a.setState({category:Object(A.a)({},a.state.category,{description:e})})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;"checkbox"===t.type&&(r=e.target.checked);if(a.setState({category:Object(A.a)({},a.state.category,Object(T.a)({},n,r))}),"name"===n){var o=qt()(r.toLowerCase());""!==r?a.setState({category:Object(A.a)({},a.state.category,{slug:o,name:r})}):a.setState({category:Object(A.a)({},a.state.category,{name:r})})}},a.handleFileUpload=function(e){var t=JSON.parse(N("userData")),n=e.target.files,r=a.state.category.photos;if(r.length<1){var o=a.state.categoryId,l=t.sessionToken,s=new FormData;s.append("file",n[0]),a.props.uploadPhoto(o,s,l,function(e,t){if(!e&&t){var n=t;n._id&&(r.push(n),a.setState({category:Object(A.a)({},a.state.category,{photos:r})}))}else e&&alert("There is an error in uploading the file.")})}else console.log("No. of files: ",n.length),alert("You are only allowed to upload one(1) file!")},a.removeImage=function(e){var t=JSON.parse(N("userData")),n=a.state.categoryId,r=e.currentTarget.dataset.id,o=t.sessionToken;a.props.removePhoto(n,r,o,function(e,t){if(!e&&t){if("ok"===t.deleted){var n=a.state.category.photos.filter(function(e){return e._id!==r});a.setState({category:Object(A.a)({},a.state.category,{photos:n})})}}else e&&alert("There is an error in removing the image.")})},a.onDismiss=function(){a.setState({hideTutorials:!0});var e=JSON.parse(N("pageInfo"));e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))},a.onHideTutorials=function(){if(!window.confirm("Are you sure you want to hide this section permanently?"))return!1;var e=JSON.parse(N("pageInfo")),t=JSON.parse(N("userData")).sessionToken;D(t).patch("/provider/places/".concat(e._id),{hideTutorials:!0}).then(function(t){t&&t.data&&"ok"===t.data.status?(a.setState({hideTutorials:!0}),e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))):a.showNotificationError("An unknown error occured. Please try again!")}).catch(function(e){a.setState({submitted:!1,isSaving:!1}),e.response&&"string"===typeof e.response?a.showNotificationError(e.response):a.showNotificationError("An unknown error occured. Please try again!")})},a.handleSubmit=function(e){e.preventDefault();var t=JSON.parse(N("userData")),n=t.sessionToken,r=t.userId,o=Object(A.a)({},a.state),l=o.category,s=o.categoryId;if(l&&l.name&&l.slug){if(!window.confirm("Do you want to save this item?"))return!1;if(a.setState({submitted:!0,isSaving:!0}),l&&l.provider&&l.provider.toString()===r){var i=a.state.productCategoriesMain,c=a.state.category.parent;if(c){var d=i.find(function(e){return e._id===c});l.ancestors.push(d._id)}else l.ancestors=[];delete l.provider,delete l.photos,l?a.props.updateProductCategory(l,s,n,function(e,t){!e&&t?setTimeout(function(){a.setState({submitted:!1,isSaving:!1}),a.props.history.push("/product-categories?message=Product category changes has been saved.")},1e3):e&&(setTimeout(function(){a.setState({submitted:!1,isSaving:!1})},1e3),a.showNotificationError(e.response))}):(setTimeout(function(){a.setState({submitted:!1,isSaving:!1})},1e3),a.showNotificationError("Category information is missing."))}else a.showNotificationError("You are not allowed to update this category."),setTimeout(function(){a.setState({submitted:!1,isSaving:!1}),a.props.history.push("/product-categories")},1e3)}else a.setState({submitted:!0}),a.showNotificationError("Some fields are required. Please fill the required fields.")},a.onKeyPress=function(e){"Enter"===e.key&&e.preventDefault()};var n=e.match.params._id;return a.state={categoryId:n,categoryExist:!1,category:{},productCategories:[],productCategoriesMain:[],images:[],isLoading:!0,isSaving:!1,submitted:!1,hideTutorials:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("userData")),a=JSON.parse(N("defaultPage")),n=JSON.parse(N("pageInfo")),r=t.sessionToken,o=this.state.categoryId;null!==t&&(this.setState({hideTutorials:!(!n||!n.hideTutorials||!0!==n.hideTutorials)}),this.props.getProductCategoriesAllV2({},a,r,function(t,a){if(!t&&a){var n=a;if(n instanceof Array&&n.length>0){var r=n.filter(function(e){return!e.parent}).filter(function(e){return e._id!==o});e.setState({productCategories:n,productCategoriesMain:r},function(){return e.setState({isLoading:!1})})}}else e.setState({isLoading:!1})}),this.props.getProductCategoryById(o,r,function(t,a){if(!t&&a){var n=a;e.setState({categoryExist:!0,category:{name:n.name,slug:n.slug,description:n.description,parent:n.parent?n.parent:"",provider:n.provider,ancestors:n.ancestors,photos:n.photos?n.photos:[]}}),e.setState({isLoading:!1})}else t&&e.setState({isLoading:!1})}))}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"renderProductCategoriesMain",value:function(e){if(e&&e.length>0)return e.map(function(e,t){return o.a.createElement("option",{key:t,value:e._id},e.name)})}},{key:"render",value:function(){var e=this,t=JSON.parse(N("pageInfo")),a=this.state.submitted;return this.state.isLoading?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Edit Category")),o.a.createElement(_.CardBody,null,o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading}))))))):this.state.categoryExist&&this.state.category?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.Form,{onSubmit:this.handleSubmit,onKeyPress:this.onKeyPress},o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Edit Category - ",o.a.createElement("em",null,this.state.category.name))),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,!t.hideTutorials&&o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Alert,{className:"alert-compact",color:"primary",isOpen:!this.state.hideTutorials,toggle:this.onDismiss,fade:!1},o.a.createElement("h4",{className:"alert-heading"},"New on Product Categories?"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"Check our videos here on how to manage your categories.",o.a.createElement("br",null)),o.a.createElement("a",{className:"btn btn-sm btn-primary-v2",href:"https://www.youtube.com/watch?v=k8VEDqbPv7w"},"View Tutorials"),o.a.createElement(_.Button,{className:"btn-fill btn-sm",color:"danger",type:"button",onClick:this.onHideTutorials},"Hide Permanently")))))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"3",lg:"3"},o.a.createElement("legend",null,"Basic Info")),o.a.createElement(_.Col,{sm:"12",md:"9",lg:"9"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,{className:a&&!this.state.category.name?" has-danger":""},o.a.createElement("label",{htmlFor:"name",className:"control-label"},"Name",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"name",name:"name",className:"name",placeholder:"Category Name",type:"text",value:this.state.category.name,onChange:this.handleChange,onKeyUp:this.handleChange,autoComplete:"off"}))),o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,{className:a&&!this.state.category.slug?" has-danger":""},o.a.createElement("label",{htmlFor:"slug",className:"control-label"},"Slug",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"slug",name:"slug",placeholder:"Slug",type:"text",value:this.state.category.slug,onChange:this.handleChange,onKeyUp:this.handleChange}))),o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"parent",className:"control-label"},"Parent Category"),o.a.createElement(_.Input,{id:"parent",name:"parent",placeholder:"Parent Category",type:"select",value:this.state.category.parent,onChange:this.handleChange},o.a.createElement("option",{value:""},"-None-"),this.renderProductCategoriesMain(this.state.productCategoriesMain)))),o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"description",className:"control-label"},"Description"),o.a.createElement(_.Input,{id:"description",name:"description",placeholder:"Description",type:"textarea",value:this.state.category.description,onChange:this.handleChange,style:{height:"150px"}}))),o.a.createElement(_.Col,{lg:"6",md:"6",sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{className:"control-label",htmlFor:"images"},"Upload"),o.a.createElement("div",{className:"upload-photo",style:{margin:"10px auto",border:"1px solid #ccc",backgroundColor:"#efefef"}},o.a.createElement(_.Input,{name:"images",label:"upload file",type:"file",onChange:this.handleFileUpload,style:{position:"relative",height:145,display:"flex",justifyContent:"center",alignItems:"center",borderWidth:2,borderColor:"#666",borderStyle:"solid",borderRadius:5}}),this.state.category.photos&&this.state.category.photos.length>0&&o.a.createElement("ul",{className:"product-photos"},this.state.category.photos.map(function(t){var a=t.original,n=t.thumb,r=t._id;return o.a.createElement("li",{key:r},o.a.createElement("img",{alt:a,title:r,src:n}),o.a.createElement("button",{"data-id":r,type:"button",onClick:e.removeImage,className:"remove-image"},o.a.createElement("span",{style:{color:"#fefefe"}},"\xd7")))}))))))))),o.a.createElement(_.CardFooter,{className:"pull-right"},o.a.createElement(_.Button,{className:"btn-round",color:"info",type:"submit"},"Save"),o.a.createElement(ie.a,{to:"/product-categories",className:"btn btn-round btn-light"},"Cancel")))))),o.a.createElement(z.a,{active:this.state.isSaving,spinner:!0,text:"Saving..."}))):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Edit Category")),o.a.createElement(_.CardBody,null,o.a.createElement("h4",{className:"text-danger"},"Category not found")),o.a.createElement(_.CardFooter,null,o.a.createElement(ie.a,{to:"/product-categories",className:"btn btn-round btn-default"},"Back to Categories")))))))}}]),t}(o.a.Component),$t=Object(E.b)(function(){return{}},{getProductCategoryById:function(e,t,a){return function(){D(t).get("places/product-categories/"+e).then(function(e){if(e&&e.data)return a(null,e.data);a(e,null)}).catch(function(e){a(e,null)})}},getProductCategoriesAllV2:L,updateProductCategory:J,uploadPhoto:H,removePhoto:Q})(Zt),ea=a(80),ta=a(107),aa=a.n(ta);aa.a.setApiKey("AIzaSyBXgQv7GNjKlCSb_Px9SCizvwfAJhUyi9g"),aa.a.enableDebug();var na,ra=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).getCity=function(e){for(var t=0;t<e.length;t++)if(e[t].types[0]&&"administrative_area_level_2"===e[t].types[0])return e[t].long_name},a.getArea=function(e){for(var t=0;t<e.length;t++)if(e[t].types[0])for(var a=0;a<e[t].types.length;a++)if("sublocality_level_1"===e[t].types[a]||"locality"===e[t].types[a])return e[t].long_name},a.getState=function(e){for(var t=0;t<e.length;t++)for(var a=0;a<e.length;a++)if(e[a].types[0]&&"administrative_area_level_1"===e[a].types[0])return e[a].long_name},a.onChange=function(e){a.setState(Object(T.a)({},e.target.name,e.target.value))},a.onInfoWindowClose=function(e){},a.onMarkerDragEnd=function(e){var t=e.latLng.lat(),n=e.latLng.lng();a.props.onDragMarkerEnd(t,n),aa.a.fromLatLng(t,n).then(function(e){var t=e.results[0].formatted_address,n=e.results[0].address_components,r=a.getCity(n),o=a.getArea(n),l=a.getState(n);a.setState({address:t||"",area:o||"",city:r||"",state:l||""})},function(e){console.error(e)})},a.onPlaceSelected=function(e){var t=e.formatted_address,n=e.address_components,r=a.getCity(n),o=a.getArea(n),l=a.getState(n),s=e.geometry.location.lat(),i=e.geometry.location.lng();a.setState({address:t||"",area:o||"",city:r||"",state:l||"",markerPosition:{lat:s,lng:i},mapPosition:{lat:s,lng:i}})},a.state={address:a.props.address,city:a.props.city,area:"",state:"",mapPosition:{lat:a.props.center.lat,lng:a.props.center.lng},markerPosition:{lat:a.props.center.lat,lng:a.props.center.lng}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;aa.a.fromLatLng(this.state.mapPosition.lat,this.state.mapPosition.lng).then(function(t){var a=t.results[0].formatted_address,n=t.results[0].address_components,r=e.getCity(n),o=e.getArea(n),l=e.getState(n);e.setState({address:a||"",area:o||"",city:r||"",state:l||""})},function(e){console.error(e)})}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.markerPosition.lat!==t.markerPosition.lat||this.state.markerPosition.lng!==t.markerPosition.lng||this.state.address!==t.address||this.state.city!==t.city||this.state.area!==t.area||this.state.state!==t.state||(this.props.center.lat,e.center.lat,!1)}},{key:"componentWillReceiveProps",value:function(e){JSON.stringify(e.center)!==JSON.stringify(this.props.center)&&this.setState({markerPosition:Object(A.a)({},e.center),mapPosition:Object(A.a)({},e.center)}),JSON.stringify(e.address)!==JSON.stringify(this.props.address)&&this.setState({address:e.address})}},{key:"render",value:function(){var e=this,t=Object(ea.withScriptjs)(Object(ea.withGoogleMap)(function(t){return o.a.createElement(ea.GoogleMap,{google:e.props.google,defaultZoom:e.props.zoom,defaultCenter:{lat:e.state.mapPosition.lat,lng:e.state.mapPosition.lng}},o.a.createElement(ea.InfoWindow,{onClose:e.onInfoWindowClose,position:{lat:e.state.markerPosition.lat+.0018,lng:e.state.markerPosition.lng}},o.a.createElement("div",null,o.a.createElement("span",{style:{padding:0,margin:0}},e.state.address))),o.a.createElement(ea.Marker,{google:e.props.google,name:"",draggable:!0,onDragEnd:e.onMarkerDragEnd,position:{lat:e.state.markerPosition.lat,lng:e.state.markerPosition.lng}}),o.a.createElement(ea.Marker,null))}));return void 0!==this.props.center.lat?o.a.createElement("div",null,o.a.createElement(t,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyBXgQv7GNjKlCSb_Px9SCizvwfAJhUyi9g&libraries=places",loadingElement:o.a.createElement("div",{style:{height:"100%"}}),containerElement:o.a.createElement("div",{style:{height:this.props.height}}),mapElement:o.a.createElement("div",{style:{height:"100%"}})})):o.a.createElement("div",{style:{height:this.props.height}})}}]),t}(r.Component),oa=(a(299),[188,13]),la=function(e){function t(e){var a;Object(i.a)(this,t);var n=JSON.parse(N("userData"));return(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleDelete=function(e){var t=a.state.place.tags2d.filter(function(t,a){return a!==e});a.setState({place:Object(A.a)({},a.state.place,{tags2d:t})})},a.handleAddition=function(e){var t=a.state.place.tags2d;t=[].concat(Object(Ne.a)(t),[e]),a.setState({place:Object(A.a)({},a.state.place,{tags2d:t})})},a.handleDrag=function(e,t,n){var r=Object(Ne.a)(a.state.place.tags2d).slice();r.splice(t,1),r.splice(n,0,e),a.setState({place:Object(A.a)({},a.state.place,{tags2d:r})})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;if("checkbox"===t.type){var o=e.target.checked;r=o}if("city"===n&&r){var l=a.state.cities,s=l&&l.length>0?l.find(function(e){return e.name===r}):{},i=(s&&s.location?s:{}).location.coordinates;if(i&&i.length>0){var c=Number(i[1]),d=Number(i[0]);c>0&&d>0?a.setState({lat:c,lng:d}):(a.setState({lat:8.48479728734788,lng:124.65104731086728}),a.showNotificationError("Map coordinates values are invalid!"))}}a.setState({place:Object(A.a)({},a.state.place,Object(T.a)({},n,r))},function(){"page-info"===this.state.activeStep?""!==this.state.place.name&&""!==this.state.place.pageType?this.setState({nextBtnToAddress:!1}):this.setState({nextBtnToAddress:!0}):"address"===this.state.activeStep&&(""!==this.state.place.address&&""!==this.state.place.city?this.setState({nextBtnToPageCategory:!1}):this.setState({nextBtnToPageCategory:!0})),""!==this.state.place.name&&""!==this.state.place.pageType&&""!==this.state.place.address&&""!==this.state.place.city&&this.state.place.pageCategories&&this.state.place.pageCategories.length>0&&this.setState({submitBtnDisabled:!1})})},a.handleNextToAddress=function(e){e.preventDefault(),a.setState({submitted:!0}),"page-info"===a.state.activeStep&&(""!==a.state.place.name&&""!==a.state.place.pageType?(a.setState({steps:Object(A.a)({},a.state.steps,{address:!0}),activeStep:"address"}),a.setState({submitted:!1})):(a.setState({steps:Object(A.a)({},a.state.steps,{address:!1})}),a.setState({submitted:!1})))},a.handleNextToPageCategory=function(e){e.preventDefault(),a.setState({submitted:!0}),"address"===a.state.activeStep&&(""!==a.state.place.address&&""!==a.state.place.city?(a.setState({steps:Object(A.a)({},a.state.steps,{pageCategory:!0}),activeStep:"page-category"}),a.setState({submitted:!1})):(a.setState({steps:Object(A.a)({},a.state.steps,{pageCategory:!1})}),a.setState({submitted:!1})))},a.handleNextToOtherSettings=function(e){e.preventDefault(),a.setState({submitted:!0}),"page-category"===a.state.activeStep&&(a.state.checked&&a.state.checked.length>0?(a.setState({steps:Object(A.a)({},a.state.steps,{otherSettings:!0}),activeStep:"other-settings"}),a.setState({submitted:!1})):(a.setState({steps:Object(A.a)({},a.state.steps,{otherSettings:!1})}),a.setState({submitted:!1})))},a.handleSubmit=function(e){if(e.preventDefault(),!window.confirm("Do you want to save this page?"))return!1;var t=JSON.parse(N("userData")).sessionToken,n=Object(A.a)({},a.state).place;if(n){var r=a.state,o=r.lat,l={coordinates:[r.lng,o]};if(n.location=l,a.state.place.tags2d){var s=a.state.place.tags2d.map(function(e){return e.id});n.tags=s}else n.tags=[];var i=a.state.pageCategories;if(a.state.checked)a.state.checked.forEach(function(e){var t=i.find(function(t){return t._id===e}),a={_id:t._id,name:t.name,slug:t.slug};n.pagecategories.push(a)});else n.pagecategories=[];var c=a.state.pageAmenities,d=[];if(c.forEach(function(e){var t=e.features;d=d.concat(t)}),a.state.checkedAmty)a.state.checkedAmty.forEach(function(e){var t=d.find(function(t){return t._id===e}),a={_id:t._id,name:t.name,description:t.description,icon:t.icon,isTop:!1};n.amenities.push(a)});else n.amenities=[];delete n.tags2d}n.name&&n.pageType?(a.setState({submitted:!0,isSaving:!0}),a.props.addPage(n,t,function(e,t){if(e)console.error({error:e}),a.setState({submitted:!1,isSaving:!1}),e instanceof String?a.showNotificationError(e):e.response&&e.response instanceof String?a.showNotificationError(e.response):a.showNotificationError("There is an problem saving the page. Please try again!");else{a.setState({submitted:!1,isSaving:!1}),a.showNotification("A new page has been added!");var n=t.place,r={_id:n._id,name:n.name,addressLine1:n.addressLine1,city:n.city,country:n.country,province:n.province,postalCode:n.postalCode,pageType:n.pageType,bankaccount:n.bankaccount,isVerified:n.isVerified,isActive:n.isActive,photos:n.photos,useCreatedProductCategory:n.useCreatedProductCategory,hideTutorials:!0,productUploadXLSEnabled:!!n.productUploadXLSEnabled,productVouchersEnabled:!!n.productVouchersEnabled};S("pageInfo",JSON.stringify(r)),S("defaultPage",JSON.stringify(n._id)),S("hasCategories",!1),S("hasProducts",!1),a.setState({defaultPage:n._id}),setTimeout(function(){a.props.history.push("/statement-of-agreement"),window.location.reload()},2e3)}})):(a.setState({submitted:!0}),a.showNotificationError("Some field are required! Please fill the missing fields."))},a.updateCoordinates=function(e,t){a.setState({lat:e,lng:t})},a.onKeyPress=function(e){"Enter"===e.key&&e.preventDefault()},a.state={place:{pageType:"",name:"",about:"",addressLine1:"",addressLine2:"",city:"",province:"",country:"",postalCode:"",location:"",tags2d:[],amenities:[],streetby:{commission:0,userDiscount:0},pagecategories:[],isActive:!1,isVerified:!1,useCreatedProductCategory:!0,showCreatedProductSubCategory:!0,productsViewGrid:!0},pageTypes:[],pageCategories:[],pageAmenities:[],isSaving:!1,submitted:!1,userData:n,checked:[],expanded:[],checkedAmty:[],expandedAmty:[],lat:8.48479728734788,lng:124.65104731086728,activeStep:"page-info",steps:{pageInfo:!0,address:!0,pageCategory:!0,otherSettings:!0},submitBtnDisabled:!0,nextBtnToAddress:!0,nextBtnToPageCategory:!0,nextBtnToOtherSettings:!0,cities:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;null!==JSON.parse(N("userData"))&&(this.props.getPageTypes(function(t,a){!t&&a&&e.setState({pageTypes:a})}),this.props.getPageCategories(function(t,a){!t&&a&&e.setState({pageCategories:a})}),this.props.getAmenities(function(t,a){!t&&a&&e.setState({pageAmenities:a})}),D().get("/provider/supported-cities").then(function(t){if(t&&t.data){var a=t.data;e.setState({cities:a})}}).catch(function(e){console.error(e)}))}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"renderPageTypes",value:function(){if(void 0!==this.state.pageTypes||null!=this.state.pageTypes)return this.state.pageTypes.filter(function(e){return e.isActive=!0}).map(function(e,t){return o.a.createElement("option",{key:t,value:e._id},e.name)})}},{key:"renderVerticalNav",value:function(){var e=this;return o.a.createElement(_.Nav,{vertical:!0},o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"page-info"===this.state.activeStep?" active-link":""),to:"#",onClick:function(){e.setState({activeStep:"page-info"})}},"Store Information",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"})))),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"address"===this.state.activeStep?" active-link":"")+(!1===this.state.steps.address?" disabled":""),to:"#",onClick:function(){!0===e.state.steps.address&&e.setState({activeStep:"address"})}},"Address ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"})))),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"page-category"===this.state.activeStep?" active-link":"")+(!1===this.state.steps.pageCategory?" disabled":""),to:"#",onClick:function(){!0===e.state.steps.pageCategory&&e.setState({activeStep:"page-category"})}},"Categories & Amenities ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"})))),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"other-settings"===this.state.activeStep?" active-link":"")+(!1===this.state.steps.otherSettings?" disabled":""),to:"#",onClick:function(){!0===e.state.steps.otherSettings&&e.setState({activeStep:"other-settings"})}},"Other Settings ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"})))))}},{key:"renderPageInfo",value:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{lg:"12",md:"12",sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Alert,{color:"primary"},"Select a name, type and add description for your store.")))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"",md:"6",sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!e.name?" has-danger":""},o.a.createElement("label",{htmlFor:"name",className:"control-label"},"Name ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"name",name:"name",placeholder:"Page Name",type:"text",value:e.name,onChange:this.handleChange,autoComplete:"off"}))),o.a.createElement(_.Col,{className:"",md:"6",sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!e.pageType?" has-danger":""},o.a.createElement("label",{className:"control-label"},"Industry ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"pageType",name:"pageType",placeholder:"Industry",type:"select",value:e.pageType,onChange:this.handleChange},o.a.createElement("option",{value:""},"Select Industry"),this.renderPageTypes())))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"",sm:"12"},o.a.createElement(_.FormGroup,{style:{marginBottom:"1.25rem"}},o.a.createElement("label",{htmlFor:"about",className:"control-label"},"About"),o.a.createElement(_.Input,{id:"about",name:"about",placeholder:"About",type:"textarea",value:e.about,onChange:this.handleChange,style:{height:"150px"}})))))}},{key:"renderAddress",value:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{lg:"12",md:"12",sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Alert,{color:"primary"},"Add address information of your store.")))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"",md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"addressLine1",className:"control-label"},"Address ",o.a.createElement("em",null,"(Line 1)")),o.a.createElement(_.Input,{name:"addressLine1",placeholder:"Address (Line 1)",type:"text",value:e.addressLine1,onChange:this.handleChange}))),o.a.createElement(_.Col,{className:"",md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"addressLine2",className:"control-label"},"Address ",o.a.createElement("em",null,"(Line 2)")),o.a.createElement(_.Input,{name:"addressLine2",placeholder:"Address (Line 2)",type:"text",value:e.addressLine2,onChange:this.handleChange})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"",md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"city",className:"control-label"},"City"),o.a.createElement(_.Input,{id:"city",bsSize:"lr",name:"city",placeholder:"City/Town",type:"select",value:e.city,onChange:this.handleChange},o.a.createElement("option",{value:""},"City/Town"),this.renderCities(this.state.cities)))),o.a.createElement(_.Col,{className:"",md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"province",className:"control-label"},"Province"),o.a.createElement(_.Input,{name:"province",placeholder:"Province",type:"text",value:e.province,onChange:this.handleChange})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"",md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"country",className:"control-label"},"Country"),o.a.createElement(_.Input,{name:"country",placeholder:"Country",type:"text",value:e.country,onChange:this.handleChange}))),o.a.createElement(_.Col,{className:"",md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"postalCode",className:"control-label"},"Postal Code"),o.a.createElement(_.Input,{name:"postalCode",placeholder:"Postal Code",type:"text",value:e.postalCode,onChange:this.handleChange})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"",md:"12",style:{minHeight:"460px"}},o.a.createElement(_.FormGroup,null,this.state.lat&&this.state.lng&&o.a.createElement(ra,{google:this.props.google,center:{lat:this.state.lat,lng:this.state.lng},height:"450px",zoom:15,address:"".concat(this.state.place.addressLine1,", ").concat(this.state.place.city,", ").concat(this.state.place.province),city:this.state.place.city,onDragMarkerEnd:this.updateCoordinates})))))}},{key:"renderPageCategory",value:function(e,t,a){var n=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{lg:"12",md:"12",sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Alert,{color:"primary"},"Select categories and amenities.")))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"",md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"pageCategory",className:"control-label sub-legend"},"Page Category"," "),o.a.createElement(st.a,{nodes:t,checked:this.state.checked,expanded:this.state.expanded,onCheck:function(e){return n.setState({checked:e},function(){"page-category"===this.state.activeStep&&(this.state.checked&&this.state.checked.length>0?this.setState({nextBtnToOtherSettings:!1}):this.setState({nextBtnToOtherSettings:!0})),""!==this.state.place.name&&""!==this.state.place.pageType&&""!==this.state.place.address&&""!==this.state.place.city&&this.state.checked&&this.state.checked.length>0&&this.setState({submitBtnDisabled:!1})})},onExpand:function(e){return n.setState({expanded:e})},showNodeIcon:!1,icons:a,nativeCheckboxes:!0})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"",md:"12",style:{marginTop:"15px"}},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Label,{htmlFor:"pageAmenities",className:"control-label sub-legend"},"Amenities"),o.a.createElement(st.a,{nodes:e,checked:this.state.checkedAmty,expanded:this.state.expandedAmty,onCheck:function(e){return n.setState({checkedAmty:e})},onExpand:function(e){return n.setState({expandedAmty:e})},noCascade:!0,showNodeIcon:!1,icons:a,onlyLeafCheckboxes:!0,nativeCheckboxes:!0})))))}},{key:"renderOtherSettings",value:function(e){var t=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{lg:"12",md:"12",sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Alert,{color:"primary"},"Add tags and other settings for your store.")))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"",md:"6",sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Label,{htmlFor:"tags",className:"control-label sub-legend"},"Tags"),o.a.createElement(ot.WithContext,{tags:e.tags2d,delimiters:oa,handleDelete:this.handleDelete,handleAddition:this.handleAddition,handleDrag:this.handleDrag,autofocus:!1})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Label,null,o.a.createElement(Ue.a,{onClick:function(){t.setState({place:Object(A.a)({},t.state.place,{productsViewGrid:!e.productsViewGrid})})},on:e.productsViewGrid}),"Product Grid View")))))}},{key:"renderCities",value:function(e){if(e&&e.length>0)return e.filter(function(e){return e.isActive=!0}).map(function(e,t){return o.a.createElement("option",{key:t,value:e.name},e.name)})}},{key:"render",value:function(){var e=this.state.pageCategories,t=e.filter(function(e){return!e.parent}),a=e.filter(function(e){return e.parent}),n=[];t&&t.forEach(function(e){var t=e._id.toString(),r=e.name,o=a.filter(function(e){return e.parent.toString()===t}),l=[];if(o instanceof Array&&o.length>0){var s=[];o.forEach(function(e){var t={value:e._id,label:e.name,children:[]};s.push(t)}),l=s}var i={value:t,label:r,children:l};n.push(i)});var r=this.state.pageAmenities,l=[];r&&r.forEach(function(e){var t=e._id,a=e.type[0].name,n=e.features,r=[];if(n instanceof Array&&n.length>0){var o=[];n.forEach(function(e){var t={value:e._id,label:e.name,children:[]};o.push(t)}),r=o}var s={value:t,label:a,children:r};l.push(s)});var s={check:o.a.createElement(me.a,{className:"rct-icon rct-icon-check",icon:["far","check-square"]}),uncheck:o.a.createElement(me.a,{className:"rct-icon rct-icon-uncheck",icon:["far","square"]}),halfCheck:o.a.createElement(me.a,{className:"rct-icon rct-icon-half-check",icon:["far","check-square"]}),expandClose:o.a.createElement(me.a,{className:"rct-icon rct-icon-expand-close",icon:"chevron-right"}),expandOpen:o.a.createElement(me.a,{className:"rct-icon rct-icon-expand-open",icon:"chevron-down"}),expandAll:o.a.createElement(me.a,{className:"rct-icon rct-icon-expand-all",icon:"plus-square"}),collapseAll:o.a.createElement(me.a,{className:"rct-icon rct-icon-collapse-all",icon:"minus-square"}),parentClose:o.a.createElement(me.a,{className:"rct-icon rct-icon-parent-close",icon:["far","folder"]}),parentOpen:o.a.createElement(me.a,{className:"rct-icon rct-icon-parent-open",icon:["far","folder-open"]}),leaf:o.a.createElement(me.a,{className:"rct-icon rct-icon-leaf-close",icon:["far","file"]})};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.Form,{onSubmit:this.handleSubmit,onKeyPress:this.onKeyPress},o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Add New Page")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"",sm:"4"},this.renderVerticalNav()),o.a.createElement(_.Col,{className:"",md:"8",sm:"8"},"page-info"===this.state.activeStep&&!0===this.state.steps.pageInfo?this.renderPageInfo(this.state.place):"address"===this.state.activeStep&&!0===this.state.steps.address?this.renderAddress(this.state.place):"page-category"===this.state.activeStep&&!0===this.state.steps.pageCategory?this.renderPageCategory(l,n,s):"other-settings"===this.state.activeStep&&!0===this.state.steps.pageCategory?this.renderOtherSettings(this.state.place):this.renderPageInfo(this.state.place)))))),o.a.createElement(_.CardFooter,null,o.a.createElement(_.Button,{className:"btn-fill btn-round",disabled:this.state.submitBtnDisabled,color:"info",onClick:this.handleSubmitButton},"Save"),"page-info"===this.state.activeStep&&o.a.createElement(_.Button,{className:"btn-fill btn-round",disabled:this.state.nextBtnToAddress,color:"info",type:"button",onClick:this.handleNextToAddress},"Next"),"address"===this.state.activeStep&&o.a.createElement(_.Button,{className:"btn-fill btn-round",disabled:this.state.nextBtnToPageCategory,color:"info",type:"button",onClick:this.handleNextToPageCategory},"Next"),"page-category"===this.state.activeStep&&o.a.createElement(_.Button,{className:"btn-fill btn-round",disabled:this.state.nextBtnToOtherSettings,color:"info",type:"button",onClick:this.handleNextToOtherSettings},"Next"),o.a.createElement(ie.a,{to:"/products",className:"btn btn-round btn-info"},"Cancel")))))),o.a.createElement(z.a,{active:this.state.isSaving,spinner:!0,text:"Saving..."})))}}]),t}(o.a.Component),sa=Object(E.b)(function(){return{}},{addPage:Z,getProductTypes:xe,getProviderInfo:M,getPageTypes:ee,getPageCategories:te,getAmenities:ae})(la),ia=[188,13],ca={position:"relative",height:145,display:"flex",justifyContent:"center",alignItems:"center",borderWidth:2,borderColor:"#666",borderStyle:"solid",borderRadius:5},da=function(e){function t(e){var a;Object(i.a)(this,t);var n=JSON.parse(N("userData")),r=JSON.parse(N("defaultPage"));return(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleDelete=function(e){var t=a.state.place.tags2d.filter(function(t,a){return a!==e});a.setState({place:Object(A.a)({},a.state.place,{tags2d:t})})},a.handleAddition=function(e){var t=a.state.place.tags2d;t.push(e),a.setState({place:Object(A.a)({},a.state.place,{tags2d:t})})},a.handleDrag=function(e,t,n){var r=Object(Ne.a)(a.state.place.tags2d).slice();r.splice(t,1),r.splice(n,0,e),a.setState({place:Object(A.a)({},a.state.place,{tags2d:r})})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;if("checkbox"===t.type){var o=e.target.checked;r=o}if("city"===n&&r){var l=a.state.cities,s=l&&l.length>0?l.find(function(e){return e.name===r}):{},i=(s&&s.location?s:{}).location.coordinates;if(i&&i.length>0){var c=Number(i[1]),d=Number(i[0]);c>0&&d>0?a.setState({lat:c,lng:d}):(a.setState({lat:8.48479728734788,lng:124.65104731086728}),a.showNotificationError("Map coordinates values are invalid!"))}}a.setState({place:Object(A.a)({},a.state.place,Object(T.a)({},n,r))})},a.onKeyPress=function(e){"Enter"===e.key&&e.preventDefault()},a.onDismiss=function(){var e=JSON.parse(N("pageInfo"));a.setState({place:Object(A.a)({},a.state.place,{hideTutorials:!0})}),e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))},a.onHideTutorials=function(){if(!window.confirm("Are you sure you want to hide this section permanently?"))return!1;var e=JSON.parse(N("pageInfo")),t=JSON.parse(N("userData")).sessionToken;a.props.updatePage({hideTutorials:!0},e._id,t,function(t,n){n&&(a.setState({place:Object(A.a)({},a.state.place,{hideTutorials:!0})}),e.hideTutorials=!0,S("pageInfo",JSON.stringify(e)))})},a.handleSubmit=function(e){e.preventDefault();var t=JSON.parse(N("hasCategories")),n=JSON.parse(N("hasProducts")),r=JSON.parse(N("userData")),o=JSON.parse(N("pageInfo"));r||(a.showNotificationError("You are not logged in. Please login to continue."),setTimeout(function(){a.props.history.push("/login"),window.location.reload()},2e3));var l=r.sessionToken,s=Object(A.a)({},a.state),i=s.place,c=s.pageId;if(i.name&&i.pageType&&i.addressLine1&&i.city){if(!window.confirm("Do you want to save this page?"))return!1;if(a.setState({submitted:!0,isSaving:!0}),i){var d=a.state,m=d.lat,u={type:"Point",coordinates:[d.lng,m]};if(i.location=u,a.state.place.tags2d){var p=a.state.place.tags2d.map(function(e){return e.id});i.tags=p}else i.tags=[];var h=a.state.pageCategories;if(a.state.checked)a.state.checked.forEach(function(e){var t=h.find(function(t){return t._id===e}),a={_id:t._id,name:t.name,slug:t.slug};i.pagecategories.push(a)});else i.pagecategories=[];var g=a.state.pageAmenities,f=[];if(g.forEach(function(e){var t=e.features;f=f.concat(t)}),a.state.checkedAmty)a.state.checkedAmty.forEach(function(e){var t=f.find(function(t){return t._id===e}),a={_id:t._id,name:t.name,description:t.description,icon:t.icon,isTop:!1};i.amenities.push(a)});else i.amenities=[];var E={loginUrl:a.state.place.loginUrl?a.state.place.loginUrl:"",username:a.state.place.apiUsername?a.state.place.apiUsername:"",password:a.state.place.apiPassword?a.state.place.apiPassword:"",productsUrl:a.state.place.productsUrl?a.state.place.productsUrl:"",apiKey:a.state.place.apiKey?a.state.place.apiKey:""},y={};a.state.place.notificationText&&a.state.place.notificationType&&(y={notificationText:a.state.place.notificationText,notificationType:a.state.place.notificationType}),i.bankaccount={bankName:a.state.place.bankName?a.state.place.bankName:"",accountName:a.state.place.accountName?a.state.place.accountName:"",accountNumber:a.state.place.accountNumber?a.state.place.accountNumber:""},i.productsNotificationText=y,i.privateApiInfo=E,delete i.tags2d,delete i.loginUrl,delete i.apiUsername,delete i.apiPassword,delete i.productsUrl,delete i.apiKey,delete i.notificationText,delete i.notificationType,delete i.bankName,delete i.accountName,delete i.accountNumber,a.props.updatePage(i,c,l,function(e,r){if(r){a.setState({submitted:!1,isSaving:!1});var l={_id:c,name:i.name,addressLine1:i.addressLine1,city:i.city,country:i.country,province:i.province,postalCode:i.postalCode,pageType:i.pageType,bankaccount:i.bankaccount,isVerified:i.isVerified,isActive:i.isActive,photos:i.photos,useCreatedProductCategory:i.useCreatedProductCategory,hideTutorials:o.hideTutorials,productUploadXLSEnabled:!!i.productUploadXLSEnabled,productVouchersEnabled:!!i.productVouchersEnabled};S("pageInfo",JSON.stringify(l)),i&&(!0!==i.isActive?t?n?(a.showNotification("Store has been updated. You can now activate your store."),setTimeout(function(){a.props.history.push("/activate-store")},3e3)):(a.showNotification("Store has been updated. You can now add products."),setTimeout(function(){a.props.history.push("/products/new")},3e3)):(a.showNotification("Store information has been updated. You can now add categories."),setTimeout(function(){a.props.history.push("/product-categories/new")},3e3)):(a.showNotification("Store information has been updated."),setTimeout(function(){a.props.history.push("/page")},3e3)))}else e&&(e.response&&e.response.status?401===e.response.status?(a.showNotificationError("Invalid credentials. Please try again"),setTimeout(function(){a.props.history.push("/page"),window.location.reload()},2e3)):"string"===typeof e.response.statusText?a.showNotificationError(e.response.statusText):a.showNotificationError("There is an error saving the page."):e.message&&"string"===typeof e.message?a.showNotificationError(e.message):a.showNotificationError("There is an error saving the page.")),a.setState({submitted:!1,isSaving:!1})})}else a.setState({submitted:!1,isSaving:!1}),a.showNotificationError("Page information is missing.")}else a.setState({submitted:!0}),a.showNotificationError("Some fields are required. Please fill the required fields.")},a.handleFileUpload=function(e){var t=JSON.parse(N("userData")),n=e.target.files;if(a.state.place.photos.length<6){a.setState({isUploading:!0});var r=a.state.pageId,o=t.sessionToken,l=a.state.place.photos,s=new FormData;s.append("file",n[0]),a.props.uploadPhoto(r,s,o,function(e,t){if(!e&&t){a.setState({isUploading:!1});var n=t;n._id&&(l.push(n),a.setState({place:Object(A.a)({},a.state.place,{photos:l})}))}else a.setState({isUploading:!1}),e.response&&"string"===typeof e.response?(console.error(e.response),a.showNotificationError(e.response)):(console.error({error:e}),a.showNotificationError("There is an error uploading the file. Please try again"))})}else a.setState({isUploading:!1}),console.log("No. of files: ",n.length),alert("You are only allowed to upload a maximum of 6 files!")},a.removeImage=function(e){var t=JSON.parse(N("userData")),n=a.state.pageId,r=e.currentTarget.dataset.id,o=t.sessionToken;a.props.removePhoto(n,r,o,function(e,t){if(!e&&t){if("ok"===t.deleted){var n=a.state.place.photos.filter(function(e){return e._id!==r});a.setState({place:Object(A.a)({},a.state.place,{photos:n})}),a.showNotification("Image was successfully removed.")}}else e.response&&"string"===typeof e.response?(console.error(e.response),a.showNotificationError(e.response)):(console.error({error:e}),a.showNotificationError("There is error removing the image."))})},a.updateCoordinates=function(e,t){a.setState({lat:e,lng:t})},a.state={pageId:r,pageExists:!1,place:{},pageTypes:[],pageCategories:[],pageAmenities:[],isLoading:!0,submitted:!1,isSaving:!1,userData:n,checked:[],expanded:[],checkedAmty:[],expandedAmty:[],lat:8.48479728734788,lng:124.65104731086728,useCreatedProductCategory:!1,showCreatedProductSubCategory:!1,productsViewGrid:!1,isUploading:!1,activeStep:"page-info",steps:{pageInfo:!0,address:!0,pageCategory:!0,otherSettings:!0,images:!0,bankInfo:!0},warnings:[],hideTutorials:!1,cities:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("userData")),a=t.sessionToken,n=this.state.pageId;null!==t&&(this.props.getPageById(n,a,function(t,a){if(!t&&a){var n=a.page,r=n.tags.filter(function(e){return""!==e.trim()}),o=[];r instanceof Array&&r.length>0&&r.forEach(function(e){var t={};t.id=e,t.text=e,o.push(t)});var l=[];n.pagecategories instanceof Array&&n.pagecategories.length>0&&n.pagecategories.forEach(function(e){var t=e._id;l.push(t)});var s=[];n.amenities instanceof Array&&n.amenities.length>0&&n.amenities.forEach(function(e){var t=e._id;s.push(t)}),e.setState({pageExists:!0,pageId:n._id,place:{pageType:n.pageType,name:n.name,about:n.about,addressLine1:n.addressLine1,addressLine2:n.addressLine2,city:n.city,province:n.province,country:n.country,postalCode:n.postalCode,location:n.location,tags2d:o,amenities:n.amenities,destinations:n.destinations,contactName:n.contactName,email:n.email,defaultContactNumber:n.v,callContactNumber:n.callContactNumber,landlineNumber:[],mobileNumber:[],website:n.website,priceCategory:n.priceCategory,hasLowestPrice:n.hasLowestPrice,lowestPrice:n.lowestPrice,pagecategories:n.pagecategories,businessHours:n.businessHours,isActive:n.isActive,isVerified:n.isVerified,paymentMethod:n.paymentMethod,loginUrl:n.privateApiInfo&&n.privateApiInfo.loginUrl?n.privateApiInfo.loginUrl:"",apiUsername:n.privateApiInfo&&n.privateApiInfo.username?n.privateApiInfo.username:"",apiPassword:n.privateApiInfo&&n.privateApiInfo.password?n.privateApiInfo.password:"",productsUrl:n.privateApiInfo&&n.privateApiInfo.productsUrl?n.privateApiInfo.productsUrl:"",apiKey:n.privateApiInfo&&n.privateApiInfo.apiKey?n.privateApiInfo.apiKey:"",useCreatedProductCategory:n.useCreatedProductCategory,showCreatedProductSubCategory:n.showCreatedProductSubCategory,productsViewGrid:n.productsViewGrid,notificationText:n.productsNotificationText&&n.productsNotificationText.notificationText?n.productsNotificationText.notificationText:"",notificationType:n.productsNotificationText&&n.productsNotificationText.notificationType?n.productsNotificationText.notificationType:"default",accountName:n.bankaccount&&n.bankaccount.accountName?n.bankaccount.accountName:"",accountNumber:n.bankaccount&&n.bankaccount.accountNumber?n.bankaccount.accountNumber:"",bankName:n.bankaccount&&n.bankaccount.bankName?n.bankaccount.bankName:"",photos:n.photos?n.photos:[],hideTutorials:!(!n.hideTutorials||!0!==n.hideTutorials)},checked:[].concat(l),checkedAmty:[].concat(s),lat:n.location.coordinates[1],lng:n.location.coordinates[0]},function(){this.setState({isLoading:!1})});var i=[];e.state.place.photos&&e.state.place.photos.length<1&&(i=[].concat(Object(Ne.a)(i),["You have not added a profile photo for your store."])),e.state.place.accountName&&e.state.place.accountNumber&&e.state.place.bankName?""!==e.state.place.accountName&&""!==e.state.place.accountNumber&&""!==e.state.place.bankName||(i=[].concat(Object(Ne.a)(i),["The bank details you provide is incomplete."])):i.push("You have not provided bank details for your store."),""!==e.state.place.addressLine1&&""!==e.state.place.city||(i=[].concat(Object(Ne.a)(i),["Please provide address details for your store."])),e.setState({warnings:i})}else t&&e.setState({isLoading:!1})}),this.props.getPageTypes(function(t,a){!t&&a&&e.setState({pageTypes:a})}),this.props.getPageCategories(function(t,a){!t&&a&&e.setState({pageCategories:a})}),this.props.getAmenities(function(t,a){!t&&a&&e.setState({pageAmenities:a})}),D().get("/provider/supported-cities").then(function(t){if(t&&t.data){var a=t.data;e.setState({cities:a})}}).catch(function(e){console.error(e)}))}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"renderPageTypes",value:function(){if(void 0!==this.state.pageTypes||null!=this.state.pageTypes)return this.state.pageTypes.filter(function(e){return e.isActive=!0}).map(function(e,t){return o.a.createElement("option",{key:t,value:e._id},e.name)})}},{key:"renderVerticalNavBar",value:function(){var e=this;return o.a.createElement(_.Nav,{vertical:!0},o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"page-info"===this.state.activeStep?" active-link":""),to:"#",onClick:function(){e.setState({activeStep:"page-info"})}},"Place Information",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"})))),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"address"===this.state.activeStep?" active-link":"")+(!1===this.state.steps.address?" disabled":""),to:"#",onClick:function(){!0===e.state.steps.address&&e.setState({activeStep:"address"})}},"Address ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"})))),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"page-category"===this.state.activeStep?" active-link":"")+(!1===this.state.steps.pageCategory?" disabled":""),to:"#",onClick:function(){!0===e.state.steps.pageCategory&&e.setState({activeStep:"page-category"})}},"Categories & Amenities ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"})))),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"other-settings"===this.state.activeStep?" active-link":"")+(!1===this.state.steps.otherSettings?" disabled":""),to:"#",onClick:function(){!0===e.state.steps.otherSettings&&e.setState({activeStep:"other-settings"})}},"Other Settings ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"})))),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"images"===this.state.activeStep?" active-link":"")+(!1===this.state.steps.images?" disabled":""),to:"#",onClick:function(){!0===e.state.steps.images&&e.setState({activeStep:"images"})}},"Images ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"})))),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"bank-info"===this.state.activeStep?" active-link":"")+(!1===this.state.steps.bankInfo?" disabled":""),to:"#",onClick:function(){!0===e.state.steps.bankInfo&&e.setState({activeStep:"bank-info"})}},"Bank Details ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"})))))}},{key:"renderPageInfo",value:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6",sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!e.name?" has-danger":""},o.a.createElement("label",{htmlFor:"name",className:"control-label"},"Name ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"name",name:"name",placeholder:"Page Name",type:"text",value:this.state.place.name,onChange:this.handleChange,autoComplete:"off"}))),o.a.createElement(_.Col,{md:"6",sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!e.pageType?" has-danger":""},o.a.createElement("label",{className:"control-label"},"Industry ",o.a.createElement("em",{className:"text-muted"},"(Required)")),o.a.createElement(_.Input,{id:"pageType",name:"pageType",placeholder:"Industry",type:"select",value:e.pageType,onChange:this.handleChange},o.a.createElement("option",{value:""},"Select Industry"),this.renderPageTypes())))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,{style:{marginBottom:"1.25rem"}},o.a.createElement("label",{htmlFor:"about",className:"control-label"},"About"),o.a.createElement(_.Input,{id:"about",name:"about",placeholder:"About",type:"textarea",value:e.about,onChange:this.handleChange,style:{height:"150px"}})))))}},{key:"renderAddress",value:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"addressLine1",className:"control-label"},"Address ",o.a.createElement("em",null,"(Line 1)")),o.a.createElement(_.Input,{name:"addressLine1",placeholder:"Address (Line 1)",type:"text",value:e.addressLine1,onChange:this.handleChange}))),o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"addressLine2",className:"control-label"},"Address ",o.a.createElement("em",null,"(Line 2)")),o.a.createElement(_.Input,{name:"addressLine2",placeholder:"Address (Line 2)",type:"text",value:e.addressLine2,onChange:this.handleChange})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"city",className:"control-label"},"City"),o.a.createElement(_.Input,{id:"city",bsSize:"lr",name:"city",placeholder:"City/Town",type:"select",value:e.city,onChange:this.handleChange},o.a.createElement("option",{value:""},"City/Town"),this.renderCities(this.state.cities)))),o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"province",className:"control-label"},"Province"),o.a.createElement(_.Input,{name:"province",placeholder:"Province",type:"text",value:e.province,onChange:this.handleChange})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"country",className:"control-label"},"Country"),o.a.createElement(_.Input,{name:"country",placeholder:"Country",type:"text",value:e.country,onChange:this.handleChange}))),o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"postalCode",className:"control-label"},"Postal Code"),o.a.createElement(_.Input,{name:"postalCode",placeholder:"Postal Code",type:"text",value:e.postalCode,onChange:this.handleChange})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement(ra,{google:this.props.google,center:{lat:this.state.lat,lng:this.state.lng},address:"".concat(e.addressLine1,", ").concat(e.city,", ").concat(e.province,", ").concat(e.country),city:this.state.place.city,height:"450px",zoom:15,onDragMarkerEnd:this.updateCoordinates})))))}},{key:"renderPageCategory",value:function(e,t,a){var n=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"pageCategory",className:"control-label sub-legend"},"Page Category"," "),o.a.createElement(st.a,{nodes:t,checked:this.state.checked,expanded:this.state.expanded,onCheck:function(e){return n.setState({checked:e})},onExpand:function(e){return n.setState({expanded:e})},showNodeIcon:!1,icons:a,nativeCheckboxes:!0})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",md:"12",style:{marginTop:"15px"}},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"pageAmenities",className:"control-label sub-legend"},"Amenities"),o.a.createElement(st.a,{nodes:e,checked:this.state.checkedAmty,expanded:this.state.expandedAmty,onCheck:function(e){return n.setState({checkedAmty:e})},onExpand:function(e){return n.setState({expandedAmty:e})},noCascade:!0,showNodeIcon:!1,icons:a,onlyLeafCheckboxes:!0,nativeCheckboxes:!0})))))}},{key:"renderOtherSettings",value:function(e){var t=this,a=JSON.parse(N("pageInfo"));return o.a.createElement(o.a.Fragment,null,a&&"5cd141d10d437be772373ddb"===a.pageType&&o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6",sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"notificationText",className:"control-label"},"Products Notification Text"),o.a.createElement(_.Input,{id:"notificationText",name:"notificationText",placeholder:"Notification Text",type:"text",value:e.notificationText,onChange:this.handleChange,autoComplete:"off"}))),o.a.createElement(_.Col,{md:"6",sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{className:"control-label"},"Notification Type"),o.a.createElement(_.Input,{id:"notificationType",name:"notificationType",placeholder:"Notification Type",type:"select",value:e.notificationType,onChange:this.handleChange},o.a.createElement("option",{value:"default"},"Default"),o.a.createElement("option",{value:"info"},"Info"),o.a.createElement("option",{value:"success"},"Success"),o.a.createElement("option",{value:"warning"},"Warning"),o.a.createElement("option",{value:"danger"},"Danger"))))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",md:"12",sm:"12",style:{marginTop:"15px"}},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"tags",className:"control-label sub-legend"},"Tags"),o.a.createElement(ot.WithContext,{tags:e.tags2d,delimiters:ia,handleDelete:this.handleDelete,handleAddition:this.handleAddition,handleDrag:this.handleDrag,autofocus:!1})))),a&&o.a.createElement(o.a.Fragment,null,"5cd141d10d437be772373ddb"===a.pageType&&o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Label,null,o.a.createElement(Ue.a,{onClick:function(){t.setState({place:Object(A.a)({},t.state.place,{useCreatedProductCategory:!e.useCreatedProductCategory})})},on:e.useCreatedProductCategory}),"Use Product Categories")))),"5cd141d10d437be772373ddb"===a.pageType&&o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Label,null,o.a.createElement(Ue.a,{onClick:function(){t.setState({place:Object(A.a)({},t.state.place,{showCreatedProductSubCategory:!e.showCreatedProductSubCategory})})},on:e.showCreatedProductSubCategory}),"Show Product Sub-Categories")))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Label,null,o.a.createElement(Ue.a,{onClick:function(){t.setState({place:Object(A.a)({},t.state.place,{productsViewGrid:!e.productsViewGrid})})},on:e.productsViewGrid}),"Product Grid View"))))),a&&"5cd141d10d437be772373ddb"===a.pageType&&o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Alert,{color:"primary"},"These are information for your private API."))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"loginUrl",className:"control-label"},"Login URL"),o.a.createElement(_.Input,{id:"loginUrl",name:"loginUrl",placeholder:"Login URL",type:"text",value:this.state.place.loginUrl,onChange:this.handleChange,autoComplete:"off"})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6",sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"apiUsername",className:"control-label"},"Username"),o.a.createElement(_.Input,{id:"apiUsername",name:"apiUsername",placeholder:"API Username",type:"text",value:this.state.place.apiUsername,onChange:this.handleChange,autoComplete:"off"}))),o.a.createElement(_.Col,{md:"6",sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"apiPassword",className:"control-label"},"API Password"),o.a.createElement(_.Input,{id:"apiPassword",name:"apiPassword",placeholder:"API Password",type:"password",value:this.state.place.apiPassword,onChange:this.handleChange,autoComplete:"off"})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"productsUrl",className:"control-label"},"Products URL"),o.a.createElement(_.Input,{id:"productsUrl",name:"productsUrl",placeholder:"Products URL",type:"text",value:this.state.place.productsUrl,onChange:this.handleChange,autoComplete:"off"})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12",sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"apiKey",className:"control-label"},"API Key"),o.a.createElement(_.Input,{id:"apiKey",name:"apiKey",placeholder:"API Key",type:"text",value:this.state.place.apiKey,onChange:this.handleChange,autoComplete:"off"}))))))}},{key:"renderBankInfo",value:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Alert,{color:"primary"},"Enter your bank details. This will be used for depositing gateway transactions."))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"bankName",className:"control-label"},"Bank Name"),o.a.createElement(_.Input,{id:"bankName",name:"bankName",placeholder:"Bank",type:"text",value:e.bankName||"",onChange:this.handleChange,autoComplete:"off"})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6",sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"accountName",className:"control-label"},"Account Name"),o.a.createElement(_.Input,{id:"accountName",name:"accountName",placeholder:"Account Name",type:"text",value:e.accountName||"",onChange:this.handleChange,autoComplete:"off"}))),o.a.createElement(_.Col,{md:"6",sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"accountNumber",className:"control-label"},"Account Number"),o.a.createElement(_.Input,{id:"accountNumber",name:"accountNumber",placeholder:"Account Number",type:"text",value:e.accountNumber||"",onChange:this.handleChange,autoComplete:"off"})))))}},{key:"renderImages",value:function(e){var t=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Alert,{color:"primary"},"Upload image as profile photo for your store"))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("div",{className:"upload-photo",style:{margin:"10px auto",border:"1px solid #ccc",backgroundColor:"#efefef"}},o.a.createElement(_.Input,{name:"images",label:"upload file",type:"file",onChange:this.handleFileUpload,style:ca}),o.a.createElement("ul",{className:"product-photos"},e.photos&&e.photos.length>0&&o.a.createElement(o.a.Fragment,null,e.photos.map(function(e){var a=e.original,n=e.thumb,r=e._id;return o.a.createElement("li",{key:r},o.a.createElement("img",{alt:a,title:r,src:n}),o.a.createElement("button",{"data-id":r,type:"button",onClick:t.removeImage,className:"remove-image"},o.a.createElement("span",{style:{color:"#fefefe"}},"\xd7")))})),this.state.isUploading&&o.a.createElement("li",{style:{border:"0",padding:"10px"}},o.a.createElement(Ve.SyncLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isUploading}))))))))}},{key:"renderNoPageAdded",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"No Page Added"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You have not added a page yet. Click"," "," ",o.a.createElement(ie.a,{to:"/add-page"},"here")," "," ","to add a new page.")))))))}},{key:"renderCities",value:function(e){if(e&&e.length>0)return e.filter(function(e){return e.isActive=!0}).map(function(e,t){return o.a.createElement("option",{key:t,value:e.name},e.name)})}},{key:"render",value:function(){var e=this.state.pageCategories,t=e.filter(function(e){return!e.parent}),a=e.filter(function(e){return e.parent}),n=JSON.parse(N("hasCategories")),r=JSON.parse(N("hasProducts")),l=JSON.parse(N("pageInfo")),s=[];t&&t.forEach(function(e){var t=e._id.toString(),n=e.name,r=a.filter(function(e){return e.parent.toString()===t}),o=[];if(r instanceof Array&&r.length>0){var l=[];r.forEach(function(e){var t={value:e._id,label:e.name,children:[]};l.push(t)}),o=l}var i={value:t,label:n,children:o};s.push(i)});var i=this.state.pageAmenities,c=[];i&&i.forEach(function(e){var t=e._id,a=e.type[0].name,n=e.features,r=[];if(n instanceof Array&&n.length>0){var o=[];n.forEach(function(e){var t={value:e._id,label:e.name,children:[]};o.push(t)}),r=o}var l={value:t,label:a,children:r};c.push(l)});var d={check:o.a.createElement(me.a,{className:"rct-icon rct-icon-check",icon:["far","check-square"]}),uncheck:o.a.createElement(me.a,{className:"rct-icon rct-icon-uncheck",icon:["far","square"]}),halfCheck:o.a.createElement(me.a,{className:"rct-icon rct-icon-half-check",icon:["far","check-square"]}),expandClose:o.a.createElement(me.a,{className:"rct-icon rct-icon-expand-close",icon:"chevron-right"}),expandOpen:o.a.createElement(me.a,{className:"rct-icon rct-icon-expand-open",icon:"chevron-down"}),expandAll:o.a.createElement(me.a,{className:"rct-icon rct-icon-expand-all",icon:"plus-square"}),collapseAll:o.a.createElement(me.a,{className:"rct-icon rct-icon-collapse-all",icon:"minus-square"}),parentClose:o.a.createElement(me.a,{className:"rct-icon rct-icon-parent-close",icon:["far","folder"]}),parentOpen:o.a.createElement(me.a,{className:"rct-icon rct-icon-parent-open",icon:["far","folder-open"]}),leaf:o.a.createElement(me.a,{className:"rct-icon rct-icon-leaf-close",icon:["far","file"]})};return this.state.isLoading?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Edit Page")),o.a.createElement(_.CardBody,null,o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading}))))))):this.state.pageExists?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.Form,{onSubmit:this.handleSubmit,onKeyPress:this.onKeyPress},o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Edit Page - ",o.a.createElement("em",null,this.state.place.name))),o.a.createElement(_.CardBody,null,!l.hideTutorials&&o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Alert,{className:"alert-compact",color:"primary",isOpen:!l.hideTutorials,toggle:this.onDismiss,fade:!1},o.a.createElement("h4",{className:"alert-heading"},"New on Setup Store?"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"Check our videos here on how to setup your store.",o.a.createElement("br",null)),o.a.createElement("a",{className:"btn btn-sm btn-primary-v2",href:"https://www.youtube.com/watch?v=k8VEDqbPv7w"},"View Tutorials"),o.a.createElement(_.Button,{className:"btn-fill btn-sm",color:"danger",type:"button",onClick:this.onHideTutorials},"Hide Permanently")))),o.a.createElement(_.Row,null,!0!==this.state.place.isVerified&&o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Alert,{color:"warning"},o.a.createElement("h4",{className:"alert-heading"},"You Have Not Agreed with our Terms & Policies"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You must agree  with our Terms & Policies. Click "," "," ",o.a.createElement(ie.a,{to:"/statement-of-agreement"},"here")," "," "," to read our Terms & Policies."))))),this.state.place.isVerified&&n&&r&&!0!==this.state.place.isActive&&o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"Store Not Activated"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You must activate your store so it will appear in the app and you can start selling.",o.a.createElement("br",null),"Click "," "," ",o.a.createElement(ie.a,{to:"/activate-store"},"here")," "," "," to activate you store."))))),o.a.createElement(_.Col,{sm:"12",md:"3",lg:"3"},this.renderVerticalNavBar()),o.a.createElement(_.Col,{sm:"12",md:"9",lg:"9"},this.state.warnings&&this.state.warnings.length>0&&o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},this.state.warnings.map(function(e,t){return o.a.createElement(_.Alert,{key:t,color:"warning"},o.a.createElement(me.a,{icon:"exclamation-triangle"})," ",e)}))),"page-info"===this.state.activeStep&&!0===this.state.steps.pageInfo?this.renderPageInfo(this.state.place):"address"===this.state.activeStep&&!0===this.state.steps.address?this.renderAddress(this.state.place):"page-category"===this.state.activeStep&&!0===this.state.steps.pageCategory?this.renderPageCategory(c,s,d):"other-settings"===this.state.activeStep&&!0===this.state.steps.otherSettings?this.renderOtherSettings(this.state.place):"bank-info"===this.state.activeStep&&!0===this.state.steps.bankInfo?this.renderBankInfo(this.state.place):"images"===this.state.activeStep&&!0===this.state.steps.images?this.renderImages(this.state.place):this.renderPageInfo(this.state.place)))),o.a.createElement(_.CardFooter,null,o.a.createElement(_.Button,{className:"btn-fill btn-round",color:"info",type:"submit"},"Save"),o.a.createElement(ie.a,{to:"/products",className:"btn btn-round btn-light"},"Back")))))),o.a.createElement(z.a,{active:this.state.isSaving,spinner:!0,text:"Saving..."}))):this.renderNoPageAdded()}}]),t}(o.a.Component),ma=Object(E.b)(function(){return{}},{getPageById:X,getProductTypes:xe,getProviderInfo:M,getPageTypes:ee,getPageCategories:te,getAmenities:ae,updatePage:$,uploadPhoto:function(e,t,a,n){return function(r,o){D(a).post("/business/places/".concat(e,"/media"),t).then(function(e){if(e&&e.data)return n(null,e.data)}).catch(function(e){n(e,null)})}},removePhoto:function(e,t,a,n){return function(r,o){D(a).delete("business/places/".concat(e,"/media/").concat(t)).then(function(e){if(e&&e.data)return n(null,e.data)}).catch(function(e){n(e,null)})}}})(da),ua=function(e){function t(e){var a;Object(i.a)(this,t);var n=JSON.parse(N("userData")),r={};return null!=n&&(r=n.info),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;"checkbox"===t.type&&(r=e.target.checked);"phoneNumber"===n&&(pa.exec(r)?a.setState({validPhoneNumber:!0}):a.setState({validPhoneNumber:!1}));a.setState({user:Object(A.a)({},a.state.user,Object(T.a)({},n,r))})},a.handleSubmit=function(e){e.preventDefault();var t,n=JSON.parse(N("userData")),r="",o=a.state.validPhoneNumber;if(n?(r=n.sessionToken,t=Object(A.a)({},a.state.user)):(a.props.history.push("/login"),window.location.reload()),t)if(t.email&&t.phoneNumber&&t.firstName&&t.lastName&&o){if(!window.confirm("Do you want to save these changes?"))return!1;a.setState({submitted:!0,isSaving:!0}),a.props.updateProfile(t,r,function(e,t){t?(n.firstName=a.state.user.firstName,n.lastName=a.state.user.lastName,n.email=a.state.user.email,n.homeAddress=a.state.user.homeAddress,n.info.firstName=a.state.user.firstName,n.info.lastName=a.state.user.lastName,n.info.name=a.state.user.firstName+" "+a.state.user.lastName,n.info.homeAddress=a.state.user.homeAddress,S("userData",JSON.stringify(n)),setTimeout(function(){a.setState({submitted:!1,isSaving:!1}),t&&t.message&&a.showNotification(t.message)},1e3)):e?e.response&&e.response.status&&403===e.response.status?(setTimeout(function(){a.setState({submitted:!1,isSaving:!1}),a.props.history.push("/products")},1e3),a.showNotificationError("You are not allowed to update this product.")):a.showNotificationError(e.error):(setTimeout(function(){a.setState({submitted:!1,isSaving:!1})},1e3),a.showNotificationError("An unknown error occured. Please try again."))})}else a.setState({submitted:!0}),a.showNotificationError("Some fields are required. Please fill the required fields.");else setTimeout(function(){a.setState({submitted:!1,isSaving:!1})},1e3),a.showNotificationError("Product information is missing.")},a.state={userExist:!1,isLoading:!1,isSaving:!1,submitted:!1,user:{firstName:r.firstName,lastName:r.lastName,email:n.email,phoneNumber:r.mobileNumber,homeAddress:r.homeAddress,photos:r.photos?r.photos:null},validPhoneNumber:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"render",value:function(){return this.state.isLoading?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Account Settings")),o.a.createElement(_.CardBody,null,o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading}))))))):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Account Settings")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",sm:"4"},o.a.createElement(_.Nav,{vertical:!0},o.a.createElement(ie.a,{className:"nav-link-vertical active-link",to:"/settings"},"Profile ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))),o.a.createElement(ie.a,{className:"nav-link-vertical",to:"/settings/change-password"},"Change Password ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))))),o.a.createElement(_.Col,{className:"pl-md-1",sm:"8"},o.a.createElement(_.Form,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{className:"control-label",htmlFor:"email"},"Email address"),o.a.createElement(_.Input,{name:"email",placeholder:"Email",type:"email",defaultValue:this.state.user.email,onChange:this.handleChange}))),o.a.createElement(_.Col,{className:"pl-md-1",md:"6"},o.a.createElement(_.FormGroup,{className:!this.state.submitted||this.state.user.phoneNumber||this.state.validPhoneNumber?"":" has-danger"},o.a.createElement("label",{className:"control-label",htmlFor:"phoneNumber"},"Phone No."),o.a.createElement(_.Input,{name:"phoneNumber",placeholder:"Phone No.",type:"text",defaultValue:this.state.user.phoneNumber,onChange:this.handleChange}),this.state.submitted&&!this.state.validPhoneNumber&&o.a.createElement("span",{className:"text-danger"},"Phone No. is not valid")))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{className:"control-label",htmlFor:"firstName"},"First Name"),o.a.createElement(_.Input,{name:"firstName",placeholder:"First Name",type:"text",defaultValue:this.state.user.firstName,onChange:this.handleChange}))),o.a.createElement(_.Col,{className:"pl-md-1",md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{className:"control-label",htmlFor:"lastName"},"Last Name"),o.a.createElement(_.Input,{name:"lastName",placeholder:"Last Name",type:"text",defaultValue:this.state.user.lastName,onChange:this.handleChange})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{className:"control-label",htmlFor:"homeAddress"},"Living In"),o.a.createElement(_.Input,{name:"homeAddress",placeholder:"Living In",type:"text",defaultValue:this.state.user.homeAddress,onChange:this.handleChange})))))))),o.a.createElement(_.CardFooter,null,o.a.createElement(_.Button,{className:"btn-fill btn-round",color:"info",type:"submit",onClick:this.handleSubmit},"Save")))))),o.a.createElement(z.a,{active:this.state.isSaving,spinner:!0,text:"Saving..."}))}}]),t}(o.a.Component),pa=/^\(?([0-9]{11})$/,ha=Object(E.b)(function(){return{}},{getProviderInfo:M,updateProfile:B})(ua),ga=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={isSaving:!1,oldPassword:"",newPassword:"",confirmPassword:"",oldPasswordReqText:"",newPasswordReqText:"",confirmPasswordReqText:""},a.handleChange=a.handleChange.bind(Object(se.a)(Object(se.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(se.a)(Object(se.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(T.a)({},a,n)),"oldPassword"===a?this.setState({oldPasswordReqText:""}):"newPassword"===a?this.setState({newPasswordReqText:""}):"confirmPassword"===a&&this.setState({confirmPasswordReqText:""})}},{key:"handleSubmit",value:function(e){var t=this,a=JSON.parse(N("userData")).sessionToken,n=this.state,r=n.oldPassword,o=n.newPassword,l=n.confirmPassword;if(r&&o&&l)if(r===o)this.showNotificationError("New password is the same as the old password!");else if(o===l){this.setState({isSaving:!0});var s={oldPassword:r,password:o,confirmPassword:l};this.props.changePassword(s,a,function(e,a){!e&&a?"success"===a.status?(t.setState({isSaving:!1,oldPassword:"",newPassword:"",confirmPassword:""}),t.showNotification(a.message),setTimeout(function(){if(localStorage.clear(),null===N("userData"))return t.props.history.push("/login"),window.location.reload(),t.setState({loggedIn:!1})},2e3)):setTimeout(function(){t.setState({isSaving:!1}),t.showNotificationError(a.message)},1e3):(e&&t.showNotificationError(e.response),setTimeout(function(){t.setState({isSaving:!1})},1e3))})}else this.showNotificationError("New password did not match!");else r?this.setState({oldPasswordReqText:""}):this.setState({oldPasswordReqText:"Old Password is required"}),o?this.setState({newPasswordReqText:""}):this.setState({newPasswordReqText:"Password is required"}),l?this.setState({confirmPasswordReqText:""}):this.setState({confirmPasswordReqText:"Password confirmation is required"})}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Account Settings")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",sm:"4"},o.a.createElement(_.Nav,{vertical:!0},o.a.createElement(ie.a,{className:"nav-link-vertical",to:"/settings"},"Profile  ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))),o.a.createElement(ie.a,{className:"nav-link-vertical active-link",to:"/change-password"},"Change Password ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))))),o.a.createElement(_.Col,{className:"pl-md-1",sm:"8"},o.a.createElement(_.Form,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",md:"6"},o.a.createElement(_.FormGroup,{className:this.state.oldPasswordReqText?"has-danger":""},o.a.createElement("label",{htmlFor:"oldPassword",className:"control-label"},"Old Password"),o.a.createElement(_.Input,{id:"oldPassword",name:"oldPassword",type:"password",value:this.state.oldPassword,onChange:this.handleChange,style:{marginBottom:"10px"}}),o.a.createElement("span",{className:"text-danger"},this.state.oldPasswordReqText)))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",md:"6"},o.a.createElement(_.FormGroup,{className:this.state.newPasswordReqText?"has-danger":""},o.a.createElement("label",{htmlFor:"newPassword",className:"control-label"},"New Password"),o.a.createElement(_.Input,{id:"newPassword",name:"newPassword",type:"password",value:this.state.newPassword,onChange:this.handleChange,style:{marginBottom:"10px"}}),o.a.createElement("span",{className:"text-danger"},this.state.newPasswordReqText)))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",md:"6"},o.a.createElement(_.FormGroup,{className:this.state.confirmPasswordReqText?"has-danger":""},o.a.createElement("label",{htmlFor:"confirmPassword",className:"control-label"},"Confirm Password"),o.a.createElement(_.Input,{id:"confirmPassword",name:"confirmPassword",type:"password",value:this.state.confirmPassword,onChange:this.handleChange,style:{marginBottom:"10px"}}),o.a.createElement("span",{className:"text-danger"},this.state.confirmPasswordReqText)))))))),o.a.createElement(_.CardFooter,null,o.a.createElement(_.Button,{className:"btn-fill btn-round",color:"info",type:"submit",onClick:this.handleSubmit},"Save"))))),o.a.createElement(z.a,{active:this.state.isSaving,spinner:!0,text:"Saving..."})))}}]),t}(o.a.Component),fa=Object(E.b)(function(){return{}},{getProviderInfo:M,changePassword:function(e,t,a){return function(n,r,o){var l=o.api,s=e;l(t).patch("/provider/change-password",s).then(function(e){if(e&&e.data)return a(null,e.data);a(e,null)}).catch(function(e){a(e,null)})}}})(ga),Ea=a(151),ya=a.n(Ea),va=(a(194),function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChangeStartDate=function(e){var t=ya()(e,"isoDate");a.setState({startDate:e}),a.setState({startDateStr:t})},a.handleChangeEndDate=function(e){var t=ya()(e,"isoDate");a.setState({endDate:e}),a.setState({endDateStr:t})},a.handleChangePaymentMethod=function(e){var t=e.target.value;a.setState({selectedPaymentMethod:t})},a.handleToggleShowTests=function(e){a.setState(function(e){return{showTests:!e.showTests}})},a.onDismiss=function(){a.setState({hideTutorials:!0});var e=JSON.parse(N("pageInfo"));e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))},a.onHideTutorials=function(){if(!window.confirm("Are you sure you want to hide this section permanently?"))return!1;var e=JSON.parse(N("pageInfo")),t=JSON.parse(N("userData")).sessionToken;D(t).patch("/provider/places/".concat(e._id),{hideTutorials:!0}).then(function(t){t&&t.data&&"ok"===t.data.status?(a.setState({hideTutorials:!0}),e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))):a.showNotificationError("An unknown error occured. Please try again!")}).catch(function(e){a.setState({submitted:!1,isSaving:!1}),e.response&&"string"===typeof e.response?a.showNotificationError(e.response):a.showNotificationError("An unknown error occured. Please try again!")})},a.generateList=function(){var e="",t=JSON.parse(N("defaultPage"));e="desc"!==a.state.sort?"desc":"asc";var n=a.props.location.search,r=je.a.parse(n);r.dateStart=a.state.startDateStr,r.dateEnd=a.state.endDateStr,""!==a.state.selectedPaymentMethod&&(r.selectedPaymentMethod=a.state.selectedPaymentMethod),a.state.showTests&&(r.showTests=a.state.showTests),r.pageId=t;var o="?"+je.a.stringify(r);a.setState({sort:e}),a.setState({sortBy:"price"}),a.generateTxnsList(o)},a.exportList=function(){a.setState({isGeneratingXls:!0});var e="",t=JSON.parse(N("userData")),n=JSON.parse(N("defaultPage")),r=JSON.parse(N("pageInfo")),o=t.sessionToken;e="desc"!==a.state.sort?"desc":"asc";var l=a.props.location.search,s=je.a.parse(l);s.dateStart=a.state.startDateStr,s.dateEnd=a.state.endDateStr,""!==a.state.selectedPaymentMethod&&(s.selectedPaymentMethod=a.state.selectedPaymentMethod),a.state.showTests&&(s.showTests=a.state.showTests),s.pageId=n,a.setState({sort:e}),a.setState({sortBy:"price"}),null!==t?r&&(a.state.isGrocery?a.props.getSalesListGroceryXls(s,o,function(e,t){if(t&&t.data&&"success"===t.data.status&&t.data.filename){var n=t.data.filename;a.setState({isGeneratingXls:!1}),window.open(n)}else a.setState({isGeneratingXls:!1}),a.showNotificationError("No transactions found.")}):a.props.getSalesListXls(s,o,function(e,t){if(t&&t.data&&"success"===t.data.status&&t.data.filename){var n=t.data.filename;a.setState({isGeneratingXls:!1}),window.open(n)}else a.setState({isGeneratingXls:!1}),a.showNotificationError("No transactions found.")})):a.setState({isGeneratingXls:!1})};var n=ya()(new Date,"isoDate");return a.state={page:{},transactions:[],startDate:new Date,endDate:new Date,startDateStr:n,endDateStr:n,selectedPaymentMethod:"",showTests:!1,pagination:{},activePage:1,sortBy:"",sort:"",status:"paid",isGrocery:!1,isLoading:!1,isGeneratingXls:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("userData")),a=JSON.parse(N("defaultPage")),n=JSON.parse(N("pageInfo")),r=t.sessionToken;n&&"5cd141d10d437be772373ddb"===n.pageType&&this.setState({isGrocery:!0}),a&&""!==a&&this.props.getPageById(a,r,function(t,a){if(t)e.showNotificationError("An error occured. Cannot find the page information!");else if(a){var n=a.page,r=n._id,o=n.name,l=n.addressLine1,s=n.city,i=n.province,c=n.email,d=n.balances;e.setState({page:{_id:r,name:o,address:l,city:s,province:i,email:c,balances:d}})}else e.showNotificationError("Page not found.")})}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"generateTxnsList",value:function(e){var t=this;this.setState({isLoading:!0});var a=je.a.parse(e),n=JSON.parse(N("userData")),r=JSON.parse(N("pageInfo")),o=n.sessionToken;null!==n&&r&&(this.state.isGrocery?this.props.getSalesListGrocery(a,o,function(e,a){if(!e&&a&&a.data){var n=a.data;t.setState({transactions:n})}t.setState({isLoading:!1})}):this.props.getSalesList(a,o,function(e,a){if(!e&&a&&a.data){var n=Object(Ne.a)(a.data);t.setState({transactions:n})}t.setState({isLoading:!1})}))}},{key:"renderRows",value:function(e){var t=20;return this.state.isGrocery&&(t=20),this.state.isLoading?o.a.createElement("tr",null,o.a.createElement("td",{colSpan:t},o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading}))):e instanceof Array&&e.length>0?this.state.isGrocery?e.map(function(e,t){return o.a.createElement("tr",{key:t},o.a.createElement("td",{style:{whiteSpace:"nowrap"}},Object(_e.default)(new Date(e.createdAt),"MMM dd, yyyy"),o.a.createElement("br",null),Object(_e.default)(new Date(e.createdAt),"hh:mm:aa")),o.a.createElement("td",{style:{whiteSpace:"nowrap"}},Object(_e.default)(new Date(e.bookedForDate),"MMM dd, yyyy"),o.a.createElement("br",null),Object(_e.default)(new Date(e.bookedForDate),"hh:mm:aa")),o.a.createElement("td",{style:{whiteSpace:"nowrap"}},e.datePaid&&Object(_e.default)(new Date(e.datePaid),"MMM dd, yyyy"),o.a.createElement("br",null),e.datePaid&&Object(_e.default)(new Date(e.datePaid),"hh:mm:aa")),o.a.createElement("td",null,"...",Na(e._id)),o.a.createElement("td",null,e.selectedPaymentOption?e.selectedPaymentOption.toUpperCase():"N/A"),o.a.createElement("td",null,"\u20b1",ba(e.grossSales)),o.a.createElement("td",null,"\u20b1",ba(e.pointsAmountUsed)),o.a.createElement("td",null,"\u20b1",ba(e.walletAmountUsed)),o.a.createElement("td",null,"\u20b1",ba(e.discount)),o.a.createElement("td",null,"\u20b1",ba(e.promosAmountStreetby)),o.a.createElement("td",null,"\u20b1",ba(e.promosAmountMerchant)),o.a.createElement("td",null,"\u20b1",ba(e.merchantNet)),o.a.createElement("td",null,"\u20b10.00"),o.a.createElement("td",null,Sa(e.bookingOption)),o.a.createElement("td",{style:{width:"500px"}},e.customer.firstName+" "+e.customer.lastName),o.a.createElement("td",null,e.customer.email),o.a.createElement("td",{style:{width:"500px"}},e.customerLocation))}):e.map(function(e,t){return o.a.createElement("tr",{key:t},o.a.createElement("td",{style:{whiteSpace:"nowrap"}},Object(_e.default)(new Date(e.createdAt),"MMM dd, yyyy"),o.a.createElement("br",null),Object(_e.default)(new Date(e.createdAt),"hh:mm:aa")),o.a.createElement("td",{style:{whiteSpace:"nowrap"}},Object(_e.default)(new Date(e.bookedForDate),"MMM dd, yyyy"),o.a.createElement("br",null),Object(_e.default)(new Date(e.bookedForDate),"hh:mm:aa")),o.a.createElement("td",{style:{whiteSpace:"nowrap"}},e.datePaid&&Object(_e.default)(new Date(e.datePaid),"MMM dd, yyyy"),o.a.createElement("br",null),e.datePaid&&Object(_e.default)(new Date(e.datePaid),"hh:mm:aa")),o.a.createElement("td",null,"...",Na(e._id)),o.a.createElement("td",{style:{whiteSpace:"nowrap"}},e.selectedPaymentOption?e.selectedPaymentOption.toUpperCase():"N/A"),o.a.createElement("td",null,"\u20b1",ba(e.grossSales)),o.a.createElement("td",null,"\u20b1",ba(e.pointsAmountUsed)),o.a.createElement("td",null,"\u20b1",ba(e.walletAmountUsed)),o.a.createElement("td",null,"\u20b1",ba(e.discount)),o.a.createElement("td",null,"\u20b1",ba(e.promosAmountStreetby)),o.a.createElement("td",null,"\u20b1",ba(e.promosAmountMerchant)),o.a.createElement("td",null,"\u20b1",ba(e.netCustomerPayout)),o.a.createElement("td",null,"\u20b1",ba(e.streetbyFees)),o.a.createElement("td",null,"\u20b1",ba(e.merchantNet)),o.a.createElement("td",null,"\u20b1",ba(e.extraFees)),o.a.createElement("td",null,Sa(e.bookingOption)),o.a.createElement("td",{style:{width:"500px"}},e.customer.firstName+" "+e.customer.lastName),o.a.createElement("td",null,e.customer.email),o.a.createElement("td",{style:{width:"500px"}},e.customerLocation))}):o.a.createElement("tr",null,o.a.createElement("td",{colSpan:t},o.a.createElement("h5",{className:"text-danger"},o.a.createElement("em",null,"No transactions found."))))}},{key:"renderNoPageAdded",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"No Page Added"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You have not added a page yet. Click"," "," ",o.a.createElement(ie.a,{to:"/add-page"},"here")," "," ","to add a new page.")))))))}},{key:"renderPageNotVerified",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"You Have Not Agreed with our Terms & Policies"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You must agree  with our Terms & Policies. Click "," "," ",o.a.createElement(ie.a,{to:"/statement-of-agreement"},"here")," "," "," to read our Terms & Policies.")))))))}},{key:"renderNoProductsAdded",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"No Products Added"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You need to add a product before you can activate your store. Click"," "," ",o.a.createElement(ie.a,{to:"/products/new"},"here")," "," ","to add a product.")))))))}},{key:"render",value:function(){var e=JSON.parse(N("pageInfo")),t=JSON.parse(N("hasCategories")),a=JSON.parse(N("hasProducts"));return e&&e._id?!0===e.isVerified?!0===a?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Sales Reports - ",o.a.createElement("em",null,this.state.page.name)),!e.hideTutorials&&o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Alert,{className:"alert-compact",color:"primary",isOpen:!this.state.hideTutorials,toggle:this.onDismiss,fade:!1},o.a.createElement("h4",{className:"alert-heading"},"New on Sales Reports?"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"Check our videos here on how to manage your Sales Reports.",o.a.createElement("br",null)),o.a.createElement("a",{className:"btn btn-sm btn-primary-v2",href:"https://www.youtube.com/watch?v=k8VEDqbPv7w"},"View Tutorials"),o.a.createElement(_.Button,{className:"btn-fill btn-sm",color:"danger",type:"button",onClick:this.onHideTutorials},"Hide Permanently")))))),o.a.createElement(_.Row,null,t&&a&&!0!==e.isActive&&o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"Store Not Activated"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You must activate your store so it will appear in the app and you can start selling.",o.a.createElement("br",null),"Click "," "," ",o.a.createElement(ie.a,{to:"/activate-store"},"here")," "," "," to activate you store."))))),o.a.createElement(_.Col,{className:"pr-md-1",md:"3"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"startDate",className:"control-label",style:{display:"block"}},"Start Date"),o.a.createElement(bt.a,{name:"startDate",className:"form-control",selectsStart:!0,startDate:this.state.startDate,endDate:this.state.endDate,selected:this.state.startDate,onChange:this.handleChangeStartDate}))),o.a.createElement(_.Col,{className:"px-md-1",md:"3"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"endDate",className:"control-label",style:{display:"block"}},"End Date"),o.a.createElement(bt.a,{name:"endDate",selectsEnd:!0,startDate:this.state.startDate,endDate:this.state.endDate,className:"form-control",selected:this.state.endDate,onChange:this.handleChangeEndDate}))),o.a.createElement(_.Col,{className:"px-md-1",md:"3"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"paymentMethod",className:"control-label"},"Payment Method"),o.a.createElement(_.Input,{id:"paymentMethod",name:"paymentMethod",type:"select",onChange:this.handleChangePaymentMethod,value:this.state.selectedPaymentMethod},o.a.createElement("option",{value:""},"All"),o.a.createElement("option",{value:"cash"},"Cash"),o.a.createElement("option",{value:"gcash"},"G-Cash"),o.a.createElement("option",{value:"paynamics"},"Paynamics"),o.a.createElement("option",{value:"paymongo"},"Paymongo"),o.a.createElement("option",{value:"cc"},"Paypal"),o.a.createElement("option",{value:"direct-transfer"},"Direct Transfer")))),o.a.createElement(_.Col,{className:"pr-md-1",md:"3"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{className:"control-label"},o.a.createElement("br",null),o.a.createElement(Ue.a,{onClick:this.handleToggleShowTests,on:this.state.showTests}),"\xa0Show Test Txns")))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Button,{className:"btn-round",color:"info",type:"button",onClick:this.generateList},"Generate"),o.a.createElement(_.Button,{className:"btn-round",color:"info",type:"button",onClick:this.exportList},"Export"))))),o.a.createElement(_.CardBody,null,o.a.createElement(_.Table,{className:"tablesorter table-striped fs12",responsive:!0},o.a.createElement("thead",{className:"text-primary bg-gray"},o.a.createElement("tr",null,this.state.isGrocery?o.a.createElement(o.a.Fragment,null,o.a.createElement("th",null,"Date Placed"),o.a.createElement("th",null,"Booked For Date"),o.a.createElement("th",null,"Date Paid"),o.a.createElement("th",null,"Order ID"),o.a.createElement("th",null,"Payment Method"),o.a.createElement("th",null,"Gross Amount"),o.a.createElement("th",null,"SB Points"),o.a.createElement("th",null,"SB Wallet"),o.a.createElement("th",null,"SB Discounts"),o.a.createElement("th",null,"SB Promos"),o.a.createElement("th",null,"Merchant Promos"),o.a.createElement("th",null,"Net Amount"),o.a.createElement("th",null,"Fee"),o.a.createElement("th",null,"Booking Option"),o.a.createElement("th",null,"Customer Name"),o.a.createElement("th",null,"Customer Email"),o.a.createElement("th",null,"Customer Location")):o.a.createElement(o.a.Fragment,null,o.a.createElement("th",null,"Date Placed"),o.a.createElement("th",null,"Booked For Date"),o.a.createElement("th",null,"Date Paid"),o.a.createElement("th",null,"Order ID"),o.a.createElement("th",null,"Payment Method"),o.a.createElement("th",null,"Gross Sales"),o.a.createElement("th",null,"SB Points"),o.a.createElement("th",null,"SB Wallet"),o.a.createElement("th",null,"SB Discounts"),o.a.createElement("th",null,"SB Promos"),o.a.createElement("th",null,"Merchant Promos"),o.a.createElement("th",null,"Net Customer Payout"),o.a.createElement("th",null,"StreetBy Fees"),o.a.createElement("th",null,"Merchant Net"),o.a.createElement("th",null,"Product Charges/Fees"),o.a.createElement("th",null,"Booking Option"),o.a.createElement("th",null,"Customer Name"),o.a.createElement("th",null,"Customer Email"),o.a.createElement("th",null,"Customer Location")))),o.a.createElement("tbody",null,this.renderRows(this.state.transactions)))),o.a.createElement(_.CardFooter,null))))),o.a.createElement(z.a,{active:this.state.isGeneratingXls,spinner:!0,text:"Generating..."})):this.renderNoProductsAdded():this.renderPageNotVerified():this.renderNoPageAdded()}}]),t}(o.a.Component)),ba=function(e){return"number"===typeof e?Aa(e).replace(/\B(?=(\d{3})+(?!\d))/g,","):"0.00"},Aa=function(e,t){if(void 0===t&&(t=2),0!==e&&(!e||isNaN(e)))throw new Error("price is not a number"+e);return parseFloat(Math.round(100*e)/100).toFixed(t)},Na=function(e){var t=e.toString();return"..."+(new Array(t.length-6+1).join("")+t.slice(-6))},Sa=function(e){if("string"===typeof e&&e.length>0)return e.replace(/^./,e[0].toUpperCase())},Ca=Object(E.b)(function(){return{}},{getSalesList:function(e,t,a){return function(){D(t).get("/provider/salesV2",{params:e}).then(function(e){if(e)return a(null,e);a(e,null)}).catch(function(e){a(e,null)})}},getSalesListGrocery:function(e,t,a){return function(){D(t).get("/provider/grocery/sales",{params:e}).then(function(e){if(e)return a(null,e);a(e,null)}).catch(function(e){a(e,null)})}},getSalesListXls:function(e,t,a){return function(){D(t).get("/provider/sales-list-xls",{params:e}).then(function(e){if(e)return a(null,e);a(e,null)}).catch(function(e){a(e,null)})}},getSalesListGroceryXls:function(e,t,a){return function(){D(t).get("/provider/sales-list-grocery-xls",{params:e}).then(function(e){if(e)return a(null,e);a(e,null)}).catch(function(e){a(e,null)})}},getPageById:X})(va),wa=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChangeStartDate=function(e){var t=new Date(e).toISOString();a.setState({startDate:e}),a.setState({startDateStr:t})},a.handleChangeEndDate=function(e){var t=new Date(e).toISOString();a.setState({endDate:e}),a.setState({endDateStr:t})},a.handleChangePaymentMethod=function(e){var t=e.target.value;a.setState({selectedPaymentMethod:t})},a.handleChangeStatus=function(e){var t=e.target.value;a.setState({status:t})},a.handleChangeDebugMode=function(e){a.setState(function(e){return{debugMode:!e.debugMode}})},a.onDismiss=function(){a.setState({hideTutorials:!0});var e=JSON.parse(N("pageInfo"));e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))},a.onHideTutorials=function(){if(!window.confirm("Are you sure you want to hide this section permanently?"))return!1;var e=JSON.parse(N("pageInfo")),t=JSON.parse(N("userData")).sessionToken;D(t).patch("/provider/places/".concat(e._id),{hideTutorials:!0}).then(function(t){t&&t.data&&"ok"===t.data.status?(a.setState({hideTutorials:!0}),e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))):a.showNotificationError("An unknown error occured. Please try again!")}).catch(function(e){a.setState({submitted:!1,isSaving:!1}),e.response&&"string"===typeof e.response?a.showNotificationError(e.response):a.showNotificationError("An unknown error occured. Please try again!")})},a.generateList=function(){var e="",t=JSON.parse(N("defaultPage"));e="desc"!==a.state.sort?"desc":"asc";var n=a.props.location.search,r=je.a.parse(n);r.dateStart=a.state.startDateStr,r.dateEnd=a.state.endDateStr,""!==a.state.selectedPaymentMethod&&(r.selectedPaymentMethod=a.state.selectedPaymentMethod),""!==a.state.status&&(r.status=a.state.status),a.state.debugMode&&(r.debugMode=a.state.debugMode),r.pageId=t;var o="?"+je.a.stringify(r);a.setState({sort:e}),a.setState({sortBy:"price"}),a.generateTxnsList(o)},a.exportList=function(){a.setState({isGeneratingXls:!0});var e="",t=JSON.parse(N("userData")),n=JSON.parse(N("defaultPage")),r=t.sessionToken;e="desc"!==a.state.sort?"desc":"asc";var o=a.props.location.search,l=je.a.parse(o);l.dateStart=a.state.startDateStr,l.dateEnd=a.state.endDateStr,""!==a.state.selectedPaymentMethod&&(l.selectedPaymentMethod=a.state.selectedPaymentMethod),""!==a.state.status&&(l.status=a.state.status),a.state.debugMode&&(l.debugMode=a.state.debugMode),l.pageId=n,a.setState({sort:e}),a.setState({sortBy:"price"}),null!==t?a.props.getOrderListXls(l,r,function(e,t){if(t&&t.data&&"success"===t.data.status&&t.data.filename){var n=t.data.filename;a.setState({isGeneratingXls:!1}),window.open(n)}else a.setState({isGeneratingXls:!1}),a.showNotificationError("No transactions found.")}):a.setState({isGeneratingXls:!1})};var n=(new Date).toISOString();return a.state={page:{},transactions:[],startDate:new Date,endDate:new Date,startDateStr:n,endDateStr:n,selectedPaymentMethod:"",pagination:{},activePage:1,sortBy:"",sort:"",status:"paid",isLoading:!1,isGrocery:!1,isGeneratingXls:!1,debugMode:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("userData")),a=JSON.parse(N("defaultPage")),n=t.sessionToken,r=JSON.parse(N("pageInfo"));r&&"5cd141d10d437be772373ddb"===r.pageType&&this.setState({isGrocery:!0}),a&&""!==a&&this.props.getPageById(a,n,function(t,a){if(t)e.showNotificationError("An error occured. Cannot find the page information!");else if(a){var n=a.page,r=n._id,o=n.name,l=n.addressLine1,s=n.city,i=n.province,c=n.email,d=n.balances;e.setState({page:{_id:r,name:o,address:l,city:s,province:i,email:c,balances:d}})}else e.showNotificationError("Page not found.")})}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"generateTxnsList",value:function(e){var t=this;this.setState({isLoading:!0});var a=je.a.parse(e),n=JSON.parse(N("userData")),r=JSON.parse(N("pageInfo")),o=n.sessionToken;null!==n&&r&&(this.state.isGrocery?this.props.getOrdersListGrocery(a,o,function(e,a){if(!e&&a&&a.data){var n=a.data;t.setState({transactions:n})}t.setState({isLoading:!1})}):this.props.getOrdersList(a,o,function(e,a){if(!e&&a&&a.data){var n=a.data;t.setState({transactions:n})}t.setState({isLoading:!1})}))}},{key:"renderRows",value:function(){var e=13;return this.state.isGrocery&&(e=12),this.state.isLoading?o.a.createElement("tr",null,o.a.createElement("td",{colSpan:e},o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading}))):this.state.transactions instanceof Array&&this.state.transactions.length>0?this.state.transactions.map(function(e,t){return o.a.createElement("tr",{key:t},o.a.createElement("td",{style:{whiteSpace:"nowrap"}},Object(_e.default)(new Date(e.createdAt),"MMM dd, yyyy"),o.a.createElement("br",null),Object(_e.default)(new Date(e.createdAt),"hh:mm:aa")),o.a.createElement("td",{style:{whiteSpace:"nowrap"}},e.datePaid&&Object(_e.default)(new Date(e.datePaid),"hh:mm:aa"),o.a.createElement("br",null),e.datePaid&&Object(_e.default)(new Date(e.datePaid),"hh:mm:aa")),o.a.createElement("td",null,Da(e.orderId)),o.a.createElement("td",null,e.itemName),o.a.createElement("td",{align:"center"},e.quantity),o.a.createElement("td",null,"\u20b1",e.price?Pa(e.price):"0.00"),o.a.createElement("td",null,"\u20b1",e.productsTotal?Pa(e.productsTotal):"0.00"),o.a.createElement("td",{style:{whiteSpace:"nowrap"}},Object(_e.default)(new Date(e.bookedForDate),"hh:mm:aa"),o.a.createElement("br",null),Object(_e.default)(new Date(e.bookedForDate),"hh:mm:aa")),o.a.createElement("td",null,e.status.toUpperCase()))}):o.a.createElement("tr",null,o.a.createElement("td",{colSpan:e},o.a.createElement("h5",{className:"text-danger"},o.a.createElement("em",null,"No transactions found."))))}},{key:"renderNoPageAdded",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"No Page Added"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You have not added a page yet. Click"," "," ",o.a.createElement(ie.a,{to:"/add-page"},"here")," "," ","to add a new page.")))))))}},{key:"renderPageNotVerified",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"You Have Not Agreed with our Terms & Policies"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You must agree  with our Terms & Policies. Click "," "," ",o.a.createElement(ie.a,{to:"/statement-of-agreement"},"here")," "," "," to read our Terms & Policies.")))))))}},{key:"renderNoProductsAdded",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"No Products Added"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You need to add a product before you can activate your store. Click"," "," ",o.a.createElement(ie.a,{to:"/products/new"},"here")," "," ","to add a product.")))))))}},{key:"render",value:function(){var e=JSON.parse(N("pageInfo")),t=JSON.parse(N("hasProducts")),a=JSON.parse(N("hasCategories"));return e&&e._id?!0===e.isVerified?!0===t?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Order List - ",o.a.createElement("em",null,this.state.page.name)),!e.hideTutorials&&o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Alert,{className:"alert-compact",color:"primary",isOpen:!this.state.hideTutorials,toggle:this.onDismiss,fade:!1},o.a.createElement("h4",{className:"alert-heading"},"New on Order Reports?"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"Check our videos here on how to manage your Order Reports.",o.a.createElement("br",null)),o.a.createElement("a",{className:"btn btn-sm btn-primary-v2",href:"https://www.youtube.com/watch?v=k8VEDqbPv7w"},"View Tutorials"),o.a.createElement(_.Button,{className:"btn-fill btn-sm",color:"danger",type:"button",onClick:this.onHideTutorials},"Hide Permanently")))))),o.a.createElement(_.Row,null,a&&t&&!0!==e.isActive&&o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"Store Not Activated"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You must activate your store so it will appear in the app and you can start selling.",o.a.createElement("br",null),"Click "," "," ",o.a.createElement(ie.a,{to:"/activate-store"},"here")," "," "," to activate you store."))))),o.a.createElement(_.Col,{className:"pr-md-1",md:"3"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"startDate",className:"control-label",style:{display:"block"}},"Start Date:"),o.a.createElement(bt.a,{name:"startDate",className:"form-control",selectsStart:!0,startDate:this.state.startDate,endDate:this.state.endDate,selected:this.state.startDate,onChange:this.handleChangeStartDate}))),o.a.createElement(_.Col,{className:"px-md-1",md:"3"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"endDate",className:"control-label",style:{display:"block"}},"End Date:"),o.a.createElement(bt.a,{name:"endDate",selectsEnd:!0,startDate:this.state.startDate,endDate:this.state.endDate,className:"form-control",selected:this.state.endDate,onChange:this.handleChangeEndDate}))),o.a.createElement(_.Col,{className:"px-md-1",md:"2"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"paymentMethod",className:"control-label"},"Payment Method:"),o.a.createElement(_.Input,{id:"paymentMethod",name:"paymentMethod",type:"select",onChange:this.handleChangePaymentMethod,value:this.state.selectedPaymentMethod},o.a.createElement("option",{value:""},"All"),o.a.createElement("option",{value:"cash"},"Cash"),o.a.createElement("option",{value:"paynamics"},"Paynamics"),o.a.createElement("option",{value:"paymongo"},"Paymongo"),o.a.createElement("option",{value:"cc"},"Paypal"),o.a.createElement("option",{value:"direct-transfer"},"Direct Transfer"),o.a.createElement("option",{value:"gcash"},"G-Cash")))),o.a.createElement(_.Col,{className:"px-md-1",md:"2"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"status",className:"control-label"},"Status:"),o.a.createElement(_.Input,{id:"status",name:"status",type:"select",onChange:this.handleChangeStatus,value:this.state.status},o.a.createElement("option",{value:""},"All"),o.a.createElement("option",{value:"for_confirmation"},"For Confirmation"),o.a.createElement("option",{value:"payment_pending"},"Pending"),o.a.createElement("option",{value:"paid"},"Paid"),o.a.createElement("option",{value:"cancelled"},"Cancelled"),o.a.createElement("option",{value:"void"},"Void"))))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",md:"3"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{className:"control-label"},o.a.createElement(Ue.a,{onClick:this.handleChangeDebugMode,on:this.state.debugMode}),"\xa0Show Test Txns")))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Button,{className:"btn-round",color:"info",type:"button",onClick:this.generateList},"Generate"),o.a.createElement(_.Button,{className:"btn-round",color:"info",type:"button",onClick:this.exportList},"Export"))))),o.a.createElement(_.CardBody,null,o.a.createElement(_.Table,{className:"tablesorter table-striped fs12",responsive:!0},o.a.createElement("thead",{className:"text-primary bg-gray"},o.a.createElement("tr",null,o.a.createElement("th",null,"Date Placed"),o.a.createElement("th",null,"Date Paid"),o.a.createElement("th",null,"Order ID"),o.a.createElement("th",null,"Item Name"),o.a.createElement("th",null,"Quantity"),o.a.createElement("th",null,"SRP"),o.a.createElement("th",null,"Total"),o.a.createElement("th",null,"Booked For Date"),o.a.createElement("th",null,"Order Status"))),o.a.createElement("tbody",null,this.renderRows()))),o.a.createElement(_.CardFooter,null))))),o.a.createElement(z.a,{active:this.state.isGeneratingXls,spinner:!0,text:"Generating..."})):this.renderNoProductsAdded():this.renderPageNotVerified():this.renderNoPageAdded()}}]),t}(o.a.Component),Pa=function(e){return ka(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},ka=function(e,t){if(void 0===t&&(t=2),0!==e&&(!e||isNaN(e)))throw new Error("price is not a number"+e);return parseFloat(Math.round(100*e)/100).toFixed(t)},Da=function(e){var t=e.toString();return"..."+(new Array(t.length-6+1).join("")+t.slice(-6))},Oa=Object(E.b)(function(){return{}},{getOrdersList:function(e,t,a){return function(){D(t).get("/provider/orders",{params:e}).then(function(e){if(e)return a(null,e);a(e,null)}).catch(function(e){a(e,null)})}},getOrdersListGrocery:function(e,t,a){return function(){D(t).get("/provider/grocery/orders",{params:e}).then(function(e){if(e)return a(null,e);a(e,null)}).catch(function(e){a(e,null)})}},getOrderListXls:function(e,t,a){return function(){D(t).get("/provider/orders-list-xls",{params:e}).then(function(e){if(e)return a(null,e);a(e,null)}).catch(function(e){a(e,null)})}},getPageById:X})(wa),xa=a(76),Ta=a(586),Ia=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChangeStartDate=function(e){var t=new Date(e).toISOString();a.setState({startDate:e}),a.setState({startDateStr:t})},a.handleChangeEndDate=function(e){var t=new Date(e).toISOString();a.setState({endDate:e}),a.setState({endDateStr:t})},a.handleChangeFilterDate=function(e){var t=e.target.value;a.setState({filterDate:t})},a.handleChangePaymentMethod=function(e){var t=e.target.value;a.setState({selectedPaymentMethod:t})},a.handleChangeStatus=function(e){var t=e.target.value;a.setState({status:t})},a.handleChangeProductCategory=function(e){a.setState({isLoading:!0});var t=JSON.parse(N("defaultPage")),n="",r=a.state.productCategoriesAll,o=[],l={};l.dateStart=a.state.startDateStr,l.dateEnd=a.state.endDateStr,""!==a.state.selectedProductCategory&&(l.category=a.state.selectedProductCategory),""!==a.state.selectedProductCategorySub&&(l.subCategory=a.state.selectedProductCategorySub),""!==a.state.selectedPaymentMethod&&(l.selectedPaymentMethod=a.state.selectedPaymentMethod),""!==a.state.status&&(l.status=a.state.status),""!==a.state.filterDate&&(l.filterDate=a.state.filterDate),l.pageId=t,e&&e.value?(n=e.value,o=r.filter(function(e){return e.parent&&e.parent.id.toString()===n}),l.category=n):delete l.category,delete l.subCategory;var s="?"+je.a.stringify(l);a.setState({selectedProductCategory:n,selectedProductCategorySub:"",productCategoriesSub:o}),a.generateTxnsList(s)},a.handleChangeProductCategorySub=function(e){a.setState({isLoading:!0});var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n);r.dateStart=a.state.startDateStr,r.dateEnd=a.state.endDateStr,""!==a.state.selectedProductCategory&&(r.category=a.state.selectedProductCategory),""!==a.state.selectedProductCategorySub&&(r.subCategory=a.state.selectedProductCategorySub),""!==a.state.selectedPaymentMethod&&(r.selectedPaymentMethod=a.state.selectedPaymentMethod),""!==a.state.status&&(r.status=a.state.status),""!==a.state.filterDate&&(r.filterDate=a.state.filterDate),r.pageId=t;var o="";e&&e.value?(o=e.value,r.subCategory=o):delete r.subCategory;var l="?"+je.a.stringify(r);a.setState({selectedProductCategorySub:o}),a.generateTxnsList(l)},a.handleChangeSortBy=function(e){var t=e.target.value;a.setState({sortBy:t})},a.handleToggleShowTests=function(e){a.setState(function(e){return{showTests:!e.showTests}})},a.generateList=function(){var e=JSON.parse(N("defaultPage")),t=a.props.location.search,n=je.a.parse(t);n.dateStart=a.state.startDateStr,n.dateEnd=a.state.endDateStr,""!==a.state.selectedProductCategory&&(n.category=a.state.selectedProductCategory),""!==a.state.selectedProductCategorySub&&(n.subCategory=a.state.selectedProductCategorySub),""!==a.state.selectedPaymentMethod&&(n.selectedPaymentMethod=a.state.selectedPaymentMethod),""!==a.state.status&&(n.status=a.state.status),""!==a.state.filterDate&&(n.filterDate=a.state.filterDate),""!==a.state.sortBy&&(n.sortBy=a.state.sortBy),a.state.showTests&&(n.showTests=a.state.showTests),n.pageId=e;var r="?"+je.a.stringify(n);a.generateTxnsList(r)},a.exportList=function(){a.setState({isGeneratingXls:!0});var e="",t=JSON.parse(N("userData")),n=JSON.parse(N("defaultPage")),r=t.sessionToken;e="desc"!==a.state.sort?"desc":"asc";var o=a.props.location.search,l=je.a.parse(o);l.dateStart=a.state.startDateStr,l.dateEnd=a.state.endDateStr,""!==a.state.selectedProductCategory&&(l.category=a.state.selectedProductCategory),""!==a.state.selectedProductCategorySub&&(l.subCategory=a.state.selectedProductCategorySub),""!==a.state.selectedPaymentMethod&&(l.selectedPaymentMethod=a.state.selectedPaymentMethod),""!==a.state.status&&(l.status=a.state.status),""!==a.state.filterDate&&(l.filterDate=a.state.filterDate),a.state.showTests&&(l.showTests=a.state.showTests),l.pageId=n,a.setState({sort:e}),a.setState({sortBy:"price"}),null!==t?a.state.isGrocery?a.props.getProductOrdersGroceryXls(l,r,function(e,t){if(t&&t.data&&"success"===t.data.status&&t.data.filename){var n=t.data.filename;a.setState({isGeneratingXls:!1}),window.open(n)}else a.setState({isGeneratingXls:!1}),a.showNotificationError("No transactions found.")}):a.props.getProductOrdersXls(l,r,function(e,t){if(t&&t.data&&"success"===t.data.status&&t.data.filename){var n=t.data.filename;a.setState({isGeneratingXls:!1}),window.open(n)}else a.setState({isGeneratingXls:!1}),a.showNotificationError("No transactions found.")}):a.setState({isGeneratingXls:!1})},a.onDismiss=function(){a.setState({hideTutorials:!0});var e=JSON.parse(N("pageInfo"));e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))},a.onHideTutorials=function(){if(!window.confirm("Are you sure you want to hide this section permanently?"))return!1;var e=JSON.parse(N("pageInfo")),t=JSON.parse(N("userData")).sessionToken;D(t).patch("/provider/places/".concat(e._id),{hideTutorials:!0}).then(function(t){t&&t.data&&"ok"===t.data.status?(a.setState({hideTutorials:!0}),e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))):a.showNotificationError("An unknown error occured. Please try again!")}).catch(function(e){a.setState({submitted:!1,isSaving:!1}),e.response&&"string"===typeof e.response?a.showNotificationError(e.response):a.showNotificationError("An unknown error occured. Please try again!")})};var n=(new Date).toISOString();return a.state={page:{},transactions:[],productCategories:[],productCategoriesSub:[],startDate:Object(xa.default)(new Date),endDate:Object(Ta.default)(new Date),startDateStr:n,endDateStr:n,selectedPaymentMethod:"",selectedProductCategory:"",selectedProductCategorySub:"",filterDate:"deliveryDate",pagination:{},activePage:1,sortBy:"quantitySoldDesc",status:"payment_pending",isLoading:!1,isGrocery:!1,isGeneratingXls:!1,showTests:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("userData")),a=JSON.parse(N("defaultPage")),n=t.sessionToken,r=JSON.parse(N("pageInfo"));r&&"5cd141d10d437be772373ddb"===r.pageType&&this.setState({isGrocery:!0}),a&&""!==a&&this.props.getPageById(a,n,function(t,o){if(t)e.showNotificationError("An error occured. Cannot find the page information!");else if(o){var l=o.page,s=l._id,i=l.name,c=l.addressLine1,d=l.city,m=l.province,u=l.email,p=l.balances;e.setState({page:{_id:s,name:i,address:c,city:d,province:m,email:u,balances:p}}),e.getCategories(r,a,n)}else e.showNotificationError("Page not found.")})}},{key:"generateTxnsList",value:function(e){var t=this;this.setState({isLoading:!0});var a=je.a.parse(e),n=JSON.parse(N("userData")),r=JSON.parse(N("pageInfo")),o=n.sessionToken;null!==n&&r&&(this.state.isGrocery?this.props.getProductOrdersGrocery(a,o,function(e,a){if(!e&&a&&a.data){var n=a.data;t.setState({transactions:n})}else t.setState({transactions:[]});t.setState({isLoading:!1})}):this.props.getProductOrders(a,o,function(e,a){if(!e&&a&&a.data){var n=a.data;t.setState({transactions:n})}else t.setState({transactions:[]});t.setState({isLoading:!1})}))}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"renderImage",value:function(e){var t,a=e.name,n=e.photos;return t=!n||void 0===n[0]&&null==n[0]?{thumb:We.a}:n[0],o.a.createElement(_.Media,{className:"mt-1"},t&&t.thumb&&o.a.createElement(_.Media,{left:!0,middle:!0},o.a.createElement(_.Media,{object:!0,"data-src":t.thumb,src:t.thumb,alt:a,title:a})))}},{key:"renderRows",value:function(){var e=this,t=9;return this.state.isGrocery&&(t=10),this.state.isLoading?o.a.createElement("tr",null,o.a.createElement("td",{colSpan:t},o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading}))):this.state.transactions instanceof Array&&this.state.transactions.length>0?this.state.isGrocery?this.state.transactions.map(function(t,a){return o.a.createElement("tr",{key:a},o.a.createElement("td",null,a+1,"\xb7",e.renderImage(t)),o.a.createElement("td",null,o.a.createElement(ie.a,{target:"_blank",to:"/products/".concat(t._id,"/edit")},t.productName)),o.a.createElement("td",null,t.categories&&t.categories.length>0&&t.categories.filter(function(e){return!e.parent}).map(function(e){return e.name}).join(", ")),o.a.createElement("td",null,t.categories&&t.categories.length>0&&t.categories.filter(function(e){return null!==e.parent}).map(function(e){return e.name}).join(", ")),o.a.createElement("td",null,"...",t._id.substring(18,24)),o.a.createElement("td",{style:{whiteSpace:"nowrap"}},t.itemCode),o.a.createElement("td",null,t.barcode),o.a.createElement("td",null,"\u20b1",Fa(t.price)),o.a.createElement("td",{align:"center"},t.quantitySold),o.a.createElement("td",null,"\u20b1",Fa(t.totalSales)))}):this.state.transactions.map(function(t,a){return o.a.createElement("tr",{key:a},o.a.createElement("td",null,a+1,"\xb7",e.renderImage(t)),o.a.createElement("td",null,o.a.createElement(ie.a,{target:"_blank",to:"/products/".concat(t._id,"/edit")},t.productName)),o.a.createElement("td",null,t.categories&&t.categories.length>0&&t.categories.map(function(e){return e.name}).join(", ")),o.a.createElement("td",null,"...",t._id.substring(18,24)),o.a.createElement("td",{style:{whiteSpace:"nowrap"}},t.itemCode),o.a.createElement("td",null,t.barcode),o.a.createElement("td",null,"\u20b1",Fa(t.price)),o.a.createElement("td",{align:"center"},t.quantitySold),o.a.createElement("td",null,"\u20b1",Fa(t.totalSales)))}):o.a.createElement("tr",null,o.a.createElement("td",{colSpan:t},o.a.createElement("h5",{className:"text-danger"},o.a.createElement("em",null,"No transactions found."))))}},{key:"getCategories",value:function(e,t,a){var n=this;this.state.isGrocery?(this.setState({isGrocery:!0}),this.props.getProductCategoriesAllV2({},t,a,function(e,t){if(!e&&t){var a=t;if(a instanceof Array&&a.length>0){var r=[],o=[],l=[];a.forEach(function(e){var t={value:e._id,label:e.name,parent:e.parent};r.push(t)}),o=r.filter(function(e){return!e.parent});o=[{value:"",label:"All",parent:""}].concat(Object(Ne.a)(o)),n.state.selectedProductCategory&&(l=r.filter(function(e){return e.parent&&e.parent.id.toString()===n.state.selectedProductCategory})),n.setState({productCategoriesAll:r,productCategories:o,productCategoriesSub:l})}else n.setState({productCategories:[]})}})):this.props.getProductCategoriesAll({},a,function(e,t){if(!e&&t){var a=t;if(a instanceof Array&&a.length>0){var r=[],o=[],l=[];a.forEach(function(e){var t={value:e._id,label:e.name,parent:e.parent};r.push(t)}),o=r.filter(function(e){return!e.parent});o=[{value:"",label:"All",parent:""}].concat(Object(Ne.a)(o)),n.state.selectedProductCategory&&(l=r.filter(function(e){return e.parent&&e.parent.id.toString()===n.state.selectedProductCategory})),n.setState({productCategoriesAll:r,productCategories:o,productCategoriesSub:l})}else n.setState({productCategories:[]})}})}},{key:"renderNoPageAdded",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"No Page Added"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You have not added a page yet. Click"," "," ",o.a.createElement(ie.a,{to:"/add-page"},"here")," "," ","to add a new page.")))))))}},{key:"renderPageNotVerified",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"You Have Not Agreed with our Terms & Policies"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You must agree  with our Terms & Policies. Click "," "," ",o.a.createElement(ie.a,{to:"/statement-of-agreement"},"here")," "," "," to read our Terms & Policies.")))))))}},{key:"renderNoProductsAdded",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"No Products Added"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You need to add a product before you can activate your store. Click"," "," ",o.a.createElement(ie.a,{to:"/products/new"},"here")," "," ","to add a product.")))))))}},{key:"render",value:function(){var e=this,t=JSON.parse(N("pageInfo")),a=JSON.parse(N("hasProducts")),n=JSON.parse(N("hasCategories"));return t&&t._id?!0===t.isVerified?!0===a?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Product Order Reports - ",o.a.createElement("em",null,this.state.page.name)),!t.hideTutorials&&o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Alert,{className:"alert-compact",color:"primary",isOpen:!this.state.hideTutorials,toggle:this.onDismiss,fade:!1},o.a.createElement("h4",{className:"alert-heading"},"New on Product Reports?"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"Check our videos here on how to manage your Product Reports.",o.a.createElement("br",null)),o.a.createElement("a",{className:"btn btn-sm btn-primary-v2",href:"https://www.youtube.com/watch?v=k8VEDqbPv7w"},"View Tutorials"),o.a.createElement(_.Button,{className:"btn-fill btn-sm",color:"danger",type:"button",onClick:this.onHideTutorials},"Hide Permanently")))))),o.a.createElement(_.Row,null,n&&a&&!0!==t.isActive&&o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"Store Not Activated"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You must activate your store so it will appear in the app and you can start selling.",o.a.createElement("br",null),"Click "," "," ",o.a.createElement(ie.a,{to:"/activate-store"},"here")," "," "," to activate you store."))))),o.a.createElement(_.Col,{className:"pr-md-1",md:"6"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"startDate",className:"control-label",style:{display:"block"}},"Start Date:"),this.state.filterDate&&"deliveryDate"===this.state.filterDate?o.a.createElement(bt.a,{name:"startDate",className:"form-control",selectsStart:!0,startDate:this.state.startDate,endDate:this.state.endDate,selected:this.state.startDate,onChange:this.handleChangeStartDate,showTimeSelect:!0,dateFormat:"MMMM d, yyyy h:mm aa",timeIntervals:30,timeCaption:"Time",autoComplete:"off"}):o.a.createElement(bt.a,{name:"startDate",className:"form-control",selectsStart:!0,startDate:this.state.startDate,endDate:this.state.endDate,selected:this.state.startDate,onChange:this.handleChangeStartDate,dateFormat:"MMMM d, yyyy",autoComplete:"off"}))),o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"endDate",className:"control-label",style:{display:"block"}},"End Date:"),this.state.filterDate&&"deliveryDate"===this.state.filterDate?o.a.createElement(bt.a,{name:"endDate",selectsEnd:!0,startDate:this.state.startDate,endDate:this.state.endDate,className:"form-control",selected:this.state.endDate,onChange:this.handleChangeEndDate,showTimeSelect:!0,dateFormat:"MMMM d, yyyy h:mm aa",timeIntervals:30,timeCaption:"Time",autoComplete:"off"}):o.a.createElement(bt.a,{name:"endDate",selectsEnd:!0,startDate:this.state.startDate,endDate:this.state.endDate,className:"form-control",selected:this.state.endDate,onChange:this.handleChangeEndDate,dateFormat:"MMMM d, yyyy",autoComplete:"off"})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"filterDate",className:"control-label"},"Filter Date by:"),o.a.createElement(_.Input,{id:"filterDate",name:"filterDate",type:"select",onChange:this.handleChangeFilterDate,value:this.state.filterDate},o.a.createElement("option",{value:"deliveryDate"},"Delivery Date"),o.a.createElement("option",{value:"orderDate"},"Date Ordered")))),o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"sortBy",className:"control-label"},"Sort by:"),o.a.createElement(_.Input,{id:"sortBy",name:"sortBy",type:"select",onChange:this.handleChangeSortBy,value:this.state.sortBy},o.a.createElement("option",{value:"productName"},"Product - A to Z"),o.a.createElement("option",{value:"productNameDesc"},"Product - Z to A"),o.a.createElement("option",{value:"quantitySold"},"Qty. Sold - Low to High"),o.a.createElement("option",{value:"quantitySoldDesc"},"Qty. Sold - High to Low"),o.a.createElement("option",{value:"price"},"Price - Low to High"),o.a.createElement("option",{value:"priceDesc"},"Price - High to Low")))))),o.a.createElement(_.Col,{className:"pl-md-1",md:"6"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"category",className:"control-label"},"Category:"),o.a.createElement(Ke.a,{className:"react-select",name:"category",styles:{fontSize:"13px !important"},options:this.state.productCategories,onChange:this.handleChangeProductCategory,placeholder:"Select main category",value:this.state.productCategories.filter(function(t){return t.value===e.state.selectedProductCategory})}))),o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"subCategory",className:"control-label"},"Subcategory:"),o.a.createElement(Ke.a,{className:"react-select",name:"subCategory",styles:{fontSize:"13px !important"},isClearable:!0,options:this.state.productCategoriesSub,onChange:this.handleChangeProductCategorySub,placeholder:"Select sub category",value:this.state.productCategoriesSub.filter(function(t){return t.value===e.state.selectedProductCategorySub})})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"paymentMethod",className:"control-label"},"Payment Method:"),o.a.createElement(_.Input,{id:"paymentMethod",name:"paymentMethod",type:"select",onChange:this.handleChangePaymentMethod,value:this.state.selectedPaymentMethod},o.a.createElement("option",{value:""},"All"),o.a.createElement("option",{value:"cash"},"Cash"),o.a.createElement("option",{value:"gcash"},"G-Cash"),o.a.createElement("option",{value:"paynamics"},"Paynamics"),o.a.createElement("option",{value:"paymongo"},"Paymongo"),o.a.createElement("option",{value:"cc"},"Paypal"),o.a.createElement("option",{value:"direct-transfer"},"Direct Transfer")))),o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"status",className:"control-label"},"Status:"),o.a.createElement(_.Input,{id:"status",name:"status",type:"select",onChange:this.handleChangeStatus,value:this.state.status},o.a.createElement("option",{value:""},"All"),o.a.createElement("option",{value:"for_confirmation"},"For Confirmation"),o.a.createElement("option",{value:"payment_pending"},"Pending"),o.a.createElement("option",{value:"paid"},"Paid"),o.a.createElement("option",{value:"cancelled"},"Cancelled"),o.a.createElement("option",{value:"void"},"Void")))))),o.a.createElement(_.Col,{className:"pr-md-1",md:"6"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{className:"control-label"},o.a.createElement(Ue.a,{onClick:this.handleToggleShowTests,on:this.state.showTests}),"\xa0Show Test Txns")))))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Button,{className:"btn-round",color:"info",type:"button",onClick:this.generateList},"Generate"),o.a.createElement(_.Button,{className:"btn-round",color:"info",type:"button",onClick:this.exportList},"Export"))))),o.a.createElement(_.CardBody,null,o.a.createElement(_.Table,{className:"tablesorter table-striped fs12",responsive:!0},o.a.createElement("thead",{className:"text-primary bg-gray"},this.state.isGrocery?o.a.createElement("tr",null,o.a.createElement("th",null,"#"),o.a.createElement("th",null,"Product"),o.a.createElement("th",null,"Category"),o.a.createElement("th",{style:{whiteSpace:"nowrap"}},"Sub-category"),o.a.createElement("th",null,"Product ID"),o.a.createElement("th",null,"Item Code"),o.a.createElement("th",null,"Barcode"),o.a.createElement("th",null,"SRP"),o.a.createElement("th",null,"Qty. Sold"),o.a.createElement("th",null,"Total Sales")):o.a.createElement("tr",null,o.a.createElement("th",null,"#"),o.a.createElement("th",null,"Product"),o.a.createElement("th",null,"Category"),o.a.createElement("th",null,"Product Id"),o.a.createElement("th",null,"Item Code"),o.a.createElement("th",null,"Barcode"),o.a.createElement("th",null,"SRP"),o.a.createElement("th",null,"Qty. Sold"),o.a.createElement("th",null,"Total Sales"))),o.a.createElement("tbody",null,this.renderRows()))),o.a.createElement(_.CardFooter,null))))),o.a.createElement(z.a,{active:this.state.isGeneratingXls,spinner:!0,text:"Generating..."})):this.renderNoProductsAdded():this.renderPageNotVerified():this.renderNoPageAdded()}}]),t}(o.a.Component),Fa=function(e){return Ma(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},Ma=function(e,t){if(void 0===t&&(t=2),0!==e&&(!e||isNaN(e)))throw new Error("price is not a number"+e);return parseFloat(Math.round(100*e)/100).toFixed(t)},Ba=Object(E.b)(function(){return{}},{getProductOrders:function(e,t,a){return function(){D(t).get("/provider/product-orders",{params:e}).then(function(e){if(e)return a(null,e);a(e,null)}).catch(function(e){a(e,null)})}},getProductOrdersGrocery:function(e,t,a){return function(){D(t).get("/provider/grocery/product-orders",{params:e}).then(function(e){if(e)return a(null,e);a(e,null)}).catch(function(e){a(e,null)})}},getProductOrdersXls:function(e,t,a){return function(){D(t).get("/provider/product-orders-xls",{params:e}).then(function(e){if(e)return a(null,e);a(e,null)}).catch(function(e){a(e,null)})}},getProductOrdersGroceryXls:function(e,t,a){return function(){D(t).get("/provider/product-orders-grocery-xls",{params:e}).then(function(e){if(e)return a(null,e);a(e,null)}).catch(function(e){a(e,null)})}},getPageById:X,getProductCategoriesAll:G,getProductCategoriesAllV2:L})(Ia),Ga=a(199),La=a(723),Ra=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this))).toggleConfirm=function(){a.setState(function(e){return{modalConfirm:!e.modalConfirm}})},a.toggle=function(){a.setState(function(e){return{modal:!e.modal,reason:"",subReason:""}})},a.toggleDrop=function(){a.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})},a.toggleNested=function(){a.setState({nestedModal:!a.state.nestedModal,closeAll:!1})},a.toggleAll=function(){a.setState({nestedModal:!a.state.nestedModal,closeAll:!0})},a.togglePickupModal=function(){a.setState(function(e){return{showPickUpModal:!e.showPickUpModal}})},a.handleChangeKeyword=function(e){var t=e.target.value;a.setState({search:t})},a.handleChangeStartDate=function(e){var t=Object(_e.default)(new Date(e),"yyyy-MM-dd'T'HH:mm:ss");a.setState({dateStart:e}),a.setState({dateStartStr:t}),a.setState({isLoading:!0}),a.setState({isLoadingOrderDetail:!0});var n=JSON.parse(N("defaultPage")),r=a.props.location.search,o=je.a.parse(r);o.dateStart=t,o.dateEnd=a.state.dateEndStr,""!==a.state.selectedPaymentMethod?o.selectedPaymentMethod=a.state.selectedPaymentMethod:delete o.selectedPaymentMethod,""!==a.state.filterDate?o.filterDate=a.state.filterDate:delete o.filterDate,""!==a.state.search?o.search=a.state.search:delete o.search,""!==a.state.status?o.status=a.state.status:delete o.status,delete o.page;var l="?"+je.a.stringify(o);a.refreshOrders(l,n)},a.handleChangeEndDate=function(e){var t=Object(_e.default)(new Date(e),"yyyy-MM-dd'T'HH:mm:ss");a.setState({dateEnd:e}),a.setState({dateEndStr:t}),a.setState({isLoading:!0}),a.setState({isLoadingOrderDetail:!0});var n=JSON.parse(N("defaultPage")),r=a.props.location.search,o=je.a.parse(r);o.dateStart=a.state.dateStartStr,o.dateEnd=t,""!==a.state.selectedPaymentMethod?o.selectedPaymentMethod=a.state.selectedPaymentMethod:delete o.selectedPaymentMethod,""!==a.state.filterDate?o.filterDate=a.state.filterDate:delete o.filterDate,""!==a.state.search?o.search=a.state.search:delete o.search,""!==a.state.status?o.status=a.state.status:delete o.status,delete o.page;var l="?"+je.a.stringify(o);a.refreshOrders(l,n)},a.handleChangeFilterDate=function(e){var t=e.target.value;a.setState({filterDate:t}),a.setState({isLoading:!0}),a.setState({isLoadingOrderDetail:!0});var n=JSON.parse(N("defaultPage")),r=a.props.location.search,o=je.a.parse(r);o.dateStart=a.state.dateStartStr,o.dateEnd=a.state.dateEndStr,""!==a.state.selectedPaymentMethod?o.selectedPaymentMethod=a.state.selectedPaymentMethod:delete o.selectedPaymentMethod,""!==t?o.filterDate=t:delete o.filterDate,""!==a.state.search?o.search=a.state.search:delete o.search,""!==a.state.status?o.status=a.state.status:delete o.status,delete o.page;var l="?"+je.a.stringify(o);a.refreshOrders(l,n)},a.handleChangePaymentMethod=function(e){var t=e.target.value;a.setState({selectedPaymentMethod:t}),a.setState({isLoading:!0}),a.setState({isLoadingOrderDetail:!0});var n=JSON.parse(N("defaultPage")),r=a.props.location.search,o=je.a.parse(r);o.dateStart=a.state.dateStartStr,o.dateEnd=a.state.dateEndStr,""!==t?o.selectedPaymentMethod=t:delete o.selectedPaymentMethod,""!==a.state.filterDate?o.filterDate=a.state.filterDate:delete o.filterDate,""!==a.state.search?o.search=a.state.search:delete o.search,""!==a.state.status?o.status=a.state.status:delete o.status,delete o.page;var l="?"+je.a.stringify(o);a.refreshOrders(l,n)},a.handleChangeStatus=function(e){var t=e.target.value;t?a.setState({status:t}):a.setState({status:""}),a.setState({isLoading:!0}),a.setState({isLoadingOrderDetail:!0});var n=JSON.parse(N("defaultPage")),r=a.props.location.search,o=je.a.parse(r);o.dateStart=a.state.dateStartStr,o.dateEnd=a.state.dateEndStr,""!==a.state.selectedPaymentMethod?o.selectedPaymentMethod=a.state.selectedPaymentMethod:delete o.selectedPaymentMethod,""!==a.state.filterDate?o.filterDate=a.state.filterDate:delete o.filterDate,""!==a.state.search?o.search=a.state.search:delete o.search,""!==t?o.status=t:delete o.status,delete o.page;var l="?"+je.a.stringify(o);a.refreshOrders(l,n)},a.handleChangeDate=function(e){var t=a.state,n=t.timeStart,r=t.timeEnd,o=Object(Ga.default)(Object(xa.default)(new Date(e)),n),l=Object(La.a)(Object(Ga.default)(Object(xa.default)(new Date(e)),r),1);a.setState({dateStart:o,dateEnd:l,isLoading:!0,isLoadingOrderDetail:!0});var s=JSON.parse(N("defaultPage")),i=a.props.location.search,c=je.a.parse(i);c.dateStart=Object(_e.default)(new Date(o),"yyyy-MM-dd'T'HH:mm:ss"),c.dateEnd=Object(_e.default)(new Date(l),"yyyy-MM-dd'T'HH:mm:ss"),""!==a.state.selectedPaymentMethod?c.selectedPaymentMethod=a.state.selectedPaymentMethod:delete c.selectedPaymentMethod,""!==a.state.filterDate?c.filterDate=a.state.filterDate:delete c.filterDate,""!==a.state.search?c.search=a.state.search:delete c.search,""!==a.state.status?c.status=a.state.status:delete c.status,delete c.page;var d="?"+je.a.stringify(c);a.refreshOrders(d,s)},a.handleChangeDeliveryTime=function(e){var t=e.target.value,n=0,r=24;t&&("14001659"===t?(n=14,r=17):"17002059"===t?(n=17,r=21):"10002059"===t&&(n=10,r=21));var o=a.state,l=o.dateStart,s=o.dateEnd,i=Object(Ga.default)(Object(xa.default)(new Date(l)),n),c=Object(La.a)(Object(Ga.default)(Object(xa.default)(new Date(s)),r),1);a.setState({timeStart:n,timeEnd:r,deliveryTime:t,dateStart:i,dateEnd:c,isLoading:!0,isLoadingOrderDetail:!0});var d=JSON.parse(N("defaultPage")),m=a.props.location.search,u=je.a.parse(m);u.dateStart=Object(_e.default)(new Date(i),"yyyy-MM-dd'T'HH:mm:ss"),u.dateEnd=Object(_e.default)(new Date(c),"yyyy-MM-dd'T'HH:mm:ss"),""!==a.state.selectedPaymentMethod?u.selectedPaymentMethod=a.state.selectedPaymentMethod:delete u.selectedPaymentMethod,""!==a.state.filterDate?u.filterDate=a.state.filterDate:delete u.filterDate,""!==a.state.search?u.search=a.state.search:delete u.search,""!==a.state.status?u.status=a.state.status:delete u.status,delete u.page;var p="?"+je.a.stringify(u);a.refreshOrders(p,d)},a.handleToggleShowTests=function(e){var t=a.state.showTests;a.setState(function(e){return{showTests:!e.showTests}}),a.setState({isLoading:!0}),a.setState({isLoadingOrderDetail:!0});var n=JSON.parse(N("defaultPage")),r=a.props.location.search,o=je.a.parse(r);o.dateStart=a.state.dateStartStr,o.dateEnd=a.state.dateEndStr,""!==a.state.selectedPaymentMethod?o.selectedPaymentMethod=a.state.selectedPaymentMethod:delete o.selectedPaymentMethod,""!==a.state.filterDate?o.filterDate=a.state.filterDate:delete o.filterDate,""!==a.state.search?o.search=a.state.search:delete o.search,""!==a.state.status?o.status=a.state.status:delete o.status,o.showTests=t?"no":"yes",delete o.page;var l="?"+je.a.stringify(o);a.refreshOrders(l,n)},a.handleChangeShopper=function(e){var t=a.state.singleDetails.shopper,n=e.value;if(t&&t._id===n)return!1;if(n){if(!window.confirm("Are you sure you want to update the shopper?"))return!1;var r=JSON.parse(N("defaultPage")),o=JSON.parse(N("userData")).sessionToken,l=a.state.singleDetails._id,s={};n&&""!==n&&((s=a.state.shoppers.find(function(e){return e._id===n})).pageId=r);var i={shopper:s};o&&D(o).patch("/provider/places/".concat(r,"/orders/").concat(l,"/update-order"),i).then(function(e){e&&e.data&&(a.setState({singleDetails:Object(A.a)({},a.state.singleDetails,{shopper:s})}),a.showNotification("Shopper was successfully updated."))}).catch(function(e){a.setState({submitted:!1,isSaving:!1}),e.response&&"string"===typeof e.response?a.showNotificationError(e.response):a.showNotificationError("There is a error updating the shopper!")})}else a.showNotificationError("Please select a shopper!")},a.onDismiss=function(){a.setState({hideTutorials:!0});var e=JSON.parse(N("pageInfo"));e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))},a.onHideTutorials=function(){if(!window.confirm("Are you sure you want to hide this section permanently?"))return!1;var e=JSON.parse(N("pageInfo")),t=JSON.parse(N("userData")).sessionToken;D(t).patch("/provider/places/".concat(e._id),{hideTutorials:!0}).then(function(t){t&&t.data&&"ok"===t.data.status?(a.setState({hideTutorials:!0}),e.hideTutorials=!0,S("pageInfo",JSON.stringify(e))):a.showNotificationError("An unknown error occured. Please try again!")}).catch(function(e){a.setState({submitted:!1,isSaving:!1}),e.response&&"string"===typeof e.response?a.showNotificationError(e.response):a.showNotificationError("An unknown error occured. Please try again!")})},a.handleSearch=function(e){if("Enter"===e.key){var t=a.state,n=t.dateStart,r=t.dateEnd;a.setState({isLoading:!0}),a.setState({isLoadingOrderDetail:!0});var o=JSON.parse(N("defaultPage")),l=a.props.location.search,s=je.a.parse(l);s.dateStart=Object(_e.default)(new Date(n),"yyyy-MM-dd'T'HH:mm:ss"),s.dateEnd=Object(_e.default)(new Date(r),"yyyy-MM-dd'T'HH:mm:ss"),""!==a.state.selectedPaymentMethod&&(s.selectedPaymentMethod=a.state.selectedPaymentMethod),""!==a.state.status&&(s.status=a.state.status),""!==a.state.filterDate&&(s.filterDate=a.state.filterDate),""!==a.state.search?s.search=a.state.search:delete s.search,delete s.page,a.setState({activePage:1});var i="?"+je.a.stringify(s);a.refreshOrders(i,o)}},a.handlePageChange=function(e){a.setState({isLoading:!0}),a.setState({isLoadingOrderDetail:!0});var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n);delete r.message,r.page=e;var o="?"+je.a.stringify(r);a.setState({activePage:e}),a.refreshOrders(o,t)},a.exportList=function(){a.setState({isGeneratingXls:!0});var e=a.state,t=e.dateStart,n=e.dateEnd,r=e.status,o=e.selectedPaymentMethod,l=e.keyword,s=e.filterDate,i=e.showTests,c={},d=JSON.parse(N("userData")),m=JSON.parse(N("defaultPage")),u=d.sessionToken;c.dateStart=t,c.dateEnd=n,r&&""!==r&&(c.status=r),o&&""!==o&&(c.selectedPaymentMethod=o),l&&""!==l&&(c.keyword=l),s&&""!==s&&(c.filterDate=s),i&&""!==i&&(c.showTests=i),null!==d?D(u).get("/provider/places/".concat(m,"/orders-by-product-xls"),{params:c}).then(function(e){if(e&&e.data&&"success"===e.data.status&&e.data.filename){var t=e.data.filename;a.setState({isGeneratingXls:!1}),window.open(t)}else a.setState({isGeneratingXls:!1}),a.showNotificationError("No transactions found.")}).catch(function(e){a.setState({isGeneratingXls:!1}),a.showNotificationError("There is an error generating the file. Please")}):(a.setState({isGeneratingXls:!1}),a.showNotificationError("No transactions found."))},a.toggleDrop=a.toggleDrop.bind(Object(se.a)(Object(se.a)(a)));var n=Object(_e.default)(Object(xa.default)(new Date),"yyyy-MM-dd'T'HH:mm:ss"),r=Object(_e.default)(Object(Ta.default)(new Date),"yyyy-MM-dd'T'HH:mm:ss");return a.state={orders:[],dateStart:Object(xa.default)(new Date),dateEnd:Object(Ta.default)(new Date),dateStartStr:n,dateEndStr:r,timeStart:0,timeEnd:24,deliveryTime:"10001359",filterDate:"deliveryDate",showTests:!1,sort:"created",sortBy:"desc",size:25,selectedPaymentMethod:"",singleDetails:[],modal:!1,modalConfirm:!1,nestedModal:!1,closeAll:!1,dropdownOpen:!1,reason:"",pagination:{},activePage:1,subReason:"",isLoading:!0,isLoadingOrderDetail:!0,canPickUp:!1,status:"",search:"",showPickUpModal:!1,showPaymentModal:!1,providerNote:"",shoppers:[],shopperOptions:[],isGrocery:!1,isGeneratingXls:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("pageInfo")),a=JSON.parse(N("defaultPage")),n=JSON.parse(N("userData")).sessionToken;t&&"5cd141d10d437be772373ddb"===t.pageType&&(this.setState({isGrocery:!0}),n&&a&&D(n).get("/provider/places/".concat(a,"/get-shoppers")).then(function(t){if(t&&t.data){var a=t.data,n=[];a.forEach(function(e){var t={value:e._id,label:"".concat(e.firstName," ").concat(e.lastName," (").concat(e.email,")")};n.push(t)});n=[].concat([{value:"",label:"Select"}],Object(Ne.a)(n)),e.setState({shopperOptions:n,shoppers:a})}}).catch(function(e){console.error({error:e})}));var r=this.props.location.search,o=je.a.parse(r),l=o.page?Number(o.page):this.state.activePage,s=o.status?o.status:this.state.status,i=o.sort?o.sort:this.state.sort,c=o.sortBy?o.sortBy:this.state.sortBy,d=o.search?o.search:this.state.search,m=o.size?o.size:this.state.size,u=o.selectedPaymentMethod?o.selectedPaymentMethod:this.state.selectedPaymentMethod,p=o.filterDate?o.filterDate:this.state.filterDate,h=o.dateStart?new Date(o.dateStart):this.state.dateStart,g=o.dateEnd?new Date(o.dateEnd):this.state.dateEnd,f=o.dateStart?Object(_e.default)(new Date(o.dateStart),"yyyy-MM-dd'T'HH:mm:ss"):this.state.dateStartStr,E=o.dateEnd?Object(_e.default)(new Date(o.dateEnd),"yyyy-MM-dd'T'HH:mm:ss"):this.state.dateEndStr,y="?"+je.a.stringify(o);this.setState({activePage:l,status:s,sort:i,sortBy:c,search:d,size:m,dateStart:h,dateEnd:g,dateStartStr:f,dateEndStr:E,selectedPaymentMethod:u,filterDate:p,singleDetails:this.state.orders[0],pageName:t&&t.name?t.name:""});var v=JSON.parse(N("defaultPage"));this.refreshOrders(y,v)}},{key:"showNotification",value:function(e){if(e&&"string"===typeof e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:2};t&&this.refs.notify&&this.refs.notify.notificationAlert?this.refs.notify.notificationAlert(t):console.error("'this.refs.notify.notificationAlert' not found!")}}},{key:"showNotificationError",value:function(e,t){if(e&&"string"===typeof e){var a={place:t||"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:2};a&&this.refs.notify&&this.refs.notify.notificationAlert?this.refs.notify.notificationAlert(a):console.error("'this.refs.notify.notificationAlert' not found!")}}},{key:"renderDetails",value:function(){var e=this,t=this.state.singleDetails,a=JSON.parse(N("userData")),n=JSON.parse(N("defaultPage")),r="",l="";return a&&a.email&&(r=a.email,l=a.sessionToken),this.state.isLoadingOrderDetail?o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{colSpan:"8"},o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoadingOrderDetail}))))):this.state.orders instanceof Array&&this.state.orders.length>0?o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement("center",null,o.a.createElement("h4",{className:"text-navy",style:{fontSize:18,fontWeight:"600"}},"Order No.: ",o.a.createElement("span",{style:{fontFamily:"monospace"}},t._id.toString()))),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginTop:25}},o.a.createElement("div",{style:{flex:1,display:"flex",flexDirection:"row"}},o.a.createElement("div",null,this.renderImage(this.state.singleDetails)),o.a.createElement("div",{style:{paddingLeft:10,paddingTop:5}},o.a.createElement("p",{style:{fontWeight:"600",color:"#3B3A39",fontSize:14}},this.state.singleDetails.customer.firstName," ",this.state.singleDetails.customer.lastName),o.a.createElement("p",{style:{fontWeight:"600",color:"#3B3A39",fontSize:14}},this.state.singleDetails.customer.mobileNumbers[0]))),o.a.createElement("div",{style:{flex:1}},o.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},o.a.createElement("div",{className:"roundLabel dining-option",style:{backgroundColor:"#F8BF45",width:"60%"}},t.products[t.products.length-1].diningOption),o.a.createElement("div",{className:"roundLabel selected-payment-option",style:{backgroundColor:"#D16E66",width:"60%"}},"gcash"===t.selectedPaymentOption&&t.paymongoDetail&&t.paymongoDetail.commissionPercentage?o.a.createElement(o.a.Fragment,null,"paymongo gcash"):o.a.createElement(o.a.Fragment,null,t.selectedPaymentOption)))))),o.a.createElement("div",null,o.a.createElement(_.FormGroup,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement("label",{className:"control-label",style:{fontSize:"12px"}},"Payment Status: ",this.renderOrderStatus(t.status))),this.state.isGrocery&&o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Input,{disabled:"cancelled"===this.state.singleDetails.status||"void"===this.state.singleDetails.status||this.state.singleDetails.requestedForVoid,style:{marginTop:"5px",width:"auto"},className:"form-control-sm",type:"select",onChange:function(a){var r=a.target.value;if(!(r&&r.length>0))return e.showNotificationError("No status selected. Please select a status!"),!1;if(!window.confirm("Are you sure you want to update this order?"))return!1;t.status=r,e.setState({singleDetails:Object(A.a)({},e.state.singleDetails,{status:r})});var o={status:t.status};l&&D(l).patch("/provider/places/".concat(n,"/orders/").concat(t._id,"/update-order"),o).then(function(a){if(a&&a.data){var n=e.state.orders,r=n.findIndex(function(e){return e._id===t._id});n[r]=t,e.setState({orders:n}),e.showNotification("Order was successfully updated.")}}).catch(function(t){e.setState({submitted:!1,isSaving:!1}),t.response&&"string"===typeof t.response?e.showNotificationError(t.response):e.showNotificationError("There is a error updating the order!")})},value:this.state.singleDetails.status},o.a.createElement("option",{value:""},"Select"),o.a.createElement("option",{value:"paid"},"Paid"),o.a.createElement("option",{value:"cancelled"},"Cancel"),o.a.createElement("option",{value:"void"},"Void")))),o.a.createElement(_.FormGroup,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement("label",{className:"control-label",style:{fontSize:"12px"}},"Order Status: ",this.renderDeliveryStatusBadge(t.orderStatus))),this.state.isGrocery&&o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Input,{disabled:"cancelled"===this.state.singleDetails.status||"void"===this.state.singleDetails.status||this.state.singleDetails.requestedForVoid,style:{marginTop:"5px",width:"auto"},type:"select",className:"form-control-sm",onChange:function(a){var o=a.target.value;if(!(o&&o.length>0))return e.showNotificationError("No status selected. Please select a status!"),!1;if(!window.confirm("Are you sure you want to update this order?"))return!1;var s=!0,i=t.orderStatus,c={};i instanceof Array&&i.length>0&&(c=i[i.length-1]);var d={time:new Date,email:r,status:"Deployed"},m={time:new Date,email:r,status:"Picked up"},u={time:new Date,email:r,status:"Paid"},p={time:new Date,email:r,status:"Order Completed"};if(c&&c.status){var h=c.status;h&&h.status&&"Requested for void"===h.status&&e.showNotificationError('Order is already is requested for void! Please mark the order "Void"'),"Confirmed"===o?(e.showNotificationError("Order is already confirmed!"),s=!1):"Deployed"===o?"Confirmed"===h?i=[].concat(Object(Ne.a)(i),[d]):"Deployed"===h?(e.showNotificationError("Order is already deployed!"),s=!1):"Picked up"===h?(e.showNotificationError("Order is already picked up!"),s=!1):"Order Completed"===h?(e.showNotificationError("Order is already completed!"),s=!1):"Paid"===h?(e.showNotificationError("Order is already paid!"),s=!1):"Received Order"===h?(e.showNotificationError("Cannot update because the order was already received!"),s=!1):"Requested for void"===h?(e.showNotificationError("Cannot update because the order has been requested for void!"),s=!1):(e.showNotificationError("Cannot update because the order. Order status is ".concat(h,"!")),s=!1):"Picked up"===o?"Confirmed"===h?i=[].concat(Object(Ne.a)(i),[d,m]):"Deployed"===h||"Ready to Pickup"===h?i=[].concat(Object(Ne.a)(i),[m]):"Picked up"===h?(e.showNotificationError("Order is already picked up!"),s=!1):"Order Completed"===h?(e.showNotificationError("Order is already completed!"),s=!1):"Paid"===h?(e.showNotificationError("Order is already paid!"),s=!1):"Received Order"===h?(e.showNotificationError("Cannot update because the order was already received!"),s=!1):"Requested for void"===h?(e.showNotificationError("Cannot update because the order has been requested for void!"),s=!1):(e.showNotificationError("Cannot update because the order. Order status is ".concat(h,"!")),s=!1):"Order Completed"===o?"Confirmed"===h?i=[].concat(Object(Ne.a)(i),[d,m,u,p]):"Deployed"===h?i=[].concat(Object(Ne.a)(i),[m,u,p]):"Picked up"===h||"Ready to Pickup"===h?i=[].concat(Object(Ne.a)(i),[u,p]):"Paid"===h?i=[].concat(Object(Ne.a)(i),[p]):"Order Completed"===h?(e.showNotificationError("Order is already completed!"),s=!1):"Paid"===h?(e.showNotificationError("Order is already paid!"),s=!1):"Received Order"===h?(e.showNotificationError("Cannot update because the order was already received!"),s=!1):"Requested for void"===h?(e.showNotificationError("Cannot update because the order has been requested for void!"),s=!1):(e.showNotificationError("Cannot update because the order. Order status is ".concat(h,"!")),s=!1):"Confirmed"===h?(e.showNotificationError("Order is already confirmed!"),s=!1):"Deployed"===h?(e.showNotificationError("Order is already deployed!"),s=!1):"Picked up"===h?(e.showNotificationError("Order is already picked up!"),s=!1):"Order Completed"===h?(e.showNotificationError("Order is already completed!"),s=!1):"Paid"===h?(e.showNotificationError("Order is already paid!"),s=!1):"Received Order"===h?(e.showNotificationError("Cannot update because the order was already received!"),s=!1):"Requested for void"===h?(e.showNotificationError("Cannot update because the order has been requested for void!"),s=!1):(e.showNotificationError("Cannot update because the order. Order status is ".concat(h,"!")),s=!1)}if(s){t.orderStatus=i;var g={orderStatus:t.orderStatus};"Order Completed"!==o&&"Paid"!==o||(t.status="paid"),l&&D(l).patch("/provider/places/".concat(n,"/orders/").concat(t._id,"/update-order"),g).then(function(a){if(a&&a.data){var n=e.state.orders,r=n.findIndex(function(e){return e._id===t._id});n[r]=t,e.setState({orders:n,singleDetails:t}),e.showNotification("Order was successfully updated.")}}).catch(function(t){e.setState({submitted:!1,isSaving:!1}),t.response&&"string"===typeof t.response?e.showNotificationError(t.response):e.showNotificationError("There is a error updating the order!")})}},value:this.state.singleDetails.orderStatus&&this.state.singleDetails.orderStatus.length>0?this.state.singleDetails.orderStatus[this.state.singleDetails.orderStatus.length-1].status:""},o.a.createElement("option",{value:""},"Select"),o.a.createElement("option",{value:"Confirmed"},"Confirmed"),o.a.createElement("option",{value:"Deployed"},"Deployed"),o.a.createElement("option",{value:"Picked up"},"Picked Up"),o.a.createElement("option",{value:"Order Completed"},"Order Completed")))),o.a.createElement(_.FormGroup,null,o.a.createElement(_.Col,{sm:"12",style:{textAlign:"right"}},o.a.createElement(_.Button,{color:"link","aria-label":"PDF",style:{padding:"0.5rem 0.25rem"}},o.a.createElement("span",{"aria-hidden":!0},o.a.createElement(me.a,{icon:"file-pdf",size:"lg",onClick:function(){e.printMinDetails(t._id)}}))),o.a.createElement(_.Button,{color:"link","aria-label":"Print",style:{padding:"0.5rem 0.25rem"}},o.a.createElement("span",{"aria-hidden":!0},o.a.createElement(me.a,{icon:"print",size:"lg",onClick:function(){e.printDetails(t._id)}}))))),o.a.createElement(_.FormGroup,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement("hr",{style:{backgroundColor:"rgba(169,169,169,0.5)"}})))),o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Table,{borderless:!0,responsive:!0,style:{fontSize:"12px",marginBottom:"0"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"\xa0"),o.a.createElement("th",null,"Item"),o.a.createElement("th",null,"Qty"),o.a.createElement("th",null,"Price"),o.a.createElement("th",null,"Total"))),o.a.createElement("tbody",null,this.renderProducts(this.state.singleDetails),this.renderAddedProducts(this.state.singleDetails)))),o.a.createElement(_.CardBody,null,this.renderPaymentInfo(),this.renderOrderInfo(this.state.singleDetails),this.renderCustomerInfo(this.state.singleDetails),this.state.isGrocery&&this.renderShopperInfo(this.state.singleDetails&&this.state.singleDetails.shopper),this.state.singleDetails.isDelivery&&this.renderDeliveryStatus())):o.a.createElement(_.Table,{borderless:!0},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{colSpan:"7"},o.a.createElement("label",{className:"text-danger"},o.a.createElement("em",null,"No Orders found."))))))}},{key:"renderPaymentInfo",value:function(){var e=this.state.singleDetails,t=e.page,a=(t&&t.markup&&t.markup.value?t.markup.value:0)/100,n=0,r=e.extraFees&&e.extraFees.serviceCharge||0,l=e.products,s=e.addedProducts;s&&s instanceof Array&&s.length>0&&(l=[].concat(Object(Ne.a)(l),Object(Ne.a)(s)));var i=l.filter(function(e){return!0!==e.unavailable}),c=0,d=0,m=0,u=e.delivery&&e.delivery[0]&&e.delivery[0].fee?e.delivery[0].fee:0,p=e.convenienceFee&&e.convenienceFee.value?e.convenienceFee.value:0,h=e.pointsAmountUsed?e.pointsAmountUsed:0,g=e.walletAmountUsed?e.walletAmountUsed:0,f=e.orderPromoDiscount?e.orderPromoDiscount:0,E=0;i.forEach(function(e){if(d+=e.price*e.quantity,e.markup&&e.markup>0?m+=e.markup*e.quantity:m+=e.price*e.quantity*a,e.containerFee&&e.containerFee.amount){var t=!(!e.containerFee.supportedOrderOption||!e.containerFee.supportedOrderOption.delivery)&&e.containerFee.supportedOrderOption.delivery,r=!(!e.containerFee.supportedOrderOption||!e.containerFee.supportedOrderOption.pickup)&&e.containerFee.supportedOrderOption.pickup,o=e.days>1?e.days:1;"delivery"===e.diningOption&&t?n+=e.containerFee.amount*e.quantity*o:"pickup"===e.diningOption&&r&&(n+=e.containerFee.amount*e.quantity*o)}if(e.promos&&e.promos.length>0){var l=e.promos[0],s=l.calculation.type,i=l.calculation.value,c=1;e.days&&e.days>1&&(c=e.days),E+="percent"===s?e.price*e.quantity*c*(i/100):i}f+=E});var y=0,v=d+m+p+n+r+u;if("paynamics"===e.selectedPaymentOption){var b=e.paynamicsDetail.commissionPercentage;"customer"===e.paynamicsDetail.commissionType&&(y=v/(1-b)-v)}else if("paymongo"===e.selectedPaymentOption){var A=e.paymongoDetail.commissionPercentage,N=e.paymongoDetail.commissionFixed,S=e.paymongoDetail.commissionFixedCondition?e.paymongoDetail.commissionFixedCondition:0;"customer"===e.paymongoDetail.commissionType?y=(v+N)/(1-A)-v:"streetby"===e.paymongoDetail.commissionType&&v>S&&(y=N)}var C=(c=this.state.isGrocery?d+m+p+n+r+u+y:d+m+p+n+r+y)-(h+g+f);return o.a.createElement("div",{style:{color:"rgba(34, 42, 66, 0.7) !important",fontSize:"12px"}},o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:8}},o.a.createElement("label",{className:"control-label"},"Items Total"),o.a.createElement("label",{className:"txt-medium label-secondary"},"\u20b1",Ja(d))),o.a.createElement("hr",{style:{backgroundColor:"rgba(169,169,169,0.5)"}}),this.state.isGrocery?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:10}},o.a.createElement("label",null,"Cargo Fee"),o.a.createElement("label",{className:"label-secondary"},"\u20b1",Ja(p))),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:10}},o.a.createElement("label",null,"Convenience Fee"),o.a.createElement("label",{className:"label-secondary"},"\u20b1",Ja(m)))):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:10}},o.a.createElement("label",null,"Container Fee"),o.a.createElement("label",{className:"label-secondary"},"\u20b1",Ja(n))),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:10}},o.a.createElement("label",null,"Service Fee"),o.a.createElement("label",{className:"label-secondary"},"\u20b1",Ja(r)))),this.state.isGrocery&&o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:10}},o.a.createElement("label",null,"Delivery Fee"),o.a.createElement("label",{className:"label-secondary"},"\u20b1",Ja(u))),y>0&&o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:10}},o.a.createElement("label",{className:"text-success"},"Gateway Fees"),o.a.createElement("label",{className:"text-success"},"\u20b1",Ja(y))),f>0&&o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:10,paddingLeft:10,fontStyle:"italic"}},o.a.createElement("label",null,"Promos"),o.a.createElement("label",{className:"label-secondary"},"\u20b1",Ja(f))),g>0&&o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:10,paddingLeft:10,fontStyle:"italic"}},o.a.createElement("label",null,"Wallet"),o.a.createElement("label",{className:"label-secondary"},"\u20b1",Ja(g))),h>0&&o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:10,paddingLeft:10,fontStyle:"italic"}},o.a.createElement("label",null,"Points"),o.a.createElement("label",{className:"label-secondary"},"\u20b1",Ja(h))),o.a.createElement("hr",{style:{backgroundColor:"rgba(169,169,169,0.5)"}}),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:10}},o.a.createElement("label",{className:"control-label"},"Grand Total"),o.a.createElement("label",{className:"txt-medium label-secondary"},"\u20b1",Ja(c))),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:10}},o.a.createElement("label",{className:"control-label"},"Customer Payout"),o.a.createElement("label",{className:"txt-medium label-secondary"},"\u20b1",Ja(C))),o.a.createElement("hr",{style:{backgroundColor:"rgba(169,169,169,0.5)"}}))}},{key:"renderVerticalLine",value:function(){return o.a.createElement("div",{style:{borderLeft:"2px solid #344675",height:40}})}},{key:"deliveryStatusParser",value:function(e){switch(e){case"confirmed":return"Confirmed";case"placed":return"Placed";case"inPreparation":return"being Prepared";case"inTransit":return"on the way";case"orderCompleted":return"Completed";default:return"Updated"}}},{key:"renderDeliveryStatus",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{fontSize:"12px",paddingBottom:10}},o.a.createElement("label",{className:"control-label"},"Delivery Status")),o.a.createElement("div",{style:{fontSize:"12px"}},o.a.createElement("div",{style:{width:"45%"}},this.state.singleDetails.delivery.map(function(t,a){var n=e.state.singleDetails.delivery.length-1===a,r=e.deliveryStatusParser(t.status);return o.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},key:a},o.a.createElement("p",{className:"text-primary",style:{fontSize:12,fontWeight:"500",textAlign:"center"}},"Order is ",r),o.a.createElement("p",{className:"text-muted",style:{fontSize:11,margin:0}},Object(_e.default)(new Date(t.updatedAt),"MMM dd, yyyy hh:mm a")),!n&&e.renderVerticalLine())}))))}},{key:"renderOrderInfo",value:function(e){var t=this,a=e.delivery[e.delivery.length-1];return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{fontSize:"12px"}},o.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginBottom:10}},o.a.createElement("div",{style:{flex:1.5}},o.a.createElement("label",null,"Est. Delivery Pick-up Time")),o.a.createElement("div",{style:{flex:1}},o.a.createElement("label",{className:"label-secondary"},a&&a.pickupDate?Object(_e.default)(new Date(a.pickupDate),"MMM dd, yyyy hh:mm a"):"No date selected"))),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginBottom:10}},o.a.createElement("div",{style:{flex:1.5}},o.a.createElement("label",null,"Ordered On")),o.a.createElement("div",{style:{flex:1}},o.a.createElement("label",{className:"label-secondary"},Object(_e.default)(new Date(e.createdAt),"MMM dd, yyyy hh:mm a")))),a&&a.deliveryEstimateDescription?o.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginBottom:10}},o.a.createElement("div",{style:{flex:1.5}},o.a.createElement("label",null,"Estimated Time")),o.a.createElement("div",{style:{flex:1}},o.a.createElement("label",{className:"label-secondary"},a.deliveryEstimateDescription))):o.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginBottom:10}},o.a.createElement("div",{style:{flex:1.5}},o.a.createElement("label",null,"Booked For")),o.a.createElement("div",{style:{flex:1}},o.a.createElement("label",{className:"label-secondary"},a&&a.to?Object(_e.default)(new Date(a.to),"MMM dd, yyyy hh:mm a"):"No date selected"))),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginBottom:10}},o.a.createElement("div",{style:{flex:1.5}},o.a.createElement("label",null,"Dining Option")),o.a.createElement("div",{style:{flex:1}},o.a.createElement("label",{className:"label-secondary"},e.products[0].diningOption.toUpperCase()))),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginBottom:10}},o.a.createElement("div",{style:{flex:1.5}},o.a.createElement("label",null,"Payment Method")),o.a.createElement("div",{style:{flex:1}},o.a.createElement("label",{className:"label-secondary"},"gcash"===e.selectedPaymentOption&&e.paymongoDetail&&e.paymongoDetail.commissionPercentage?"PAYMONGO GCASH":e.selectedPaymentOption.toUpperCase()))),o.a.createElement("hr",{style:{backgroundColor:"rgba(169,169,169,0.5)"}}),o.a.createElement("div",null,o.a.createElement("label",{className:"control-label"},"Notes from the Customer"),o.a.createElement("p",{style:{color:"#447098",paddingLeft:10,marginTop:10}},e.consumerNotes||"No note added")),o.a.createElement("hr",{style:{backgroundColor:"rgba(169,169,169,0.5)"}}),"for_confirmation"!==e.status?o.a.createElement("div",null,o.a.createElement("label",{className:"control-label"},"Provider Notes"),o.a.createElement("p",{style:{color:"#447098",paddingLeft:10,marginTop:10}},e.notes||"No note added")):o.a.createElement("div",null,o.a.createElement("label",{className:"control-label"},"Provider Notes"),o.a.createElement("div",null,o.a.createElement("textarea",{style:{borderColor:"rgba(169,169,169,0.5)",width:"100%",marginTop:10,resize:"none",maxHeight:"450px"},placeholder:"Type something...",rows:"8",onChange:function(e){return t.setState({providerNote:e.target.value})},autoComplete:"off"}))),o.a.createElement("hr",{style:{backgroundColor:"rgba(169,169,169,0.5)"}})))}},{key:"checkProductPhotos",value:function(e){var t;return t=e&&e._id&&e._id.photos&&e._id.photos.length>0?e._id.photos[e._id.photos.length-1].medium:pe.a,o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Media,{left:!0,top:!0,href:"#"},o.a.createElement(_.Media,{object:!0,"data-src":t,src:t,alt:e.name,style:{maxWidth:"50px",maxHeight:"50px"}})))}},{key:"renderProducts",value:function(e){var t=this;return e.products.map(function(e,a){return o.a.createElement("tr",{key:a,className:e.unavailable?"deleted-item":""},o.a.createElement("td",null,a+1,"."),o.a.createElement("td",{width:"50%"},o.a.createElement(_.Media,null,t.checkProductPhotos(e),o.a.createElement(_.Media,{body:!0},o.a.createElement(_.Media,{style:{fontSize:"12px",marginBottom:"0px"},heading:!0},e.name)))),o.a.createElement("td",{width:"5%"},e.quantity),o.a.createElement("td",{width:"20%"},"\u20b1",Ja(e.price)),o.a.createElement("td",{width:"20%"},"\u20b1",Ja(e.price*e.quantity)))})}},{key:"renderAddedProducts",value:function(e){var t=this,a=e.products,n=e.addedProducts,r=a&&a instanceof Array?a.length:0;if(n&&n instanceof Array&&n.length>0)return n.map(function(e,a){return o.a.createElement("tr",{key:a,className:e.unavailable?"deleted-item":"added-item"},o.a.createElement("td",null,r+a+1,"."),o.a.createElement("td",{width:"50%"},o.a.createElement(_.Media,null,t.checkProductPhotos(e),o.a.createElement(_.Media,{body:!0},o.a.createElement(_.Media,{style:{fontSize:"12px",marginBottom:"0px"},heading:!0},e.name)))),o.a.createElement("td",{width:"5%"},e.quantity),o.a.createElement("td",{width:"20%"},"\u20b1",Ja(e.price)),o.a.createElement("td",{width:"20%"},"\u20b1",Ja(e.price*e.quantity)))})}},{key:"pickUpOrder",value:function(e){var t=this,a=JSON.parse(N("userData")).sessionToken,n={data:{fromMerchant:!0,requestType:"delivery",delivery:e.delivery[e.delivery.length-1],orderId:e._id,deliveryStatus:"inTransit"}};this.props.pickUp(n,e._id,a,function(e,a){if(!a&&e){var n=t.state.orders,r=t.state.singleDetails._id;if(n instanceof Array&&n.length>0&&"undefined"!==typeof r){var o=n.findIndex(function(e){return e._id.toString()===r.toString()}),l=n[o],s=l.delivery[l.delivery.length-1];s=Object(A.a)({},s,{status:e.data.delivery.status,updatedAt:e.data.delivery.updatedAt}),l.delivery.push(s),n[o]=l,t.setState({orders:n,canPickUp:!1},function(){return t.togglePickupModal()})}}else a&&(t.togglePickupModal(),t.showNotificationError("There error on confirming the order!"))})}},{key:"showDetails",value:function(e){var t=this;this.setState({isLoadingOrderDetail:!0});var a=JSON.parse(N("userData")),n=JSON.parse(N("defaultPage")),r=a.sessionToken;a&&""!==a&&D(r).get("places/".concat(n,"/orders/").concat(e)).then(function(e){if(e&&e.data){var a=e.data;t.setState({singleDetails:a,canPickUp:a.isDelivery&&"inPreparation"===a.delivery[a.delivery.length-1].status,isLoadingOrderDetail:!1})}else t.showNotificationError("Order not found!"),t.setState({singleDetails:{},canPickUp:!1}),t.setState({isLoadingOrderDetail:!1})}).catch(function(e){t.setState({isLoadingOrderDetail:!1}),t.showNotificationError("There is an error fetching order. Please try again"),setTimeout(function(){t.props.history.push("/order-list"),window.location.reload()},1e3)})}},{key:"changeStatus",value:function(e){var t=this.state.orders,a=this.state.singleDetails._id;if(t instanceof Array&&t.length>0&&"undefined"!==typeof a){var n=t.findIndex(function(e){return e._id.toString()===a.toString()});t[n].status=e,this.setState({orders:t})}else this.showNotificationError("Order not found!")}},{key:"orderAction",value:function(e,t){var a=this,n=JSON.parse(N("userData")).sessionToken;if("confirm"===e)this.props.saveNewStatus({newStatus:e,providerNote:this.state.providerNote||""},t,n,function(e,t){if(a.setState({modalConfirm:!1}),!t&&e){var n=a.state.orders,r=a.state.singleDetails._id;if(n instanceof Array&&n.length>0&&"undefined"!==typeof r){var o=n.findIndex(function(e){return e._id.toString()===r.toString()});n[o].status=e.data.data.status,n[o].notes=e.data.data.notes,a.setState({orders:n})}else a.showNotificationError("Order not found!")}else t&&a.showNotificationError("There is an error on confirming the order!")});else if("cancel"===e){var r={message:this.state.reason,code:this.state.subReason};this.props.cancelAction(t,r,n,function(e,t){if(a.setState({modal:!1}),!t&&e){var n=a.state.orders,r=a.state.singleDetails._id;if(n instanceof Array&&n.length>0&&"undefined"!==typeof r){var o=n.findIndex(function(e){return e._id.toString()===r.toString()});n[o].status="cancelled",n[o].notes=a.state.reason,a.setState({orders:n})}else a.showNotificationError("Order not found!")}else t&&a.showNotificationError("There is an error on cancelling the order!")})}}},{key:"printDetails",value:function(e){var t=this,a=JSON.parse(N("userData")),n=JSON.parse(N("defaultPage")),r=a.sessionToken;e&&a&&""!==a?D(r).get("places/".concat(n,"/orders/").concat(e)).then(function(e){if(e&&e.data){var a=e.data,n=window.open("","_blank",""),r=a.isDelivery&&a.delivery.length>0?a.delivery[a.delivery.length-1].deliveryEstimateDescription:"notDelivery";r="notDelivery"===r?"":""===r?"Book For":"Deliver Now";var o,l,s="",i=0,c=0,d=a.pointsAmountUsed?a.pointsAmountUsed:0,m=a.walletAmountUsed?a.walletAmountUsed:0,u=a.orderPromoDiscount?a.orderPromoDiscount:0,p=0,h=a.customer.email?a.customer.email:"&nbsp;&nbsp;&nbsp;&nbsp;",g=a.customer.mobileNumbers&&a.customer.mobileNumbers instanceof Array&&a.customer.mobileNumbers.length>0?a.customer.mobileNumbers[0]:"",f="";if(a.shopper&&t.state.isGrocery){var E="";a.shopper.firstName&&a.shopper.lastName?E="".concat(a.shopper.firstName," ").concat(a.shopper.lastName):a.shopper.firstName?E=a.shopper.firstName:a.shopper.lastName&&(E=a.shopper.lastName);var y=a.shopper&&a.shopper.email?a.shopper.email:"&nbsp;&nbsp;&nbsp;&nbsp;",v=a.shopper&&a.shopper.mobileNumbers&&a.shopper.mobileNumbers instanceof Array&&a.shopper.mobileNumbers.length>0?a.shopper.mobileNumbers[0].number:"";f='<p><label style="white-space: nowrap;">Shopper:</label> '.concat(E,'</p>\n            <p><label style="white-space: nowrap;">Shopper Email:</label> ').concat(y,' &nbsp;&nbsp;&nbsp;&nbsp;<span style="white-space: nowrap;"><label>Shopper Phone No.:</label> ').concat(v,"</span></p>")}var b=a.delivery&&a.delivery[0]&&a.delivery[0].fee?a.delivery[0].fee:0,A="";A=a.delivery&&a.delivery[0]&&a.delivery[0].deliveryAddress&&a.delivery[0].deliveryAddress.address?a.delivery[0].deliveryAddress.address:"";var N;N=a.delivery&&a.delivery[0]&&a.delivery[0].deliveryAddress&&a.delivery[0].deliveryAddress.address&&a.delivery[0].deliveryAddress.landmark?" | "+a.delivery[0].deliveryAddress.landmark:"";var S=a.convenienceFee&&a.convenienceFee.value?a.convenienceFee.value:0;A+=N;var C=a.delivery&&a.delivery[0]&&a.delivery[0].deliveryAddress&&a.delivery[0].deliveryAddress.googleAddress?a.delivery[0].deliveryAddress.googleAddress:"",w=a.consumerNotes?a.consumerNotes:"No notes",P=a.invoiceDetails&&a.invoiceDetails.customerCash?a.invoiceDetails.customerCash:0,k=a.delivery&&a.delivery[0]&&a.delivery[0].deliveryAddress&&a.delivery[0].deliveryAddress.name?a.delivery[0].deliveryAddress.name:"None",D=a.delivery&&a.delivery[0]&&a.delivery[0].deliveryAddress&&a.delivery[0].deliveryAddress.phone?a.delivery[0].deliveryAddress.phone:"None",O=0,x=a.extraFees&&a.extraFees.serviceCharge||0,T="",I=a.products,F=a.addedProducts,M=I;F&&F instanceof Array&&F.length>0&&(M=[].concat(Object(Ne.a)(I),Object(Ne.a)(F)));var B="N/A";if(a.orderStatus&&a.orderStatus instanceof Array&&a.orderStatus.length>0){var G=a.orderStatus[a.orderStatus.length-1].status;"Confirmed"===G?B="Confirmed":"Deployed"===G?B="Deployed":"Picked up"===G?B="Picked Up":"Requested for void"===G?B="Requested for void":"Order Completed"===G?B="Order Completed":"Paid"===G?B="Paid":"Cancelled"===G?B="Cancelled":"Received Order"===G&&(B="Received Order")}var L="N/A";"for_confirmation"===a.status?L="For Confirmation":"payment_pending"===a.status?L="Pending":"paid"===a.status?L="Paid":"cancelled"===a.status?L="Cancelled":"void"===a.status&&(L="Void"),M.forEach(function(e,t){T=t%2===1?"odd":"";var n="";e.unavailable&&(n=" deleted-item");var r=e._id&&e._id.barcode?e._id.barcode:"",o=e._id&&e._id.itemCode?e._id.itemCode:"",l="";if(e._id&&(l=e._id._id?"..."+ja(e._id._id.toString()):"..."+ja(e._id.toString())),s+='<tr class="'.concat(T).concat(n,'">\n              <td nowrap>').concat(t+1,". \u25a2</td>\n              <td>").concat(e.name,"</td>\n              <td>").concat(l,"</td>\n              <td>").concat(o,"</td>\n              <td>").concat(r,"</td>\n              <td nowrap>&#8369;").concat(Ja(e.price),'</td>\n              <td align="center">').concat(e.quantity,"</td>\n              <td nowrap>&#8369;").concat(Ja(e.price*e.quantity),"</td>\n            </tr>"),!0!==e.unavailable&&(i+=e.price*e.quantity),!0!==e.unavailable&&e.markup&&e.markup>0&&(c+=e.markup*e.quantity),!0!==e.unavailable&&e.containerFee&&e.containerFee.amount){var d=!(!e.containerFee.supportedOrderOption||!e.containerFee.supportedOrderOption.delivery)&&e.containerFee.supportedOrderOption.delivery,m=!(!e.containerFee.supportedOrderOption||!e.containerFee.supportedOrderOption.pickup)&&e.containerFee.supportedOrderOption.pickup;"delivery"===a.selectedPaymentOption&&d?O+=e.containerFee.amount:"pickup"===a.selectedPaymentOption&&m&&(O+=e.containerFee.amount)}if(e.promos&&e.promos.length>0){var h=a.promos[0],g=h.calculation.type,f=h.calculation.value,E=1;a.days&&a.days>1&&(E=a.days),p+="percent"===g?a.price*a.quantity*E*(f/100):f,u+=p}});var R="",j="",J="",U="";t.state.isGrocery?(j="<p>Cargo Fee:</>\n              <p>Convenience Fee:</>",R="<p>&#8369;".concat(Ja(S),"</p>\n              <p>&#8369;").concat(Ja(c),"</p>")):(U="<p>Container Fee:</>\n            <p>Service Charge:</>",J="<p>&#8369;".concat(Ja(O),"</p>\n            <p>&#8369;").concat(Ja(x),"</p>")),o=(l=i+c+S+O+x+b)-(d+m+u);var H="<html>\n              <head>\n                <title>".concat(a.page.name," - Order No. ").concat(a._id,'</title>\n                <style>\n                  body {\n                    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n                    font-size: 13px;\n                  }\n                  .container { margin: 25px; overflow:auto; }\n                  h1, h2, h3, h4, h5 { margin:0 0 10px; }\n                  h1 { font-size: 16px; }\n                  h2 { font-size: 15px; }\n                  h3 { font-size: 14px; }\n                  h4 { font-size: 13px; }\n                  table, th {\n                    padding: 10px;\n                    border-bottom: 1px solid #ccc;\n                    border-collapse: collapse;\n                  }\n                  td { padding: 10px; }\n                  table.items, table.items th, table.items td { border-bottom: 1px solid #ccc; }\n                  thead tr { background-color: #f5f6fa !important; border-top: 1px solid #ccc; padding: 10px 15px; }\n                  tr.odd { background-color: #efefef !important; }\n                  tr.deleted-item { text-decoration: line-through; opacity: .65; font-style: italic }\n                  th { text-align: left; text-transform: uppercase; font-weight: bold; font-size: 13px; }\n                </style>\n              </head>\n              <body>\n                <div class="container">\n                  <center><h1 style="width:100%;">').concat(a.page.name.toUpperCase(),'</h1></center>\n                  <center><h1 style="width:100%; margin-bottom:25px;">ORDER LIST</h1></center>\n                  <table style="width:100%; font-size:13px; border-bottom: 1px solid #ccc;">\n                    <thead>\n                      <tr>\n                        <th width="50%">Order No.:<span style="margin-left:15px;"> ').concat(a._id,"</span></th>\n                        <th>Status: ").concat(L," - ").concat(B," </th>\n                        <th>Order Date: ").concat(Object(_e.default)(new Date(a.createdAt),"MMM dd, yyyy hh:mm a"),' </th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      <tr style="border-bottom:none;">\n                        <td width="50%">\n                          <table style="width:100%; font-size:14px; border-bottom:none;">\n                            <tbody>\n                              <tr>\n                                <td style="border-bottom:none; padding-left:0;">\n                                  <p><label style="white-space: nowrap;">Customer Name:</label> ').concat(a.customer.firstName," ").concat(a.customer.lastName,'</p>\n                                  <p><label style="white-space: nowrap;">Email:</label> ').concat(h,' &nbsp;&nbsp;&nbsp;&nbsp;<span style="white-space: nowrap;"><label>Phone:</label> ').concat(g,'</span></p>\n                                  <p><label style="white-space: nowrap;">Receiver:</label> ').concat(k,' &nbsp;&nbsp;&nbsp;&nbsp;<span style="white-space: nowrap;"><label>Phone:</label> ').concat(D,"</span></p>\n                                  ").concat(f,'\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </td>\n                        <td colspan="2">\n                          <table style="width:100%; font-size:14px; border-bottom:none;">\n                            <tbody>\n                              <tr>\n                                <td style="border-bottom:none;">\n                                  <p><label>Booking Option:</label> ').concat(r,"</p>\n                                  <p><label>Delivery Date:</label> ").concat(Object(_e.default)(new Date(a.timeSelected),"MMM dd, yyyy hh:mm a"),"</p>\n                                  <p><label>Delivery Address:</label> ").concat(A,"</p>\n                                  <p><label>Google Map Address:</label> ").concat(C,'</p>\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                  <table style="width:100%; font-size:14px; border-bottom:none;">\n                    <tbody>\n                      <tr>\n                        <td>\n                          <table style="max-width:50%; border-bottom:none; font-size:14px;">\n                            <tbody>\n                              <tr style="font-weight:bold;">\n                                <td>\n                                  <p>Items Total:</p>\n                                  <p>Delivery Fee:</>\n                                  ').concat(j,"\n                                  ").concat(U,"\n                                  <p>GRAND TOTAL:</>\n                                </td>\n                                <td>\n                                  <p>&#8369;").concat(Ja(i),"</p>\n                                  <p>&#8369;").concat(Ja(b),"</p>\n                                  ").concat(R,"\n                                  ").concat(J,'\n                                  <p style="text-decoration:underline">&#8369;').concat(Ja(l),'</p>\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </td>\n                        <td colspan="2">\n                          <table style="border-bottom:none; font-size:14px;">\n                            <tbody>\n                              <tr style="font-weight:bold;">\n                                <td>\n                                  <p>Points Used:</p>\n                                  <p>Wallet Used:</>\n                                  <p>Promos:</>\n                                  <p>CUSTOMER PAYOUT:</>\n                                  <p>Cash Prepared:</>\n                                </td>\n                                <td>\n                                  <p>&#8369;').concat(Ja(d),"</p>\n                                  <p>&#8369;").concat(Ja(m),"</p>\n                                  <p>&#8369;").concat(Ja(u),'</p>\n                                  <p style="text-decoration:underline">&#8369;').concat(Ja(o),'</p>\n                                  <p style="text-decoration:underline">&#8369;').concat(Ja(P),'</p>\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                  <table class="items" style="width:100%; font-size:13px;">\n                    <thead>\n                      <tr>\n                        <th>&nbsp;</th>\n                        <th>Item</th>\n                        <th>Item No.</th>\n                        <th>Item Code</th>\n                        <th>Barcode</th>\n                        <th>Price</th>\n                        <th width="50">Quantity</th>\n                        <th>Total</th>\n                      </tr>\n                    <thead>\n                    <tbody>\n                      ').concat(s,'\n                      <tr style="font-weight:bold;">\n                        <td colspan="7" align="right">ITEMS TOTAL:</td>\n                        <td nowrap>&#8369;').concat(Ja(i),'</td>\n                      </tr>\n                      <tr>\n                        <td colspan="8"><p style="padding: 10px 0;"><span style="font-weight:bold;">Customer Notes:</span> <em>').concat(w,"</em></p></td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </body>\n            </html>");n.document.write(H)}else t.showNotificationError("Order not found!")}).catch(function(e){t.showNotificationError("There is an error fetching order. Please try again")}):this.showNotificationError("Order not found!")}},{key:"printMinDetails",value:function(e){var t=this,a=JSON.parse(N("userData")),n=JSON.parse(N("defaultPage")),r=a.sessionToken;e&&a&&""!==a?D(r).get("places/".concat(n,"/orders/").concat(e)).then(function(e){if(e&&e.data){var a=e.data,n=window.open("","_blank",""),r=a.isDelivery&&a.delivery.length>0?a.delivery[a.delivery.length-1].deliveryEstimateDescription:"notDelivery";r="notDelivery"===r?"":""===r?"Book For":"Deliver Now";var o,l,s,i="",c=0,d=0,m=a.pointsAmountUsed?a.pointsAmountUsed:0,u=a.walletAmountUsed?a.walletAmountUsed:0,p=a.orderPromoDiscount?a.orderPromoDiscount:0,h=0,g=a.customer.email?a.customer.email:"",f=a.customer.mobileNumbers&&a.customer.mobileNumbers instanceof Array&&a.customer.mobileNumbers.length>0?a.customer.mobileNumbers[0]:"",E="";if(a.shopper&&t.state.isGrocery){var y="";a.shopper.firstName&&a.shopper.lastName?y="".concat(a.shopper.firstName," ").concat(a.shopper.lastName):a.shopper.firstName?y=a.shopper.firstName:a.shopper.lastName&&(y=a.shopper.lastName);var v=a.shopper&&a.shopper.email?a.shopper.email:"&nbsp;&nbsp;&nbsp;&nbsp;",b=a.shopper&&a.shopper.mobileNumbers&&a.shopper.mobileNumbers instanceof Array&&a.shopper.mobileNumbers.length>0?a.shopper.mobileNumbers[0].number:"";E='<p><label style="white-space: nowrap;">Shopper:</label> '.concat(y,'</p>\n            <p><label style="white-space: nowrap;">Shopper Email:</label> ').concat(v,' &nbsp;&nbsp;&nbsp;&nbsp; <span style="white-space: nowrap;"><label>Shopper Phone No.:</label> ').concat(b,"</span></p>")}var A=a.delivery&&a.delivery[0]&&a.delivery[0].fee?a.delivery[0].fee:0,N="";N=a.delivery&&a.delivery[0]&&a.delivery[0].deliveryAddress&&a.delivery[0].deliveryAddress.address?a.delivery[0].deliveryAddress.address:"";var S;S=a.delivery&&a.delivery[0]&&a.delivery[0].deliveryAddress&&a.delivery[0].deliveryAddress.address&&a.delivery[0].deliveryAddress.landmark?" | "+a.delivery[0].deliveryAddress.landmark:"",s=a.convenienceFee&&a.convenienceFee.value?a.convenienceFee.value:0,N+=S;var C=a.delivery&&a.delivery[0]&&a.delivery[0].deliveryAddress&&a.delivery[0].deliveryAddress.googleAddress?a.delivery[0].deliveryAddress.googleAddress:"",w=a.consumerNotes?a.consumerNotes:"No notes",P=a.invoiceDetails&&a.invoiceDetails.customerCash?a.invoiceDetails.customerCash:0,k=a.delivery&&a.delivery[0]&&a.delivery[0].deliveryAddress&&a.delivery[0].deliveryAddress.name?a.delivery[0].deliveryAddress.name:"None",D=a.delivery&&a.delivery[0]&&a.delivery[0].deliveryAddress&&a.delivery[0].deliveryAddress.phone?a.delivery[0].deliveryAddress.phone:"None",O=0,x=a.extraFees&&a.extraFees.serviceCharge||0,T="",I=a.products,F=a.addedProducts,M=I;F&&F instanceof Array&&F.length>0&&(M=[].concat(Object(Ne.a)(I),Object(Ne.a)(F)));var B="N/A";if(a.orderStatus&&a.orderStatus instanceof Array&&a.orderStatus.length>0){var G=a.orderStatus[a.orderStatus.length-1].status;"Confirmed"===G?B="Confirmed":"Deployed"===G?B="Deployed":"Picked up"===G?B="Picked Up":"Requested for void"===G?B="Requested for void":"Order Completed"===G?B="Order Completed":"Paid"===G?B="Paid":"Cancelled"===G?B="Cancelled":"Received Order"===G&&(B="Received Order")}var L="N/A";"for_confirmation"===a.status?L="For Confirmation":"payment_pending"===a.status?L="Pending":"paid"===a.status?L="Paid":"cancelled"===a.status?L="Cancelled":"void"===a.status&&(L="Void"),M.forEach(function(e,t){T=t%2===1?"odd":"";var n="";e.unavailable&&(n=" deleted-item");var r=e._id&&e._id.barcode?e._id.barcode:"",o=e._id&&e._id.itemCode?e._id.itemCode:"";if(i+='<tr class="'.concat(T).concat(n,'">\n              <td>').concat(t+1,". ").concat(e.name,"</td>\n              <td nowrap>").concat(o,"</td>\n              <td>").concat(r,"</td>\n              <td nowrap>&#8369;").concat(Ja(e.price),'</td>\n              <td align="center">').concat(e.quantity,"</td>\n              <td nowrap>&#8369;").concat(Ja(e.price*e.quantity),"</td>\n            </tr>"),!0!==e.unavailable&&(c+=e.price*e.quantity),!0!==e.unavailable&&e.markup&&e.markup>0&&(d+=e.markup*e.quantity),!0!==e.unavailable&&e.containerFee&&e.containerFee.amount){var l=!(!e.containerFee.supportedOrderOption||!e.containerFee.supportedOrderOption.delivery)&&e.containerFee.supportedOrderOption.delivery,s=!(!e.containerFee.supportedOrderOption||!e.containerFee.supportedOrderOption.pickup)&&e.containerFee.supportedOrderOption.pickup;"delivery"===a.selectedPaymentOption&&l?O+=e.containerFee.amount:"pickup"===a.selectedPaymentOption&&s&&(O+=e.containerFee.amount)}if(e.promos&&e.promos.length>0){var m=a.promos[0],u=m.calculation.type,g=m.calculation.value,f=1;a.days&&a.days>1&&(f=a.days),h+="percent"===u?a.price*a.quantity*f*(g/100):g,p+=h}});var R="",j="",J="",U="";t.state.isGrocery?(j="<p>Cargo Fee:</>\n              <p>Convenience Fee:</>",R="<p>&#8369;".concat(Ja(s),"</p>\n              <p>&#8369;").concat(Ja(d),"</p>")):(U="<p>Container Fee:</>\n            <p>Service Charge:</>",J="<p>&#8369;".concat(Ja(O),"</p>\n            <p>&#8369;").concat(Ja(x),"</p>")),l=(o=c+d+s+O+x+A)-(m+u+p);var H="<html>\n              <head>\n                <title>".concat(a.page.name," - Order No. ").concat(a._id,'</title>\n                <style>\n                  body {\n                    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n                    font-size: 15px;\n                  }\n                  .container { margin: 25px; overflow:auto; }\n                  h1, h2, h3, h4, h5 { margin:0 0 10px; }\n                  h1 { font-size: 16px; }\n                  h2 { font-size: 15px; }\n                  h3 { font-size: 14px; }\n                  h4 { font-size: 13px; }\n                  table, th {\n                    padding: 10px;\n                    border-bottom: 1px solid #ccc;\n                    border-collapse: collapse;\n                  }\n                  td { padding: 10px; }\n                  table.items, table.items th, table.items td { border-bottom: 1px solid #ccc; }\n                  thead tr { background-color: #f5f6fa !important; border-top: 1px solid #ccc; padding: 10px 15px; }\n                  tr.odd { background-color: #efefef !important; }\n                  tr.deleted-item { text-decoration: line-through; opacity: .65; font-style: italic }\n                  th { text-align: left; text-transform: uppercase; font-weight: bold; font-size: 14px; }\n                </style>\n              </head>\n              <body>\n                <div class="container">\n                  <center><h1 style="width:100%;">').concat(a.page.name.toUpperCase(),'</h1></center>\n                  <center><h1 style="width:100%; margin-bottom:25px;">ORDER LIST</h1></center>\n                  <table style="width:100%; font-size:14px; border-bottom: 1px solid #ccc;">\n                    <thead>\n                      <tr>\n                        <th width="50%">Order No.:<span style="margin-left:15px;">').concat(a._id,"</span></th>\n                        <th>Status: ").concat(L," - ").concat(B," </th>\n                        <th>Order Date: ").concat(Object(_e.default)(new Date(a.createdAt),"MMM dd, yyyy hh:mm a"),'</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      <tr style="border-bottom:none;">\n                        <td width="50%">\n                          <table style="width:100%; font-size:14px; border-bottom:none;">\n                            <tbody>\n                              <tr>\n                                <td style="border-bottom:none; padding-left:0;">\n                                  <p><label style="white-space: nowrap;">Customer Name:</label> ').concat(a.customer.firstName," ").concat(a.customer.lastName,'</p>\n                                  <p><label style="white-space: nowrap;">Email:</label> ').concat(g,' &nbsp;&nbsp;&nbsp;&nbsp;<span style="white-space: nowrap;"><label>Phone:</label> ').concat(f,'</span></p>\n                                  <p><label style="white-space: nowrap;">Receiver:</label> ').concat(k,' &nbsp;&nbsp;&nbsp;&nbsp;<span style="white-space: nowrap;"><label>Phone:</label> ').concat(D,"</span></p>\n                                  ").concat(E,'\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </td>\n                        <td colspan="2">\n                          <table style="width:100%; font-size:14px; border-bottom:none;">\n                            <tbody>\n                              <tr>\n                                <td style="border-bottom:none;">\n                                  <p><label>Booking Option:</label> ').concat(r,"</p>\n                                  <p><label>Delivery Date:</label> ").concat(Object(_e.default)(new Date(a.timeSelected),"MMM dd, yyyy hh:mm a"),"</p>\n                                  <p><label>Delivery Address:</label> ").concat(N,"</p>\n                                  <p><label>Google Map Address:</label> ").concat(C,'</p>\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                  <table style="width:100%; font-size:14px; border-bottom:none;">\n                    <tbody>\n                      <tr>\n                        <td>\n                          <table style="max-width:50%; border-bottom:none; font-size:14px;">\n                            <tbody>\n                              <tr style="font-weight:bold;">\n                                <td>\n                                  <p>Items Total:</p>\n                                  <p>Delivery Fee:</>\n                                  ').concat(j,"\n                                  ").concat(U,"\n                                  <p>GRAND TOTAL:</>\n                                </td>\n                                <td>\n                                  <p>&#8369;").concat(Ja(c),"</p>\n                                  <p>&#8369;").concat(Ja(A),"</p>\n                                  ").concat(R,"\n                                  ").concat(J,'\n                                  <p style="text-decoration:underline">&#8369;').concat(Ja(o),'</p>\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </td>\n                        <td colspan="2">\n                          <table style="border-bottom:none; font-size:14px;">\n                            <tbody>\n                              <tr style="font-weight:bold;">\n                                <td>\n                                  <p>Points Used:</p>\n                                  <p>Wallet Used:</>\n                                  <p>Promos:</>\n                                  <p>CUSTOMER PAYOUT:</>\n                                  <p>Cash Prepared:</>\n                                </td>\n                                <td>\n                                  <p>&#8369;').concat(Ja(m),"</p>\n                                  <p>&#8369;").concat(Ja(u),"</p>\n                                  <p>&#8369;").concat(Ja(p),'</p>\n                                  <p style="text-decoration:underline">&#8369;').concat(Ja(l),'</p>\n                                  <p style="text-decoration:underline">&#8369;').concat(Ja(P),'</p>\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                  <table class="items" style="width:100%; font-size:14px;">\n                    <thead>\n                      <tr>\n                        <th>Item</th>\n                        <th>Item Code</th>\n                        <th>Barcode</th>\n                        <th>Price</th>\n                        <th width="50">Quantity</th>\n                        <th>Total</th>\n                      </tr>\n                    <thead>\n                    <tbody>\n                      ').concat(i,'\n                      <tr style="font-weight:bold;">\n                        <td colspan="5" align="right">ITEMS TOTAL:</td>\n                        <td nowrap>&#8369;').concat(Ja(c),'</td>\n                      </tr>\n                      <tr>\n                        <td colspan="8"><p style="padding: 10px 0;"><span style="font-weight:bold;">Customer Notes:</span> <em>').concat(w,"</em></p></td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </body>\n            </html>");n.document.write(H)}else t.showNotificationError("Order not found!")}).catch(function(e){t.showNotificationError("There is an error fetching order. Please try again")}):this.showNotificationError("Order not found!")}},{key:"renderImage",value:function(e){var t=pe.a,a=e&&e.customer&&e.customer._id&&e.customer._id.photos&&e.customer._id.photos[0]?e.customer._id.photos[0].thumb:t;return o.a.createElement(_.Media,{object:!0,"data-src":a,src:a,alt:e.customer.firstName,style:{maxWidth:"45px",maxHeight:"45px"}})}},{key:"renderStatusBadges",value:function(e,t){var a=this;return"vertical"===t?o.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.a.createElement("div",{className:"roundLabel",style:{backgroundColor:"#1d8cf8"}},e.status),o.a.createElement("div",{className:"roundLabel",style:{backgroundColor:"#ff8d72"}},e.products[e.products.length-1].diningOption),o.a.createElement("div",{className:"roundLabel",style:{backgroundColor:"#fd5d93"}},"gcash"===e.selectedPaymentOption&&e.paymongoDetail&&e.paymongoDetail.commissionPercentage?o.a.createElement(o.a.Fragment,null,"paymongo gcash"):o.a.createElement(o.a.Fragment,null,e.selectedPaymentOption))):o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Badge,{style:{fontSize:"12px"},color:"info",pill:!0},e.status),o.a.createElement(_.Badge,{style:{fontSize:"12px"},color:"warning",pill:!0},e.products[e.products.length-1].diningOption),o.a.createElement(_.Badge,{style:{fontSize:"12px"},color:"danger",pill:!0},e.selectedPaymentOption),o.a.createElement(_.Button,{color:"link","aria-label":"PDF",style:{padding:"0.5rem 0.25rem"}},o.a.createElement("span",{"aria-hidden":!0},o.a.createElement(me.a,{icon:"file-pdf",size:"lg",onClick:function(){a.printMinDetails(e._id)}}))),o.a.createElement(_.Button,{style:{fontSize:"12px",padding:"0.5rem 0.25rem"},className:"btn-success-v2 btn-round float-right",onClick:function(){a.printDetails(e._id)}},o.a.createElement(me.a,{icon:"print"}))," ")}},{key:"renderCustomerBilling",value:function(e){var t="",a=e.billingAddress;return a||(a={billing_name:"",address1:"",address2:"",city:"",state_province:"",postal:"",country:""}),"cc"===e.selectedPaymentOption?t="Credit Card":"cash"===e.selectedPaymentOption?t="Cash":"bank"===e.selectedPaymentOption&&(t="Bank"),o.a.createElement(o.a.Fragment,null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("h4",null,"BILLING"))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("b",null,"Method")),o.a.createElement("td",null,t)),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("b",null,"Fullname")),o.a.createElement("td",null,a.billing_name)),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("b",null,"Address")),o.a.createElement("td",null,a.address1)))}},{key:"renderCustomerInfo",value:function(e){var t=e.isDelivery&&e.delivery[0].deliveryAddress.address?e.delivery[0].deliveryAddress.address:"",a=e.isDelivery&&e.delivery[0].deliveryAddress.landmark?e.delivery[0].deliveryAddress.landmark:"",n=e.isDelivery&&e.delivery[0].deliveryAddress.googleAddress?e.delivery[0].deliveryAddress.googleAddress:"",r=e.isDelivery&&e.delivery[0].deliveryAddress.name?e.delivery[0].deliveryAddress.name:"",l=e.isDelivery&&e.delivery[0].deliveryAddress.phone?e.delivery[0].deliveryAddress.phone:"";return o.a.createElement("div",{style:{fontSize:12}},o.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginTop:10}},o.a.createElement("label",{className:"control-label"},"Customer")),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",paddingLeft:10,marginTop:5}},o.a.createElement("label",{className:"label-secondary"},e.customer.firstName," ",e.customer.lastName)),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",paddingLeft:10,marginTop:5}},o.a.createElement("label",{className:"label-secondary"},o.a.createElement(me.a,{icon:"mobile-alt"}),"\xa0",e.customer.mobileNumbers[0])),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",paddingLeft:10,marginTop:5}},o.a.createElement("label",{className:"label-secondary"},o.a.createElement(me.a,{icon:"envelope"}),"\xa0",e.customer.email)),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginTop:10}},o.a.createElement("label",{className:"control-label"},"Delivery")),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",paddingLeft:10,marginTop:5}},o.a.createElement("label",{className:"label-secondary"},o.a.createElement(me.a,{icon:"map-marker-alt"}),"\xa0",t)),a&&a.length>0&&o.a.createElement("div",{style:{display:"flex",flexDirection:"row",paddingLeft:10,marginTop:5}},o.a.createElement("label",{className:"label-secondary"},o.a.createElement(me.a,{icon:"monument"}),"\xa0",a)),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",paddingLeft:10,marginTop:5}},o.a.createElement("label",{className:"label-secondary"},o.a.createElement(me.a,{icon:"map-pin"}),"\xa0",n)),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginTop:10}},o.a.createElement("label",{className:"control-label"},"Recipient")),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",paddingLeft:10,marginTop:5}},o.a.createElement("label",{className:"label-secondary"},r)),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",paddingLeft:10,marginTop:5}},o.a.createElement("label",{className:"label-secondary"},o.a.createElement(me.a,{icon:"phone-square"}),"\xa0",l)),o.a.createElement("hr",{style:{backgroundColor:"rgba(169,169,169,0.5)"}}))}},{key:"renderShopperInfo",value:function(e){if(this.state.isGrocery){if(e&&e._id){var t=e&&e._id?e._id:"";return o.a.createElement("div",{style:{fontSize:"12px"}},o.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginTop:10}},o.a.createElement("label",{className:"control-label"},"Shopper")),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",paddingLeft:10,marginTop:5}},o.a.createElement("label",{className:"label-secondary"},e.firstName?e.firstName:""," ",e.lastName?e.lastName:"")),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",paddingLeft:10,marginTop:5}},o.a.createElement("label",{className:"label-secondary"},o.a.createElement(me.a,{icon:"mobile-alt"}),"\xa0",e.mobileNumbers&&e.mobileNumbers[0]&&e.mobileNumbers[0].number?e.mobileNumbers[0].number:"")),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",paddingLeft:10,marginTop:5}},o.a.createElement("label",{className:"label-secondary"},o.a.createElement(me.a,{icon:"envelope"}),"\xa0",e.email?e.email:"")),this.state.shopperOptions&&this.state.shopperOptions.length>0&&o.a.createElement(_.Col,{sm:"12",md:"8",lg:"8",style:{paddingLeft:0,marginBottom:10,marginTop:10}},o.a.createElement(_.FormGroup,null,o.a.createElement(Ke.a,{className:"react-select",styles:{fontSize:"13px !important",width:"auto"},options:this.state.shopperOptions,onChange:this.handleChangeShopper,placeholder:"Select a shopper",value:this.state.shopperOptions.filter(function(e){return e.value===t})}))),o.a.createElement("hr",{style:{backgroundColor:"rgba(169,169,169,0.5)"}}))}return o.a.createElement("div",{style:{fontSize:"12px"}},o.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginBottom:10,marginTop:10}},o.a.createElement("label",{className:"control-label"},"SHOPPER DETAILS")),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginBottom:10,marginTop:10}},o.a.createElement("p",{style:{color:"#447098",paddingLeft:10}},"No shopper added.")),this.state.shopperOptions&&this.state.shopperOptions.length>0&&o.a.createElement(_.Col,{sm:"12",md:"8",lg:"8",style:{paddingLeft:0,marginBottom:10,marginTop:10}},o.a.createElement(_.FormGroup,null,o.a.createElement(Ke.a,{className:"react-select",styles:{fontSize:"13px !important",width:"auto"},options:this.state.shopperOptions,onChange:this.handleChangeShopper,placeholder:"Select a shopper",value:""}))),o.a.createElement("hr",{style:{backgroundColor:"rgba(169,169,169,0.5)"}}))}}},{key:"renderRows",value:function(){var e=this;return this.state.isLoading?o.a.createElement("tr",null,o.a.createElement("td",{colSpan:"7"},o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading}))):this.state.orders instanceof Array&&this.state.orders.length>0?this.state.orders.map(function(t,a,n){return o.a.createElement("tr",{key:a,onClick:function(){e.showDetails(t._id)},className:"order-list-item"},o.a.createElement("td",{width:"30%"},o.a.createElement(_.Media,{style:{display:"flex",alignItems:"center"}},a+1,".",o.a.createElement(_.Media,{left:!0,top:!0,href:"#"},e.renderImage(t)),o.a.createElement("p",{style:{marginBottom:20}},t.customer.firstName," ",t.customer.lastName))),o.a.createElement("td",{width:"100"},o.a.createElement("p",null,"...",new Array(t._id.toString().length-6+1).join("")+t._id.toString().slice(-6)),"gcash"===t.selectedPaymentOption&&t.paymongoDetail&&t.paymongoDetail.commissionPercentage?o.a.createElement(o.a.Fragment,null,t.paymongoDetail&&t.paymongoDetail.commissionPercentage?o.a.createElement(_.Badge,{color:"secondary",pill:!0},"PAYMONGO G-CASH"):o.a.createElement(_.Badge,{color:"secondary",pill:!0},"G-CASH")):o.a.createElement(o.a.Fragment,null,"cc"===t.selectedPaymentOption?o.a.createElement(_.Badge,{color:"secondary",pill:!0},"PAYPAL"):o.a.createElement(_.Badge,{color:"secondary",pill:!0},t.selectedPaymentOption?t.selectedPaymentOption.toUpperCase():"N/A"))),o.a.createElement("td",null,o.a.createElement("p",{style:{whiteSpace:"noWrap"}},Object(_e.default)(new Date(t.createdAt),"yyyy-MM-dd")),Object(_e.default)(new Date(t.createdAt),"hh:mm a")),o.a.createElement("td",null,o.a.createElement("p",{style:{whiteSpace:"noWrap"}},Object(_e.default)(new Date(t.timeSelected),"yyyy-MM-dd")),Object(_e.default)(new Date(t.timeSelected),"hh:mm a")),o.a.createElement("td",{width:"100"},o.a.createElement(_.FormGroup,null,e.renderOrderStatus(t.status))),o.a.createElement("td",{width:"100"},o.a.createElement(_.FormGroup,null,e.renderDeliveryStatusBadge(t.orderStatus))))}):o.a.createElement("tr",null,o.a.createElement("td",{colSpan:"7"},o.a.createElement("label",{className:"text-danger"},o.a.createElement("em",null,"No Orders found."))))}},{key:"refreshOrders",value:function(e,t){var a=this,n=je.a.parse(e);n.keyword=n.search&&n.search.length>0?n.search.trim():"",delete n.search,this.props.history.push("/order-list"+e);var r=JSON.parse(N("userData")),o=r.sessionToken;r&&null!==r?D(o).get("/provider/orders/".concat(t),{params:n}).then(function(e){if(e&&e.data&&e.data.docs&&e.data.docs[0]){var t=e.data.docs;a.setState({orders:t,pagination:e.data.pagination,singleDetails:t[0],canPickUp:t[0].isDelivery&&"inPreparation"===t[0].delivery[t[0].delivery.length-1].status}),a.setState({isLoading:!1}),a.setState({isLoadingOrderDetail:!1})}else a.setState({orders:[],pagination:{},singleDetails:{},canPickUp:!1}),a.setState({isLoading:!1}),a.setState({isLoadingOrderDetail:!1})}).catch(function(e){a.setState({isLoading:!1}),a.setState({isLoadingOrderDetail:!1})}):(this.setState({isLoading:!1}),this.setState({isLoadingOrderDetail:!1}))}},{key:"renderOrderStatus",value:function(e){return"for_confirmation"===e?o.a.createElement(_.Badge,{color:"secondary",pill:!0},"For Confirmation"):"payment_pending"===e?o.a.createElement(_.Badge,{color:"warning",pill:!0},"Pending"):"paid"===e?o.a.createElement(_.Badge,{color:"primary",pill:!0},"Paid"):"cancelled"===e?o.a.createElement(_.Badge,{color:"danger",pill:!0},"Cancelled"):"void"===e?o.a.createElement(_.Badge,{color:"secondary",pill:!0},"Void"):o.a.createElement(_.Badge,{color:"secondary",pill:!0},"N/A")}},{key:"renderDeliveryStatusBadge",value:function(e){if(e&&e instanceof Array&&e.length>0){var t=e[e.length-1].status;return"Confirmed"===t?o.a.createElement(_.Badge,{color:"warning",pill:!0},"Confirmed"):"Deployed"===t?o.a.createElement(_.Badge,{color:"primary",pill:!0},"Deployed"):"Picked up"===t?o.a.createElement(_.Badge,{color:"primary",pill:!0},"Picked Up"):"Requested for void"===t?o.a.createElement(_.Badge,{color:"secondary",pill:!0},"Requested For Void"):"Order Completed"===t?o.a.createElement(_.Badge,{color:"success",pill:!0},"Completed"):"Paid"===t?o.a.createElement(_.Badge,{color:"primary",pill:!0},"Paid"):"Cancelled"===t?o.a.createElement(_.Badge,{color:"success",pill:!0},"Cancelled"):"Received Order"===t?o.a.createElement(_.Badge,{color:"success",pill:!0},"Received Order"):o.a.createElement(_.Badge,{color:"secondary",pill:!0},"N/A")}return o.a.createElement(_.Badge,{color:"secondary",pill:!0},"N/A")}},{key:"renderNoPageAdded",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"No Page Added"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You have not added a page yet. Click"," "," ",o.a.createElement(ie.a,{to:"/add-page"},"here")," "," ","to add a new page.")))))))}},{key:"renderPageNotVerified",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"You Have Not Agreed with our Terms & Policies"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You must agree  with our Terms & Policies. Click "," "," ",o.a.createElement(ie.a,{to:"/statement-of-agreement"},"here")," "," "," to read our Terms & Policies.")))))))}},{key:"renderNoProductsAdded",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"No Products Added"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You need to add a product before you can activate your store. Click"," "," ",o.a.createElement(ie.a,{to:"/products/new"},"here")," "," ","to add a product.")))))))}},{key:"render",value:function(){var e=JSON.parse(N("pageInfo")),t=JSON.parse(N("hasCategories")),a=JSON.parse(N("hasProducts"));return e&&e._id?!0===e.isVerified?!0===a?o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{lg:"7",md:"7",sm:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Orders - ",o.a.createElement("em",null,this.state.pageName)),!e.hideTutorials&&o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Alert,{className:"alert-compact",color:"primary",isOpen:!this.state.hideTutorials,toggle:this.onDismiss,fade:!1},o.a.createElement("h4",{className:"alert-heading"},"New on Orders?"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"Check our videos here on how to manage your orders.",o.a.createElement("br",null)),o.a.createElement("a",{className:"btn btn-sm btn-primary-v2",href:"https://www.youtube.com/watch?v=k8VEDqbPv7w"},"View Tutorials"),o.a.createElement(_.Button,{className:"btn-fill btn-sm",color:"danger",type:"button",onClick:this.onHideTutorials},"Hide Permanently")))))),o.a.createElement(_.Row,null,t&&a&&!0!==e.isActive&&o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"Store Not Activated"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You must activate your store so it will appear in the app and you can start selling.",o.a.createElement("br",null),"Click "," "," ",o.a.createElement(ie.a,{to:"/activate-store"},"here")," "," "," to activate you store."))))),o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Input,{id:"search",name:"search",type:"text",placeholder:"Search order...",onChange:this.handleChangeKeyword,onKeyPress:this.handleSearch,value:this.state.search}))))),o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Input,{id:"paymentMethod",name:"paymentMethod",type:"select",onChange:this.handleChangePaymentMethod,value:this.state.selectedPaymentMethod},o.a.createElement("option",{value:""},"Payment Method"),o.a.createElement("option",{value:"cash"},"Cash"),o.a.createElement("option",{value:"gcash"},"G-Cash"),o.a.createElement("option",{value:"paynamics"},"Paynamics"),o.a.createElement("option",{value:"paymongo"},"Paymongo"),o.a.createElement("option",{value:"cc"},"Paypal"),o.a.createElement("option",{value:"direct-transfer"},"Direct Transfer")))),o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Input,{id:"status",name:"status",type:"select",onChange:this.handleChangeStatus,value:this.state.status},o.a.createElement("option",{value:""},"Status"),o.a.createElement("option",{value:"for_confirmation"},"For Confirmation"),o.a.createElement("option",{value:"payment_pending"},"Pending"),o.a.createElement("option",{value:"paid"},"Paid"),o.a.createElement("option",{value:"cancelled"},"Cancelled"),o.a.createElement("option",{value:"void"},"Void"))))))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"6"},e&&"5ea5519c91aec75b7a387d4b"!==e._id?o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"startDate",className:"control-label",style:{display:"block"}},"Start Date:"),this.state.filterDate&&"deliveryDate"===this.state.filterDate?o.a.createElement(bt.a,{name:"dateStart",className:"form-control",selectsStart:!0,startDate:this.state.dateStart,endDate:this.state.dateEnd,selected:this.state.dateStart,onChange:this.handleChangeStartDate,showTimeSelect:!0,dateFormat:"MMMM d, yyyy h:mm aa",timeIntervals:30,timeCaption:"Time",autoComplete:"off"}):o.a.createElement(bt.a,{name:"dateStart",className:"form-control",selectsStart:!0,startDate:this.state.dateStart,endDate:this.state.dateEnd,selected:this.state.dateStart,onChange:this.handleChangeStartDate,dateFormat:"MMMM d, yyyy",autoComplete:"off"})):o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"startDate",className:"control-label",style:{display:"block"}},"Delivery Date:"),o.a.createElement(bt.a,{name:"dateStart",className:"form-control",selectsStart:!0,startDate:this.state.dateStart,selected:this.state.dateStart,onChange:this.handleChangeDate,dateFormat:"MMMM d, yyyy",autoComplete:"off"}))),o.a.createElement(_.Col,{md:"6"},e&&"5ea5519c91aec75b7a387d4b"!==e._id&&o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"endDate",className:"control-label",style:{display:"block"}},"End Date:"),this.state.filterDate&&"deliveryDate"===this.state.filterDate?o.a.createElement(bt.a,{name:"endDate",selectsEnd:!0,startDate:this.state.dateStart,endDate:this.state.dateEnd,className:"form-control",selected:this.state.dateEnd,onChange:this.handleChangeEndDate,showTimeSelect:!0,dateFormat:"MMMM d, yyyy h:mm aa",timeIntervals:30,timeCaption:"Time",autoComplete:"off"}):o.a.createElement(bt.a,{name:"endDate",selectsEnd:!0,startDate:this.state.dateStart,endDate:this.state.dateEnd,className:"form-control",selected:this.state.dateEnd,onChange:this.handleChangeEndDate,dateFormat:"MMMM d, yyyy",autoComplete:"off"}))))),o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.Row,null,e&&"5ea5519c91aec75b7a387d4b"!==e._id&&o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"filterDate",className:"control-label"},"Filter Date By:"),o.a.createElement(_.Input,{id:"filterDate",name:"filterDate",type:"select",onChange:this.handleChangeFilterDate,value:this.state.filterDate},o.a.createElement("option",{value:"deliveryDate"},"Delivery Date"),o.a.createElement("option",{value:"orderDate"},"Date Ordered"),o.a.createElement("option",{value:"datePaid"},"Date Paid")))),e&&"5ea5519c91aec75b7a387d4b"===e._id&&o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{className:"control-label"},"Actions:"),o.a.createElement(_.Button,{alt:"Export",title:"Export",className:"btn btn-sm btn-round btn-info",onClick:this.exportList},o.a.createElement(me.a,{icon:"file-excel"}),"\xa0Export"))))),o.a.createElement(_.Col,{md:"6"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{className:"control-label"},o.a.createElement(Ue.a,{onClick:this.handleToggleShowTests,on:this.state.showTests}),"\xa0Show Tests"))))))),o.a.createElement(_.CardBody,{style:{maxHeight:"700px",overflowY:"auto"}},o.a.createElement(_.Table,{className:"tablesorter",responsive:!0,striped:!0,style:{fontSize:"13px"}},o.a.createElement("thead",{className:"text-primary"},o.a.createElement("tr",null,o.a.createElement("th",null,"Customer"),o.a.createElement("th",null,"Order No."),o.a.createElement("th",null,"Date Ordered"),o.a.createElement("th",null,"Delivery Date"),o.a.createElement("th",null,"Status"),o.a.createElement("th",null,"Delivery Status"))),o.a.createElement("tbody",null,this.renderRows(this.state.orders)))),o.a.createElement(_.CardFooter,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},this.state.pagination&&this.state.pagination.total>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Qe.a,{innerClass:"pagination",activePage:this.state.activePage,itemsCountPerPage:this.state.pagination.limit,totalItemsCount:this.state.pagination.total,pageRangeDisplayed:5,onChange:this.handlePageChange}),o.a.createElement("p",null,"Page ",o.a.createElement("em",null,this.state.activePage)," of ",o.a.createElement("em",null,Math.ceil(this.state.pagination.total/this.state.pagination.limit))," of ",o.a.createElement("em",null,this.state.pagination.total)," orders."))))))),o.a.createElement(_.Col,{className:"order-details",lg:"5",md:"5",sm:"12",style:{height:"800px",overflowY:"auto"},id:""},this.renderDetails(this.state.singleDetails))),o.a.createElement(z.a,{active:this.state.isGeneratingXls,spinner:!0,text:"Generating..."})):this.renderNoProductsAdded():this.renderPageNotVerified():this.renderNoPageAdded()}}]),t}(o.a.Component),ja=function(e){var t=e.toString();return new Array(t.length-6+1).join("")+t.slice(-6)},Ja=function(e){return Ua(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},Ua=function(e,t){if(void 0===t&&(t=2),0!==e&&(!e||isNaN(e)))throw new Error("price is not a number"+e);return parseFloat(Math.round(100*e)/100).toFixed(t)},Ha=Object(E.b)(function(){return{}},{receivePayment:function(e,t,a){return function(){var n={totalPaid:e.totalPaid,customerCash:e.customerCash,deliveryFee:e.deliveryFee};D(t).post("/payments/"+e.invoiceId,n).then(function(e){a(e,null)}).catch(function(e){a(null,e)})}},saveNewStatus:function(e,t,a,n){return function(){D(a).patch("/provider/orders/"+t,{confirmationCode:""}).then(function(e){n(e,null)}).catch(function(e){n(e,null)})}},pickUp:function(e,t,a,n){return function(){D(a).patch("/business/order/transactions/update/"+t,e).then(function(e){n(e,null)}).catch(function(e){console.error(e),n(e,null)})}},cancelAction:function(e,t,a,n){return function(){var r=t;D(a).post("/provider/cancel/"+e,r).then(function(e){n(e,null)}).catch(function(e){n(e,null)})}},checkIfMine:function(e,t,a,n){return function(){var r={page:t};D(a).post("/provider/checkIfMine/"+e,r).then(function(e){n(e,null)}).catch(function(e){n(e,null)})}},fetchSingleOrderData:function(e,t,a){return function(){D(t).get("/merchant/fetchSingleOrderData/"+e).then(function(e){a(null,e.data.order)}).catch(function(e){a(e,null)})}}})(Ra),Qa=function(e){function t(e){var a;Object(i.a)(this,t);var n=JSON.parse(N("userData"));return(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleFileSelect=function(e){var t=e.target.files,n=Array.from(t);a.setState({files:t,totalImages:n.length})},a.handleFileUpload=function(e){if(!window.confirm("Do you want to continue uploading?"))return!1;a.setState({isUploading:!0});var t,n=JSON.parse(N("userData")),r=JSON.parse(N("defaultPage")),o="";n?o=n.sessionToken:(a.props.history.push("/login"),window.location.reload());var l=[];if(a.state.files){t=a.state.files,l=a.state.images;var s=Array.from(t),i=0;s.forEach(function(e){var t=e.name.split(".").slice(0,-1).join("."),n=new FormData;n.append("file",e),n.append("place",r),a.props.uploadPhotoByProductName(t,n,o,function(e,t){if(!e&&t){var n=t;n._id&&(l.push(n),a.setState({images:l}))}else e&&console.error(e.response);++i===s.length&&(a.setState({files:null}),a.setState({images:[]}),a.setState({isUploading:!1}),a.setState({totalImages:0}),a.showNotification("Image upload complete."))})})}else a.setState({isUploading:!1}),a.showNotificationError("No image(s) added. Please select and image.")},a.state={userExist:!1,loginUrl:"",apiUsername:"",apiPassword:"",productsUrl:"",apiKey:"",payload:"",isLoading:!0,submitted:!1,isUploading:!1,userData:n,totalImages:0,files:null,images:[]},a.handleFileSelect=a.handleFileSelect.bind(Object(se.a)(Object(se.a)(a))),a.handleFileUpload=a.handleFileUpload.bind(Object(se.a)(Object(se.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("userData")),a=JSON.parse(N("defaultPage")),n=t.sessionToken;null!=t&&a?this.props.getPageById(a,n,function(t,a){if(a){var n=a.page;setTimeout(function(){e.setState({pageExists:!0,loginUrl:n.privateApiInfo&&n.privateApiInfo.loginUrl?n.privateApiInfo.loginUrl:"",apiUsername:n.privateApiInfo&&n.privateApiInfo.username?n.privateApiInfo.username:"",apiPassword:n.privateApiInfo&&n.privateApiInfo.password?n.privateApiInfo.password:"",productsUrl:n.privateApiInfo&&n.privateApiInfo.productsUrl?n.privateApiInfo.productsUrl:"",apiKey:n.privateApiInfo&&n.privateApiInfo.apiKey?n.privateApiInfo.apiKey:"",isLoading:!1})},2e3)}else t&&setTimeout(function(){e.setState({isLoading:!1})},2e3)}):setTimeout(function(){e.setState({isLoading:!1})},2e3)}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"render",value:function(){return this.state.isLoading?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Products Images - Bulk Upload")),o.a.createElement(_.CardBody,null,o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading}))))))):this.state.pageExists?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Products Images - Bulk Upload")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Form,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12",lg:"8"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{htmlFor:"images"},"Select image(s)"),o.a.createElement("div",{style:{margin:"10px auto",border:"1px solid #ccc",backgroundColor:"#efefef"}},o.a.createElement(_.Input,{name:"images",label:"upload file",type:"file",onChange:this.handleFileSelect,style:{position:"relative",height:200,display:"flex",justifyContent:"center",alignItems:"center",borderWidth:2,borderColor:"#666",borderStyle:"solid",borderRadius:5},multiple:!0})),o.a.createElement("label",null,this.state.totalImages," image(s) selected")))))),o.a.createElement(_.CardFooter,null,o.a.createElement(_.Button,{className:"btn-fill",color:"info",type:"button",onClick:this.handleFileUpload},"Upload Photos"))))),o.a.createElement(z.a,{active:this.state.isUploading,spinner:!0,text:"Uploading Products..."}))):o.a.createElement("div",{className:"content"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"No Page Added")),o.a.createElement(_.CardBody,null,o.a.createElement("p",null,"You have not added a page yet. Please signup as a Provider/Merchant"))))))}}]),t}(o.a.Component),Va=Object(E.b)(function(){return{}},{getPageById:X,merchantApiLogin:Be,importProductsFromApi:Ge,syncProductsFromAPI:Le,addProduct:ke,uploadPhotoByProductName:function(e,t,a,n){return function(r,o){D(a).post("/business/products/uploadPhotoByProductName/".concat(e),t).then(function(e){if(e&&e.data)return n(null,e.data)}).catch(function(e){n(e,null)})}}})(Qa),za=function(e){function t(e){var a;Object(i.a)(this,t);var n=JSON.parse(N("userData"));return(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).validatePayload=function(e){var t=e.target,n=t.name,r=t.value;try{var o=JSON.parse(r);if(o){var l,s=o,i=s.length;a.setState((l={},Object(T.a)(l,n,r),Object(T.a)(l,"categories",s),Object(T.a)(l,"totalItems",i),Object(T.a)(l,"invalidJsonText",""),l))}}catch(c){a.setState({invalidJsonText:"Invalid JSON Payload"})}},a.handleFileSelect=function(e){var t=e.target.files[0];a.setState({file:t})},a.handleFileUpload=function(e){if(!window.confirm("Do you want to continue uploading the categories?"))return!1;a.setState({isUploading:!0});var t=JSON.parse(N("userData")),n=JSON.parse(N("defaultPage")),r="";t?r=t.sessionToken:(a.props.history.push("/login"),window.location.reload());var o=a.state.file;if(o&&o instanceof File)if("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===o.type||"application/vnd.ms-excel"===o.type){var l=new FileReader;l.onload=function(e){var t=e.target.result,a=Ut.a.read(t,{type:"binary"});a.SheetNames.forEach(function(e){var t=Ut.a.utils.sheet_to_row_object_array(a.Sheets[e]),o=JSON.stringify(t),l=JSON.parse(o),s={categories:l};r&&l&&l instanceof Array&&l.length>0&&D(r).post("/places/".concat(n,"/import-categories-from-excel"),s).then(function(e){e.data?"ok"===e.data.status&&e.data.message&&alert(e.data.message):alert("There is an error uploading the categories. No response from server.")}).catch(function(e){console.log({error:e}),"string"===typeof e?alert(e):alert("There is an error uploading the categories. Please try again.")})})},l.readAsBinaryString(a.state.file),a.setState({isUploading:!1})}else a.setState({isUploading:!1}),a.showNotificationError("Invalid Excel file. Please select an .xls or .xlsx file only.");else a.setState({isUploading:!1}),a.showNotificationError("No file selected. Please select an excel file.")},a.state={userExist:!1,payload:"",invalidJsonText:"",categories:[],file:{},totalItems:0,isLoading:!0,submitted:!1,isUploading:!1,userData:n},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({isLoading:!1})}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:5};t&&this.refs.notify&&this.refs.notify.notificationAlert&&this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:5};t&&this.refs.notify&&this.refs.notify.notificationAlert&&this.refs.notify.notificationAlert(t)}}},{key:"renderVerticalNavBar",value:function(){var e=JSON.parse(N("pageInfo"));return o.a.createElement(_.Nav,{vertical:!0},o.a.createElement(ie.a,{className:"nav-link-vertical active-link",to:"/import-categories-excel"},"Import using Excel ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))),e&&"5cd141d10d437be772373ddb"===e.pageType&&o.a.createElement(ie.a,{className:"nav-link-vertical",to:"/sync-product-categories"},"Sync Product Categories ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))))}},{key:"render",value:function(){return this.state.isLoading?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Import Categories from Excel")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",sm:"4"},this.renderVerticalNavBar()),o.a.createElement(_.Col,{className:"pl-md-1",sm:"8"},o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading}))))))))):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Import Categories from Excel file")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",sm:"4"},this.renderVerticalNavBar()),o.a.createElement(_.Col,{className:"pl-md-1",sm:"8"},o.a.createElement(_.Form,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12",sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!this.state.payload?" has-danger":""},o.a.createElement("label",{htmlFor:"payload",className:"control-label"},"Select Excel file to upload"),o.a.createElement("p",{className:"text-danger"},this.state.invalidJsonText),o.a.createElement("input",{type:"file",id:"fileUploader",name:"fileUploader",onChange:this.handleFileSelect,accept:".xls, .xlsx",style:{opacity:1,position:"relative"}})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12",sm:"12"},o.a.createElement(_.Button,{className:"btn-fill btn-round",color:"info",type:"button",onClick:this.handleFileUpload},"Upload Categories")))))))))),o.a.createElement(z.a,{active:this.state.isUploading,spinner:!0,text:"Uploading categories..."})))}}]),t}(o.a.Component),Ya=Object(E.b)(function(){return{}},{getPageById:X,merchantApiLogin:Be,addProduct:ke})(za),Ka=function(e){function t(e){var a;Object(i.a)(this,t);var n=JSON.parse(N("userData"));return(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;"checkbox"===t.type&&(r=e.target.checked);a.setState(Object(T.a)({},n,r))},a.handleSync=function(){a.setState({submitted:!0});var e=JSON.parse(N("userData")),t=JSON.parse(N("defaultPage")),n=e.sessionToken;a.setState({isFetching:!0}),a.showNotification("Syncing categories. This may take a while. Please wait for few minutes"),D(n).post("/places/".concat(t,"/sync-product-categories-from-api"),{placeId:t}).then(function(e){if(e&&e.data){var t=0,n=0,r=e.data,o=r.categoriesUpdated,l=r.categoriesAdded;l instanceof Array&&l.length>0&&(t=l.length),o&&o.nModified&&o.nModified>0&&(n=o.nModified),a.showNotification("Sync complete! ".concat(t," added. ").concat(n," updated.")),a.setState({isFetching:!1})}}).catch(function(e){console.log({err:e}),a.showNotificationError("An error occured! Please try again."),a.setState({isFetching:!1})})},a.handleSyncParent=function(){a.setState({submitted:!0});var e=JSON.parse(N("userData")),t=JSON.parse(N("defaultPage")),n=e.sessionToken;a.setState({isFetching:!0}),a.showNotification("Syncing categories. This may take a while. Please wait for few minutes"),D(n).post("/places/".concat(t,"/update-product-categories-parent-from-api"),{placeId:t}).then(function(e){e&&e.data&&(a.showNotification("Sync completed."),a.setState({isFetching:!1}))}).catch(function(e){console.log({err:e}),a.showNotificationError("An error occured! Please try again."),a.setState({isFetching:!1})})},a.state={userExist:!1,loginUrl:"",apiUsername:"",apiPassword:"",productsUrl:"",apiKey:"",payload:"",isLoading:!0,submitted:!1,isFetching:!1,userData:n},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("userData")),a=JSON.parse(N("defaultPage")),n=t.sessionToken;null!=t&&a?this.props.getPageById(a,n,function(t,a){if(a){var n=a.page;e.setState({pageExists:!0,loginUrl:n.privateApiInfo&&n.privateApiInfo.loginUrl?n.privateApiInfo.loginUrl:"",apiUsername:n.privateApiInfo&&n.privateApiInfo.username?n.privateApiInfo.username:"",apiPassword:n.privateApiInfo&&n.privateApiInfo.password?n.privateApiInfo.password:"",productsUrl:n.privateApiInfo&&n.privateApiInfo.productsUrl?n.privateApiInfo.productsUrl:"",apiKey:n.privateApiInfo&&n.privateApiInfo.apiKey?n.privateApiInfo.apiKey:"",isLoading:!1})}else t&&e.setState({isLoading:!1})}):this.setState({isLoading:!1})}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:3};this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:3};this.refs.notify.notificationAlert(t)}}},{key:"render",value:function(){return this.state.isLoading?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Import Products from API")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",sm:"4"},o.a.createElement(_.Nav,{vertical:!0},o.a.createElement(ie.a,{className:"nav-link-vertical",to:"/import-categories-excel"},"Import using Excel ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))),o.a.createElement(ie.a,{className:"nav-link-vertical active-link",to:"/sync-product-categories"},"Sync Product Categories ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))))),o.a.createElement(_.Col,{className:"pl-md-1",sm:"8"},o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading}))))))))):this.state.pageExists?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Syc Product Categories from API")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",sm:"4"},o.a.createElement(_.Nav,{vertical:!0},o.a.createElement(ie.a,{className:"nav-link-vertical",to:"/import-categories-excel"},"Import using Excel ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))),o.a.createElement(ie.a,{className:"nav-link-vertical active-link",to:"/sync-product-categories"},"Sync Product Categories ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))))),o.a.createElement(_.Col,{className:"pl-md-1",sm:"8"},o.a.createElement(_.Form,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12",sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!this.state.productsUrl?" has-danger":""},o.a.createElement("label",{htmlFor:"productsUrl",className:"control-label"},"Product Categories URL"),o.a.createElement(_.Input,{id:"productsUrl",name:"productsUrl",placeholder:"Products URL",type:"text",defaultValue:this.state.productsUrl,onChange:this.handleChange,autoComplete:"off"})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12",sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!this.state.apiKey?" has-danger":""},o.a.createElement("label",{htmlFor:"apiKey",className:"control-label"},"API Key"),o.a.createElement(_.Input,{id:"apiKey",name:"apiKey",placeholder:"API Key",type:"text",value:this.state.apiKey,onChange:this.handleChange,autoComplete:"off"})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12",sm:"12"},o.a.createElement(_.Button,{className:"btn-fill btn-round",color:"info",type:"button",onClick:this.handleSync},"Sync Categories"),o.a.createElement(_.Button,{className:"btn-fill btn-round",color:"info",type:"button",onClick:this.handleSyncParent},"Update Parent Categories")))))))))),o.a.createElement(z.a,{active:this.state.isFetching,spinner:!0,text:"Syncing Products..."}))):o.a.createElement("div",{className:"content"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"No Page Added")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",sm:"4"},o.a.createElement(_.Nav,{vertical:!0},o.a.createElement(ie.a,{className:"nav-link-vertical",to:"/import-categories-excel"},"Import using Excel ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))),o.a.createElement(ie.a,{className:"nav-link-vertical active-link",to:"/sync-product-categories"},"Sync Product Categories ",o.a.createElement("span",{style:{float:"right"}},o.a.createElement(me.a,{icon:"chevron-right"}))))),o.a.createElement(_.Col,{className:"pl-md-1",sm:"8"},o.a.createElement("p",null,"You have not added a page yet. Please signup as a Provider/Merchant"))))))))}}]),t}(o.a.Component),_a=Object(E.b)(function(){return{}},{getPageById:X,merchantApiLogin:Be,importProductsFromApi:Ge,syncProductsFromAPI:Le,addProduct:ke})(Ka),qa=function(e){function t(e){var a;Object(i.a)(this,t);var n=JSON.parse(N("userData")),r={};return null!==n&&(r=n.info),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleCheckActivate=function(e){var t=!1;"checkbox"===e.target.type&&(t=!!e.target.checked),a.setState({activateAccount:t})},a.handleSubmit=function(e){e.preventDefault();var t=!1,n=JSON.parse(N("pageInfo")),r=JSON.parse(N("userData")),o=JSON.parse(N("hasProducts")),l=JSON.parse(N("hasCategories")),s={isActive:a.state.activateAccount,hideTutorials:!1},i="";if(r?i=r.sessionToken:(a.props.history.push("/login"),window.location.reload()),n){var c="",d="",m="";if(n.bankaccount){var u=n.bankaccount;c=u.bankName,d=u.accountName,m=u.accountNumber}if(""!==c&&""!==d&&""!==m||(t=!0),!1===l&&(t=!0),!1===o&&(t=!0),!0===a.state.activateAccount)if(!1===t){if(!window.confirm("Are you sure you want to activate your store?"))return!1;a.setState({submitted:!0,isSaving:!0}),a.props.updatePage(s,n._id,i,function(e,t){if(t){var r={_id:n._id,name:n.name,addressLine1:n.addressLine1,city:n.city,country:n.country,province:n.province,postalCode:n.postalCode,pageType:n.pageType,bankaccount:n.bankaccount,isVerified:n.isVerified,isActive:s.isActive,photos:n.photos,useCreatedProductCategory:n.useCreatedProductCategory,hideTutorials:!1,productUploadXLSEnabled:!!n.productUploadXLSEnabled,productVouchersEnabled:!!n.productVouchersEnabled};S("pageInfo",JSON.stringify(r)),a.showNotification("Your store has been activated. Complete the store information and add products to start selling."),setTimeout(function(){a.setState({submitted:!1,isSaving:!1}),a.props.history.push("/page"),window.location.reload()},3e3)}else e?"string"===typeof e.error&&setTimeout(function(){a.setState({submitted:!1,isSaving:!1}),a.showNotificationError(e.error)},1e3):setTimeout(function(){a.setState({submitted:!1,isSaving:!1}),a.showNotificationError("An unknown error occured. Please try again.")},1e3)})}else a.setState({submitted:!0}),a.showNotificationError("Cannot activate your store. Please complete all the requirements to proceed!");else setTimeout(function(){a.setState({submitted:!1,isSaving:!1})},1e3),a.showNotificationError("Please check the box to activate you account!")}else setTimeout(function(){a.setState({submitted:!1,isSaving:!1})},1e3),a.showNotificationError("Page information not found.")},a.state={userExist:!1,page:{},isLoading:!1,isSaving:!1,submitted:!1,activateAccount:!1,hasMissingInfo:!1,user:{firstName:r.firstName,lastName:r.lastName,email:n.email,phoneNumber:r.mobileNumber,homeAddress:r.homeAddress,photos:r.photos?r.photos:null}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("userData")),a=JSON.parse(N("defaultPage")),n=t.sessionToken;a&&t&&n&&this.props.getPageById(a,n,function(t,a){t&&(e.setState({isLoading:!1}),t.response&&"string"===typeof t.response?e.showNotificationError(t.response):e.showNotificationError("There is a error retrieving the page information")),a?(e.setState({activateAccount:a.page.isActive,page:a.page}),setTimeout(function(){e.setState({isLoading:!1})},3e3)):e.setState({isLoading:!1})})}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"renderActivatePage",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Just One More  Step - Account Activation")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement(_.FormGroup,null,o.a.createElement("label",{className:"control-label"},"Great Job! Your almost done!")))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",style:{marginBottom:"1rem"}},this.renderChecklist(this.state.page))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12"},o.a.createElement("p",null,"We at StreetBy is commited in giving  great customer  experience, with that said, we have prepare some articles, documents to you to study and learned how to accept order, manage orders, communicate with riders and how to handle different scenarios."),o.a.createElement("br",null),o.a.createElement("p",null,"Please have  a detail look on the links below and learned how to give great customers experience to our users."))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12",style:{marginTop:"15px"}},o.a.createElement(_.Form,null,o.a.createElement(_.FormGroup,null,o.a.createElement("label",{style:{marginTop:"15px"}},o.a.createElement(_.Input,{type:"checkbox",className:"enable-disable-checkbox",id:"activateAccount",name:"activateAccount",checked:this.state.activateAccount,onChange:this.handleCheckActivate}),o.a.createElement("span",{className:"form-check-sign"},o.a.createElement("span",{className:"check"})),o.a.createElement("label",{className:"control-label"},"I have read and understand all the topics above."))),o.a.createElement(_.FormGroup,null,o.a.createElement(_.Button,{className:"btn-fill btn-round",color:"info",type:"submit",onClick:this.handleSubmit},"I\u2019M READY TO ACCEPT ORDERS")))))))))))),o.a.createElement(z.a,{active:this.state.isSaving,spinner:!0,text:"Saving..."}))}},{key:"renderPageActive",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"Store is already activated."),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You cannot activate this store because it is already activated. Click"," "," ",o.a.createElement(ie.a,{to:"/page"},"here")," "," ","to view the store information."))))))))}},{key:"renderNoProductsAdded",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"No Products Added"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You need to add a product before you can activate your store. Click"," "," ",o.a.createElement(ie.a,{to:"/products/new"},"here")," "," ","to add a product.")))))))}},{key:"renderNoPageAdded",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"No Page Added"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You have not added a page yet. Click"," "," ",o.a.createElement(ie.a,{to:"/add-page"},"here")," "," ","to add a new page.")))))))}},{key:"renderChecklist",value:function(e){var t=JSON.parse(N("hasCategories")),a=JSON.parse(N("hasProducts")),n=e&&e.bankaccount?e.bankaccount:{};return e&&e.isVerified?o.a.createElement(_.ListGroup,null,e&&!0===e.isVerified?o.a.createElement(_.ListGroupItem,{className:"text-success-v2"},o.a.createElement(me.a,{icon:"check-circle"})," Agreed to Terms & Policies"):o.a.createElement(_.ListGroupItem,{className:"text-danger-v2"},o.a.createElement(me.a,{icon:"times-circle"})," Agreed to Terms & Policies"),t?o.a.createElement(_.ListGroupItem,{className:"text-success-v2"},o.a.createElement(me.a,{icon:"check-circle"})," Categories"):o.a.createElement(_.ListGroupItem,{className:"text-danger-v2"},o.a.createElement(me.a,{icon:"times-circle"})," Categories"),a?o.a.createElement(_.ListGroupItem,{className:"text-success-v2"},o.a.createElement(me.a,{icon:"check-circle"})," Products"):o.a.createElement(_.ListGroupItem,{className:"text-danger-v2"},o.a.createElement(me.a,{icon:"times-circle"})," Products"),n&&n.bankName&&n.accountName&&n.accountNumber?o.a.createElement(_.ListGroupItem,{className:"text-success-v2"},o.a.createElement(me.a,{icon:"check-circle"})," Bank Account"):o.a.createElement(_.ListGroupItem,{className:"text-danger-v2"},o.a.createElement(me.a,{icon:"times-circle"})," Bank Account")):o.a.createElement(_.ListGroup,null,o.a.createElement(_.ListGroupItem,null,o.a.createElement(me.a,{icon:"question-circle"})," Agreed to Terms & Policies"),o.a.createElement(_.ListGroupItem,null,o.a.createElement(me.a,{icon:"question-circle"})," Categories"),o.a.createElement(_.ListGroupItem,null,o.a.createElement(me.a,{icon:"question-circle"})," Products"),o.a.createElement(_.ListGroupItem,null,o.a.createElement(me.a,{icon:"question-circle"})," Bank Account"))}},{key:"render",value:function(){var e=JSON.parse(N("hasProducts")),t=JSON.parse(N("pageInfo"));return this.state.isLoading?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h4",{className:"title"},"Activate Store")),o.a.createElement(_.CardBody,null,o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading}))))))):t&&t._id?!0===t.isActive?this.renderPageActive():e?this.renderActivatePage():this.renderNoProductsAdded():this.renderNoPageAdded()}}]),t}(o.a.Component),Wa=Object(E.b)(function(){return{}},{getPageById:X,updatePage:$})(qa),Xa=function(e){function t(e){var a;Object(i.a)(this,t);var n=JSON.parse(N("userData")),r={};return null!==n&&(r=n.info),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleCheckAgree=function(e){var t=!1;"checkbox"===e.target.type&&(t=!!e.target.checked),a.setState({iAgree:t})},a.handleSubmit=function(e){e.preventDefault();var t=JSON.parse(N("pageInfo")),n=JSON.parse(N("userData")),r={isVerified:a.state.iAgree,isActive:a.state.activateAccount,dateAgreed:(new Date).toISOString()},o="";if(n?o=n.sessionToken:(a.props.history.push("/login"),window.location.reload()),t)if(!0===a.state.iAgree){if(!window.confirm("Do you want to save these changes?"))return!1;a.setState({submitted:!0,isSaving:!0}),a.props.updatePage(r,t._id,o,function(e,n){if(n){var o={_id:t._id,name:t.name,addressLine1:t.addressLine1,city:t.city,country:t.country,province:t.province,postalCode:t.postalCode,pageType:t.pageType,bankaccount:t.bankaccount,isVerified:r.isVerified,isActive:t.isActive,photos:t.photos,useCreatedProductCategory:t.useCreatedProductCategory,hideTutorials:t.hideTutorials,productUploadXLSEnabled:!!t.productUploadXLSEnabled,productVouchersEnabled:!!t.productVouchersEnabled};S("pageInfo",JSON.stringify(o)),a.showNotification("You successfully agreed to our Terms & Conditions. You proceed creating your produt categories!"),setTimeout(function(){a.setState({submitted:!1,isSaving:!1}),a.props.history.push("/page")},1e3)}else e?"string"===typeof e.error&&setTimeout(function(){a.setState({submitted:!1,isSaving:!1}),a.showNotificationError(e.error)},1e3):setTimeout(function(){a.setState({submitted:!1,isSaving:!1}),a.showNotificationError("An unknown error occured. Please try again.")},1e3)})}else a.setState({submitted:!0}),a.showNotificationError("You must agree with our Terms & Conditions to proceed!");else setTimeout(function(){a.setState({submitted:!1,isSaving:!1})},1e3),a.showNotificationError("Page information not found.")},a.state={pageInfo:{},userExist:!1,isLoading:!1,isSaving:!1,submitted:!1,iAgree:!1,user:{firstName:r.firstName,lastName:r.lastName,email:n.email,phoneNumber:r.mobileNumber,homeAddress:r.homeAddress,photos:r.photos?r.photos:null},activeStep:"step0"},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("userData")),a=JSON.parse(N("defaultPage")),n=t.sessionToken;a&&t&&n&&this.props.getPageById(a,n,function(t,a){t&&(e.setState({isLoading:!1}),t.response&&"string"===typeof t.response?e.showNotificationError(t.response):e.showNotificationError("There is an error retrieving the page information.")),a?e.setState({pageInfo:a.page,isLoading:!1,iAgree:!!a.page.isVerified&&a.page.isVerified}):e.setState({isLoading:!1})})}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:5};this.refs.notify.notificationAlert(t)}}},{key:"renderVerticalNavBar",value:function(){var e=this;return o.a.createElement(_.Nav,{vertical:!0},o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"step0"===this.state.activeStep?" active-link":""),href:"#intro",onClick:function(){e.setState({activeStep:"step0"})}},"Introduction")),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"step1"===this.state.activeStep?" active-link":""),href:"#step1",onClick:function(){e.setState({activeStep:"step1"})}},"1\xb7  Mobile App Service")),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"step2"===this.state.activeStep?" active-link":""),href:"#step2",onClick:function(){e.setState({activeStep:"step2"})}},"2\xb7 Provider Page Creation, Verification, and Activation")),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"step3"===this.state.activeStep?" active-link":""),href:"#step3",onClick:function(){e.setState({activeStep:"step3"})}},"3\xb7 Publication of Products and Services")),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"step4"===this.state.activeStep?" active-link":""),href:"#step4",onClick:function(){e.setState({activeStep:"step4"})}},"4\xb7 Payment Methods")),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"step5"===this.state.activeStep?" active-link":""),href:"#step5",onClick:function(){e.setState({activeStep:"step5"})}},"5\xb7 Orders and User Payments")),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"step6"===this.state.activeStep?" active-link":""),href:"#step6",onClick:function(){e.setState({activeStep:"step6"})}},"6\xb7 StreetBy Pay - Discounts, Promos, Points, and Wallet")),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"step7"===this.state.activeStep?" active-link":""),href:"#step7",onClick:function(){e.setState({activeStep:"step7"})}},"7\xb7 Other Charges")),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"step8"===this.state.activeStep?" active-link":""),href:"#step8",onClick:function(){e.setState({activeStep:"step8"})}},"8\xb7 Delivery")),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"step9"===this.state.activeStep?" active-link":""),href:"#step9",onClick:function(){e.setState({activeStep:"step9"})}},"9\xb7 StreetBy Commission and Billing")),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"step10"===this.state.activeStep?" active-link":""),href:"#step10",onClick:function(){e.setState({activeStep:"step10"})}},"10\xb7 Infractions")),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"step11"===this.state.activeStep?" active-link":""),href:"#step11",onClick:function(){e.setState({activeStep:"step11"})}},"11\xb7 App Limitations")),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"step12"===this.state.activeStep?" active-link":""),href:"#step12",onClick:function(){e.setState({activeStep:"step12"})}},"12\xb7 Version Updates")),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"step13"===this.state.activeStep?" active-link":""),href:"#step13",onClick:function(){e.setState({activeStep:"step13"})}},"13\xb7 Termination")),o.a.createElement(_.NavItem,null,o.a.createElement(_.NavLink,{className:"nav-link-vertical"+(this.state.activeStep&&"step14"===this.state.activeStep?" active-link":""),href:"#step14",onClick:function(){e.setState({activeStep:"step14"})}},"14\xb7 Amendments")))}},{key:"renderStep0",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("p",{id:"intro"},'These Terms and Conditions ("Terms") constitute a legally binding agreement (\u201cAgreement\u201d) between Agila Innovations, Inc., a company incorporated pursuant to the laws of the Philippines, with principal office address at Unit 301 3rd Floor, Starry Bldg., Max Y. Suniel St., Carmen, Cagayan de Oro City, Philippines, in its capacity as the provider of the mobile application lifestyle platform "StreetBy", and [Full Business Name]  duly organized and existing under the laws of the Philippines, with principal address at [Complete Primary Address]  represented herein by its [Position of the Representative], [Name of Representative] for the provision of the following services:'),o.a.createElement("p",null,"In this Agreement, the words:"),o.a.createElement("p",null,'"we," "us," "our" and "StreetBy" are used to refer to Agila Innovations, Inc. registered  under SEC registration number CS201705224 and developer of the StreetBy mobile application;'),o.a.createElement("p",null,'"you" or "your", \u201cProvider\u201d and \u201cmerchant\u201d is used to refer to [Full Business Name];'),o.a.createElement("p",null,'"consumer", \u201ccustomer\u201d and  \u201cuser\u201d  are used to refer to a natural person who uses the StreetBy mobile application (StreetBy Mobile App\u201d) and purchases products and services made available by the Provider via the StreetBy mobile application;'),o.a.createElement("p",null,"\u201cpage\u201d is used to refer to the business page created by [Full Business Name] for their Provider page;"),o.a.createElement("p",null,"\u201cproducts and services\u201d is used to refer to the products or services of the Provider published and sold on the StreetBy platform;"),o.a.createElement("p",null,'"prices\u201d or \u201crates\u201d are used to refer to the selling price of the product or service of the Merchant;'),o.a.createElement("p",null,"\u201cPayPal\u201d is the online payment gateway for online credit and debit card payments;"),o.a.createElement("p",null,"\u201cpayment gateway\u201d is used to refer to a service which facilitates a payment transaction by the transfer of information between a payment portal (such as a website, mobile phone or interactive voice response service) and the front end processor or acquiring bank;"),o.a.createElement("p",null,"\u201cPlatform\u201d is used to refer to the StreetBy Online platform service; an online marketplace that places one party in touch with another, such as the Provider and the consumers."))}},{key:"renderStep1",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{id:"step1"},"1\xb7 Mobile App Service"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"1.1"),"\xb7 StreetBy Mobile App is a marketplace platform for various products and services published by partner merchants and features a StreetBy Provider Solution, by which partner merchants can publish their products and services."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"1.2"),"\xb7 Your usage of this StreetBy Provider Solution signifies you\u2019ve agreed to the StreetBy User Terms and Conditions pertaining to the Ratings and Reviews, Refunds and Returns, Notifications, Trademarks and Copyrights, Prohibited Activities, Cookies, and Privacy Policy."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"1.3"),"\xb7 StreetBy shall charge Provider a transactional fee equivalent to a percentage commission for every paid transaction booked through the StreetBy Mobile App."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"1.4"),"\xb7 StreetBy will assist User regarding StreetBy Mobile App technical issues."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"1.5"),"\xb7 StreetBy shall carry out maintenance measures that ensure the proper or improved functioning of StreetBy Mobile App. StreetBy may improve, enhance and modify the StreetBy Provider Solution and introduce new StreetBy services from time to time;"),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"1.6"),"\xb7 If you access or download the mobile application from the Apple App Store, you agree to Apple\u2019s Licensed Application End User License Agreement.")))}},{key:"renderStep2",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{id:"step2"},"2\xb7 Provider Page Creation, Verification, and Activation"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"2.1"),"\xb7 The account (email and password) used upon registering as a User will serve as your account as a Provider."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"2.2"),"\xb7 You agree to provide, maintain and update true, accurate, current, active, and complete information about your business as prompted by the page creation process."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"2.3"),"\xb7 You are allowed to create multiple pages under one Provider account."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"2.4"),"\xb7 You are required to provide complete business information upon page creation. The following information required on page setup will include but are not limited to, the following:"),o.a.createElement("ul",null,o.a.createElement("li",null,"Page name \u2013 name of business;"),o.a.createElement("li",null,"Email address \u2013 active email address;"),o.a.createElement("li",null,"Contact number/s \u2013 active mobile and landline numbers;"),o.a.createElement("li",null,"Bank account \u2013 bank account details (account name, number, and bank name);")),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"2.5"),"\xb7 You will be provided a verification code via short messaging service after submitting your mobile number."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"2.6"),"\xb7 You may not impersonate any person or entity or misrepresent your identity or affiliation with any person or entity, including using another person\u2019s username, password, or other account information."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"2.7"),"\xb7 You are entirely responsible for maintaining the confidentiality of your password and account and for all the activity you made. If you believe that your account has been compromised, you must immediately contact us by email at: support@streetby.com. You agree to hold harmless StreetBy for losses incurred by you or another party due to someone else using your account as a result of your failure to safeguard your password."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"2.8"),"\xb7 StreetBy shall conduct page verification after initial page setup. For this purpose, you may be requested to submit documents necessary to verify your business existence and ownership."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"2.9"),"\xb7 StreetBy shall activate the page once the setup and verification process are complete.")))}},{key:"renderStep3",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{id:"step3"},"3\xb7 Publication of Products and Services"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"3.1"),"\xb7 You may add products and services you intend to sell on the StreetBy Mobile App."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"3.2"),"\xb7 Mark-up will be allowed, provided that prices will remain reasonable and competitive in the market."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"3.3"),"\xb7 You shall update the accurate information of the published product and services as necessary."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"3.4"),"\xb7 StreetBy shall render the necessary assistance in setting up the Provider\u2019s pages, or in publishing products and information, as requested by the Provider."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"3.5"),"\xb7 You shall ensure that the product information, related content materials, and the offer and subsequent sale of any of the products and services, comply with applicable Laws (including all minimum age, marking and labelling requirements, product warranties, specifications, drawings, samples, and performance criteria) and do not contain any sexually explicit and implicit (except to the extent expressly permitted in written form by StreetBy and allowed under applicable Laws), defamatory, or obscene materials.")))}},{key:"renderStep4",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{id:"step4"},"4\xb7 Payment Methods"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"4.1"),"\xb7 You are required to accept from three (3) modes of payment for StreetBy Mobile App transactions: (a) cash; (b) credit or debit card through a payment gateway; and (c) PayPal account through PayPal gateway (d) GCash., in accordance with Section 9 hereof. Charges of 3.84% for global pay and paynamics, and 4.4%+15PHP Paypal fee will be charged from the merchant.")))}},{key:"renderStep5",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{id:"step5"},"5\xb7 Orders and User Payments"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"5.1"),"\xb7 StreetBy is a platform for the sale of your products and services to consumers. Issues regarding damage, poor quality, and false representation of your products and services are between you and the User, except in case of spoilage or adulteration of the product due to any mishaps in delivery by StreetBy."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"5.2"),"\xb7 You understand that Users\u2019 booking options (dine-in, pick-up, delivery, booking for accommodation or service) are dependent on your product application settings."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"5.3"),"\xb7 You shall respond to Users\u2019 bookings of products and services. You understand that User transaction fulfillment requires either the confirmation or cancellation of an order. You shall coordinate with User and StreetBy support for application transaction-related matters beyond the current application features or services, if any."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"5.4"),"\xb7 The merchant shall provide the User with products consistent with the order details. StreetBy will consider paid transactions as true and legitimate. Provided that StreetBy shall reimburse any commission billed in case of refunds of payment by User due to glitches in the StreetBy Mobile App system."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"5.5"),"\xb7 You are expected to only receive the total net amount for cash-on-delivery transactions (Price of product plus any related fees less StreetBy Commission) and non-delivery cash transactions (Price of product plus any related fees less merchant or StreetBy- initiated discounts, wallet or points used, if any) indicated on the order payment details, no more, no less. Transactions through online gateway will be remitted as provided in Section 9.2."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"5.6"),"\xb7 Unless provided with valid reason by both parties (User and provider), series of successive order cancellations by either User or Provider may cause StreetBy to temporarily suspend account of either User or Provider, as the case maybe."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"5.7"),"\xb7 StreetBy does not display the decimal values on home feed, search feed, and merchant pages for aesthetic purposes. The exact value including the decimal value will be taken into account upon booking.")))}},{key:"renderStep6",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{id:"step6"},"6\xb7 StreetBy Pay - Discounts, Promos, Points, and Wallet"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"6.1"),"\xb7 You understand that StreetBy may occasionally extend discounts and promos to Users for promotional activities tagged as StreetBy Pay on the application. The cost of said discounts and promotions shall be exclusively borne by StreetBy."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"6.2"),"\xb7 These discounts and promos may or may not be used in conjunction with other promos."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"6.3"),"\xb7 You understand as well that User may earn points for their paid bookings. Orders still for confirmation and pending for payment will not entitle User to earn points. Points earned are equivalent to the total worth of their paid order excluding PayPal fee and other charges StreetBy may permit as excluded."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"6.4"),"\xb7 You understand that User may use points for payment or as deduction from their order payment before delivery charges:  Two hundred (200) points is equal to One Peso (Php 1.00)."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"6.5"),"\xb7 You understand that StreetBy allows User to use their StreetBy Wallet credits (i.e. Gift card credits) as payment for their orders."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"6.6"),"\xb7 You understand that User will only pay the total amount indicated on the application - Gross price less the StreetBy Pay (Discounts, Promos, Wallet, and Points) if any. In case of cash payment and the delivery is done by the Provider, as provided in Sections 8.2 and 8.3, the total amount (including the Delivery fee)  indicated on the StreetBy Mobile App  should be collected by you or your staff-in-charge, unless additional charges are agreed between User and Provider.")))}},{key:"renderStep7",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{id:"step7"},"7\xb7 Other Charges"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"7.1"),"\xb7 You are required to accept from three (3) modes of payment for StreetBy Mobile App transactions: (a) cash; (b) credit or debit card through a payment gateway; and (c) PayPal account through PayPal gateway (d) GCash., in accordance with Section 9 hereof. Charges of 3.84% for global pay and paynamics, and 4.4%+15PHP Paypal fee will be charged from the merchant.")))}},{key:"renderStep8",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{id:"step8"},"8\xb7 Delivery"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"8.1"),"\xb7 StreetBy Delivery Service is a feature of the StreetBy Mobile App enabling Users to book orders and have orders delivered from your business premises to the location entered by the User."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"8.2"),"\xb7 StreetBy Delivery Service can be operated by StreetBy, operated by a User registering as a partner delivery service (the \u201cpartner-rider\u201d), or can be operated by the merchant (as provider) by adding a product as exclusive delivery service."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"8.3"),"\xb7 When a merchant chooses to deliver, it can only deliver its own products."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"8.4"),"\xb7 In case of delivery by StreetBy, the order details shall indicate an estimated delivery pick-up time and delivery time. Estimated times may be dependent on the merchant's preparation time and factors such as traffic, delivery service involved in an accident, broken down vehicle, weather conditions, and events caused by external parties or acts of God. StreetBy shall properly notify the User and the Provider in case StreetBy Delivery Service is not available."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"8.5"),"\xb7 Any damage or loss of product is the responsibility of the delivery service from the time it leaves the merchant\u2019s business premises up to the point it reaches the User provided that the packaging is secured, and the product is in good condition upon pick-up."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"8.6"),"\xb7 The merchant shall ensure the secured packaging of product to preserve temperature, quality, and avoid spillage. Delivery service should ensure the merchant's responsibility for the packaging once they leave the merchant\u2019s premises. If it is evident that packaging is not secure, delivery service is entitled to return and request for an appropriate and secured packaging."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"8.7"),"\xb7 Delay or return of delivery may be charged to the merchant due to missing item/s, unsecured packaging, or wrong item/s, except if the same is due to StreetBy\u2019s riders or partner-rider\u2019s fault or negligence. In case of damage or spoilage to the products due to StreetBy\u2019s, or its directors\u2019, officers\u2019, employees\u2019, agents\u2019, assigns\u2019, riders\u2019, or partner-riders\u2019 negligence, fault, or omission, the cost of the damage, including but not limited to the replacement cost of the product, shall be borne by StreetBy.")))}},{key:"renderStep9",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{id:"step9"},"9\xb7 StreetBy Commission and Billing"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"9.1"),"\xb7 StreetBy will charge [Commission Rate] ([Commission Rate (Text)]) commission on the gross payment (price plus any related charges) of every successful paid transaction, subject to Section 5.4 hereof."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"9.2"),"\xb7 Customer payments paid using the online gateway (credit card, debit, PayPal account) shall be credited to StreetBy\u2019s payment gateway account and gross price of Merchant\u2019s product plus any additional charges by the merchant shall be credited every 15th and 30th of the month to the PROVIDER (thru bank account deposit) less the commission, debit/credit card fees and charges, and delivery services, if applicable, provided Merchant\u2019s crediting account details are accurately setup. It is hereby understood that StreetBy holds the sums payable to the Provider in trust, and StreetBy shall remit the same to the Provider without unnecessary delay. The Provider shall be entitled to the full remedies available under this agreement and the law in case of StreetBy\u2019s non-remittance of the sums due to the Provider, including but not limited to, civil, criminal, and administrative civil actions."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"9.3"),"\xb7 Cash transactions shall be billed accordingly: (a) for cash-on-delivery transactions, commission shall be deducted upon payment of rider; (b) non-delivery cash transactions, commission shall be billed by StreetBy on a monthly schedule."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"9.4"),"\xb7 StreetBy may, at some unforeseen or uncontrolled events, send a billing statement at a later date, the payment of which shall be adjusted accordingly."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"9.5"),"\xb7 Discounts, Promos, Points, and Wallet credits, collectively termed as StreetBy Pay, are accounted for by StreetBy as a promotional tool extended to Users. Therefore, StreetBy should remit back these credits upon billing. StreetBy will remit the total amount accounted as Discounts, Promos, Points, and Wallet credits for the month\u2019s transactions as a deduction from StreetBy\u2019s commission fee. In the case that the total amount accounted as Discounts, Promos, Points, and Wallet credits for the month\u2019s transactions exceeds Provider\u2019s payable to StreetBy, StreetBy shall pay for the excess amount to the Provider.")))}},{key:"renderStep10",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{id:"step10"},"10\xb7 Infractions"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"10.1"),"\xb7 As a Provider, you are subject to the sanctions indicated on the infraction table which shall be provided by the account manager upon completion of page verification."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"10.2"),"\xb7 You understand that StreetBy may temporarily deactivate your page in accordance to any infraction committed on the table."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"10.3"),"\xb7 The infractions and corresponding sanctions are subject to change with prior notice and may be disseminated through any of these channels: email, sms or push notification, or on-site visit.")))}},{key:"renderStep11",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{id:"step11"},"11\xb7 App Limitations"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"11.1"),"\xb7 Due to the nature of the Internet, StreetBy Mobile App cannot guarantee the uninterrupted availability and accessibility of the StreetBy Provider Solution. It can only be accessed through a validated distribution mobile application store and can only be downloaded and updated from the Apple App Store and Google Playstore. StreetBy warrants any damages from accessing any non verified website aside from the mentioned mobile application store."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"11.2"),"\xb7 There may be smartphone models whose specifications are not supported by StreetBy due to incompatibility or app limitations.")))}},{key:"renderStep12",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{id:"step12"},"12\xb7 Version Updates"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"12.1"),"\xb7  StreetBy shall advise Provider for any version updates through any of these methods: email, application feed, social media, and push notifications. It is your responsibility to update to the latest required version for the application features to function properly.")))}},{key:"renderStep13",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{id:"step13"},"13\xb7 Termination"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"13.1"),"\xb7 A party has the right to terminate this agreement at anytime for whatever cause upon a prior thirty (30) day notice to the other party. In case of any breach of the terms thereof which remain unremedied for a period of fifteen (15) days from the receipt of the written notice from the aggrieved party, the aggrieved party may terminate this agreement immediately upon a prior written notice to the erring party.")))}},{key:"renderStep14",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{id:"step14"},"14\xb7 Amendments"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"14.1"),"\xb7 This agreement may be amended by the parties upon their mutual written agreement."),o.a.createElement("li",null,o.a.createElement("span",{className:"txt-bold"},"14.2"),"\xb7 This agreement is between the company and the provider only. StreetBy will not be liable for any agreement between the provider and it\u2019s sub-merchants.")))}},{key:"renderPageVerified",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"success"},o.a.createElement("h4",{className:"alert-heading"},"Already Agreed with our Terms & Policies"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"Please update your store information. Click "," "," ",o.a.createElement(ie.a,{to:"/page"},"here")," "," "," to proceed your store.")))))))}},{key:"renderNoPageAdded",value:function(){return o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardBody,null,o.a.createElement(_.Alert,{color:"danger"},o.a.createElement("h4",{className:"alert-heading"},"No Page Added"),o.a.createElement("hr",null),o.a.createElement("p",{className:"mb-0"},"You have not added a page yet. Click"," "," ",o.a.createElement(ie.a,{to:"/add-page"},"here")," "," ","to add a new page.")))))))}},{key:"render",value:function(){var e=JSON.parse(N("pageInfo"));return this.state.isLoading?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h3",{className:"title text-navy"},"Statement of Agreement")),o.a.createElement(_.CardBody,null,o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading}))))))):e&&e._id?!0!==e.isVerified?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content",style:{paddingBottom:"unset"}},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Card,{style:{marginBottom:"unset"}},o.a.createElement(_.CardHeader,null,o.a.createElement("h2",{className:"title text-navy"},"Statement of Agreement")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"3",lg:"3"},this.renderVerticalNavBar()),o.a.createElement(_.Col,{sm:"12",md:"9",lg:"9",style:{lineHeight:"1.5rem"}},o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",className:"soa"},this.renderStep0(),this.renderStep1(),this.renderStep2(),this.renderStep3(),this.renderStep4(),this.renderStep5(),this.renderStep6(),this.renderStep7(),this.renderStep8(),this.renderStep9(),this.renderStep10(),this.renderStep11(),this.renderStep12(),this.renderStep13(),this.renderStep14())))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12",style:{marginTop:"15px",borderTop:"2px solid #004085"}},o.a.createElement(_.Form,null,o.a.createElement(_.FormGroup,null,o.a.createElement("label",{style:{marginTop:"15px"}},o.a.createElement(_.Input,{type:"checkbox",className:"enable-disable-checkbox",id:"iAgree",name:"iAgree",checked:this.state.iAgree,onChange:this.handleCheckAgree}),o.a.createElement("span",{className:"form-check-sign"},o.a.createElement("span",{className:"check"})),o.a.createElement("span",{className:"txt-semi-bold"},"I agree with the Statement of Agrement"))),o.a.createElement(_.FormGroup,null,o.a.createElement(_.Button,{className:"btn-fill btn-round",color:"info",type:"submit",onClick:this.handleSubmit},"SUBMIT")))))))))),o.a.createElement(z.a,{active:this.state.isSaving,spinner:!0,text:"Saving..."})):this.renderPageVerified():this.renderNoPageAdded()}}]),t}(o.a.Component),Za=Object(E.b)(function(){return{}},{getPageById:X,updatePage:$})(Xa),$a=function(e){function t(e){var a;Object(i.a)(this,t);var n=JSON.parse(N("userData"));return(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleFileSelect=function(e){var t=e.target.files[0];a.setState({file:t})},a.handleFileUpload=function(e){if(!window.confirm("Do you want to continue uploading the voucher codes?"))return!1;a.setState({isUploading:!0});var t=JSON.parse(N("userData")),n=JSON.parse(N("defaultPage")),r="";t?r=t.sessionToken:(a.props.history.push("/login"),window.location.reload());var o=a.state.file;if(o&&o instanceof File)if("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===o.type||"application/vnd.ms-excel"===o.type){var l=new FileReader;l.onload=function(e){var t=e.target.result,a=Ut.a.read(t,{type:"binary"});a.SheetNames.forEach(function(e){var t=Ut.a.utils.sheet_to_row_object_array(a.Sheets[e]),o=JSON.stringify(t),l=JSON.parse(o),s={vouchers:l};r&&l&&l instanceof Array&&l.length>0&&D(r).post("/product-vouchers/".concat(n,"/import-product-vouchers-from-excel"),s).then(function(e){e.data?"OK"===e.statusText&&e.data&&e.data.length>0&&alert("You successfully added ".concat(e.data.length," vouchers codes!")):alert("There is an error uploading the vouchers. No response from server.")}).catch(function(e){console.error({error:e}),"string"===typeof e?alert(e):e.response&&e.response.data&&e.response.data.message&&"string"===typeof e.response.data.message?alert(e.response.data.message):alert("There is an error uploading the vouchers. Please try again.")})})},l.readAsBinaryString(a.state.file),a.setState({isUploading:!1,file:{}}),setTimeout(function(){var e=a.props.location.search,t=je.a.parse(e),n="?"+je.a.stringify(t);a.refreshProductVouchers(n),document.getElementById("fileUploader").value=null},1500)}else a.setState({isUploading:!1,file:{}}),setTimeout(function(){document.getElementById("fileUploader").value=null},2e3),a.showNotificationError("Invalid Excel file. Please select an .xls or .xlsx file only.");else a.setState({isUploading:!1}),a.showNotificationError("No file selected. Please select an excel file.")},a.handlePageChange=function(e){a.setState({isLoading:!0});var t=JSON.parse(N("defaultPage")),n=a.props.location.search,r=je.a.parse(n);delete r.message,r.status&&"all"===r.status&&delete r.status,r.page=e,r.place=t;var o="?"+je.a.stringify(r);a.setState({activePage:e}),a.refreshProductVouchers(o)},a.handleChangePerPage=function(e){a.setState({isLoading:!0});var t=e.target.value,n=JSON.parse(N("defaultPage")),r=a.props.location.search,o=je.a.parse(r);delete o.message,o.status&&"all"===o.status&&delete o.status,o.place=n,""!==t?o.size=t:delete o.size;var l="?"+je.a.stringify(o);a.setState({size:t}),a.refreshProductVouchers(l)},a.handleChangeStatus=function(e){if(e&&e.value&&e.value.length){var t=e.value;a.setState({filterStatus:t});var n=a.props.location.search,r=je.a.parse(n);r.status=t;var o="?"+je.a.stringify(r);a.refreshProductVouchers(o)}},a.handleSelectProduct=function(e){if(e&&e.value&&e.value.length){var t=e.value;a.setState({filterProduct:t});var n=a.props.location.search,r=je.a.parse(n);r.product=t;var o="?"+je.a.stringify(r);a.refreshProductVouchers(o)}},a.handleChangeKeyword=function(e){var t=e.target&&e.target.value?e.target.value:"";a.setState({keyword:t})},a.handleEnter=function(e){if("Enter"===e.key){a.setState({isLoading:!0,activePage:1});var t=a.state.keyword,n=a.props.location.search,r=je.a.parse(n);delete r.page,r.status&&"all"===r.status&&delete r.status,""!==t?r.keyword=t.trim():delete r.keyword;var o="?"+je.a.stringify(r);a.refreshProductVouchers(o)}},a.state={userExist:!1,payload:"",invalidJsonText:"",vouchers:[],file:{},totalItems:0,isLoading:!0,submitted:!1,isUploading:!1,userData:n,voucherCodes:[],pagination:{},activePage:1,size:50,keyword:"",filterStatus:"all",statusList:[{value:"all",label:"Select status"},{value:"used",label:"Used"},{value:"notUsed",label:"Not Used"}],filterProduct:"all",productList:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("defaultPage")),a=JSON.parse(N("userData")).sessionToken;this.props.getProductsByPageId(t,{size:100},a,function(t,a){if(!t&&a){var n=[{value:"all",label:"Select product"}],r=a.products;r&&r.length>0&&r.forEach(function(e){var t={value:e._id,label:e.name};n=[].concat(Object(Ne.a)(n),[t])}),e.setState({productList:n})}});var n=this.props.location.search,r=je.a.parse(n),o=r.page?Number(r.page):1;this.setState({filterProduct:r.product?r.product:"all",keyword:r.keyword?r.keyword:"",filterStatus:r.status?r.status:"all",activePage:o}),r.status&&"all"===r.status&&delete r.status;var l="?"+je.a.stringify(r);this.refreshProductVouchers(l)}},{key:"showNotification",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"success",icon:"",autoDismiss:5};t&&this.refs.notify&&this.refs.notify.notificationAlert&&this.refs.notify.notificationAlert(t)}}},{key:"showNotificationError",value:function(e){if(e){var t={place:"tc",message:o.a.createElement("div",null,o.a.createElement("div",null,e)),type:"danger",icon:"",autoDismiss:5};t&&this.refs.notify&&this.refs.notify.notificationAlert&&this.refs.notify.notificationAlert(t)}}},{key:"refreshProductVouchers",value:function(e){var t=this,a=je.a.parse(e),n=a.message;n&&(delete a.message,this.showNotification(n)),this.props.history.push("/product-vouchers"+e);var r=JSON.parse(N("userData")),o=JSON.parse(N("defaultPage")),l=r.sessionToken;null!==r&&l&&o&&(a.place=o,D(l).get("/product-vouchers",{params:a}).then(function(e){if(e&&e.data){var a=e.data.docs,n={total:e.data.total,limit:e.data.limit,offset:e.data.page};t.setState({voucherCodes:a,pagination:n},function(){this.setState({isLoading:!1})})}}).catch(function(e){console.error({error:e})}))}},{key:"render",value:function(){var e=this;if(this.state.isLoading)return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h3",{className:"title"},"Voucher Codes")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",sm:"12"},o.a.createElement(Ve.PulseLoader,{sizeUnit:"px",size:15,color:"#1d8cf8",loading:this.state.isLoading})))))))));var t=this.state,a=t.voucherCodes,n=t.pagination,r=t.activePage;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"react-notification-alert-container"},o.a.createElement(Ye.a,{ref:"notify"})),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{sm:"12",md:"12",lg:"12"},o.a.createElement(_.Card,null,o.a.createElement(_.CardHeader,null,o.a.createElement("h3",{className:"title"},"Voucher Codes")),o.a.createElement(_.CardBody,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",sm:"12"},o.a.createElement(_.Form,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12",sm:"12"},o.a.createElement(_.FormGroup,{className:this.state.submitted&&!this.state.payload?" has-danger":""},o.a.createElement("label",{htmlFor:"payload",className:"control-label"},"Upload Voucher Codes. Select Excel file to upload"),o.a.createElement("p",{className:"text-danger"},this.state.invalidJsonText),o.a.createElement("input",{type:"file",id:"fileUploader",name:"fileUploader",onChange:this.handleFileSelect,accept:".xls, .xlsx",style:{width:"auto",opacity:1,position:"relative"}})))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12",sm:"12"},o.a.createElement(_.Button,{className:"btn-fill btn-round btn-sm",color:"info",type:"button",onClick:this.handleFileUpload},"Upload Vouchers"),o.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",className:"btn btn-fill btn-round btn-info btn-sm",href:"https://drive.google.com/file/d/1dPZzfp5oPROcV8M_UK5iSj3zSAbaAVb0/view?usp=sharing"},"Download Template")))))),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{className:"pr-md-1",sm:"12"},o.a.createElement("h4",null,"List of Voucher Codes"),o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"4"},o.a.createElement(_.FormGroup,null,o.a.createElement(_.Input,{id:"keyword",name:"keyword",type:"text",placeholder:"Search...",onChange:this.handleChangeKeyword,onKeyPress:this.handleEnter,value:this.state.keyword}))),o.a.createElement(_.Col,{md:"4"},o.a.createElement(_.FormGroup,null,o.a.createElement(Ke.a,{className:"react-select",styles:{fontSize:"13px !important"},options:this.state.statusList,onChange:this.handleChangeStatus,placeholder:"Select status",value:this.state.statusList.filter(function(t){return t.value===e.state.filterStatus})}))),o.a.createElement(_.Col,{md:"4"},o.a.createElement(_.FormGroup,null,o.a.createElement(Ke.a,{className:"react-select",styles:{fontSize:"13px !important"},options:this.state.productList,onChange:this.handleSelectProduct,placeholder:"Select product",value:this.state.productList.filter(function(t){return t.value===e.state.filterProduct})})))),a&&a.length>0?o.a.createElement(_.Table,{className:"product-vouchers table-striped responsive",responsive:!0},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"\xa0"),o.a.createElement("th",{colSpan:"2"},"Code"),o.a.createElement("th",null,"Product"),o.a.createElement("th",null,"Used"),o.a.createElement("th",null,"From"),o.a.createElement("th",null,"Order No."),o.a.createElement("th",null,"Customer"),o.a.createElement("th",null,"Added"))),o.a.createElement("tbody",null,a.map(function(e,t){return o.a.createElement("tr",{key:e._id},o.a.createElement("td",null,t+1,"."),o.a.createElement("td",null,o.a.createElement(ct.a,{size:50,value:e.code})),o.a.createElement("td",null,o.a.createElement("strong",{style:{fontFamily:"monospace"}},e.code)),o.a.createElement("td",null,e.product.name),o.a.createElement("td",null,e.isUsed?o.a.createElement(_.Badge,{color:"secondary"},"YES"):o.a.createElement(_.Badge,{color:"success"},"NO"),o.a.createElement("br",null),o.a.createElement("em",{style:{fontSize:"85%"}},e.dateUsed&&e.dateUsed.length>0?Object(_e.default)(new Date(e.dateUsed),"yyyy-MM-dd hh:mm a"):"")),o.a.createElement("td",null,e.claimedFrom&&e.claimedFrom.length&&e.claimedFrom.toUpperCase()),o.a.createElement("td",null,o.a.createElement("strong",{style:{fontFamily:"monospace"}},e.order&&e.order.length>0?an(e.order):"")),o.a.createElement("td",null,e.customer&&e.customer.firstName&&"".concat(e.customer.firstName," "),e.customer&&e.customer.lastName&&e.customer.lastName,o.a.createElement("br",null),e.customer&&e.customer.email&&o.a.createElement("em",{style:{fontSize:"85%"}},"(",e.customer.email,")")),o.a.createElement("td",null,Object(_e.default)(new Date(e.createdAt),"MMM dd, yyyy hh:mm a")))}))):o.a.createElement("p",null,o.a.createElement("em",{className:"text-danger"},"No vouchers added."))))),o.a.createElement(_.CardFooter,null,o.a.createElement(_.Row,null,o.a.createElement(_.Col,{md:"12"},o.a.createElement(_.Row,{className:"pull-right"},o.a.createElement(_.Col,{md:"4",lg:"4"},o.a.createElement(_.FormGroup,null,this.state.pagination&&this.state.pagination.total>0&&o.a.createElement(_.Input,{style:{marginBottom:"5px"},id:"perPage",name:"perPage",type:"select",onChange:this.handleChangePerPage,value:this.state.size},o.a.createElement("option",{value:"10"},"10 / page"),o.a.createElement("option",{value:"25"},"25 / page"),o.a.createElement("option",{value:"50"},"50 / page"),o.a.createElement("option",{value:"100"},"100 / page")))),o.a.createElement(_.Col,{md:"8",lg:"8"},n&&n.total>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Qe.a,{innerClass:"pagination",activePage:r,itemsCountPerPage:n.limit,totalItemsCount:n.total,pageRangeDisplayed:3,onChange:this.handlePageChange}),o.a.createElement("p",null,"Page ",o.a.createElement("em",null,r)," of ",o.a.createElement("em",null,Math.ceil(n.total/n.limit))," of ",o.a.createElement("em",null,en(n.total))," vouchers.")))))))))),o.a.createElement(z.a,{active:this.state.isUploading,spinner:!0,text:"Uploading vouchers..."})))}}]),t}(o.a.Component),en=function(e){return tn(e,0).replace(/\B(?=(\d{3})+(?!\d))/g,",")},tn=function(e,t){if(void 0===t&&(t=2),0!==e&&(!e||isNaN(e)))throw new Error("price is not a number"+e);return parseFloat(Math.round(100*e)/100).toFixed(t)},an=function(e){var t=e.toString();return"..."+(new Array(t.length-6+1).join("")+t.slice(-6))},nn=[{path:"/add-page",name:"Add Store",rtlName:"",icon:"tim-icons icon-single-copy-04",component:sa,layout:"/admin",showOnSidebar:!1},{path:"/page",name:"Setup Store",rtlName:"",icon:"tim-icons icon-single-copy-04",component:ma,layout:"/admin",showOnSidebar:!0},{path:"/product-categories",name:"Categories",rtlName:"",icon:"tim-icons icon-bullet-list-67",component:Kt,layout:"/admin",showOnSidebar:!0},{path:"/products",name:"Products",rtlName:"",icon:"tim-icons icon-app",component:at,layout:"/admin",showOnSidebar:!0,collapse:!0},{path:"/tours",name:"Tours",rtlName:"",icon:"tim-icons icon-app",component:yt,layout:"/admin",showOnSidebar:!0,collapse:!0},{path:"/tour-dates",name:"Tour Dates",rtlName:"",icon:"tim-icons icon-calendar-60",component:Ct,layout:"/admin",showOnSidebar:!0,collapse:!0},{path:"/products/new",name:"Add Product",rtlName:"",icon:"tim-icons icon-app",component:rt,layout:"/admin",showOnSidebar:!1},{path:"/products/:_id/edit",name:"Edit Product",rtlName:"",icon:"tim-icons icon-app",component:pt,layout:"/admin",showOnSidebar:!1},{path:"/tours/new",name:"Add Tour",rtlName:"",icon:"",component:Ot,layout:"/admin",showOnSidebar:!1},{path:"/tours/:_id/edit",name:"Edit Tour",rtlName:"",icon:"",component:Bt,layout:"/admin",showOnSidebar:!1},{path:"/order-list",name:"Orders",rtlName:"",icon:"tim-icons icon-notes",component:Ha,layout:"/admin",showOnSidebar:!0},{path:"/product-vouchers",name:"Product Vouchers",rtlName:"",icon:"tim-icons icon-tag",component:Object(E.b)(function(){return{}},{getPageById:X,getProductsByPageId:Se})($a),layout:"/admin",showOnSidebar:!0},{path:"/import-products",name:"Import Products",rtlName:"",icon:"tim-icons icon-cloud-download-93",component:Lt,layout:"/ImportVoucherCodesExcel",showOnSidebar:!0},{path:"/import-products-excel",name:"Import Products - XLS",rtlName:"",icon:"tim-icons icon-cloud-download-93",component:Qt,layout:"/admin",showOnSidebar:!0},{path:"/product-categories/new",name:"Add Product Category",rtlName:"",icon:"",component:Xt,layout:"/admin",showOnSidebar:!1},{path:"/product-categories/:_id/edit",name:"Edit Product Category",rtlName:"",icon:"",component:$t,layout:"/admin",showOnSidebar:!1},{path:"/reports/sales",name:"Sales Reports",rtlName:"",icon:"tim-icons icon-coins",component:Ca,layout:"/admin",showOnSidebar:!0},{path:"/reports/order",name:"Order Reports",rtlName:"",icon:"tim-icons icon-cart",component:Oa,layout:"/admin",showOnSidebar:!0},{path:"/reports/product",name:"Product Reports",rtlName:"",icon:"tim-icons icon-chart-bar-32",component:Ba,layout:"/admin",showOnSidebar:!0},{path:"/settings",name:"Account Settings",rtlName:"",icon:"tim-icons icon-settings",component:ha,layout:"/admin",showOnSidebar:!0},{path:"/settings/change-password",name:"Change Password",rtlName:"",icon:"",component:fa,layout:"/admin",showOnSidebar:!1},{path:"/product-images/bulk-upload",name:"Products Images",rtlName:"",icon:"tim-icons icon-cloud-upload-94",component:Va,layout:"/admin",showOnSidebar:!1},{path:"/import-products-json",name:"Import Products - JSON",rtlName:"",icon:"tim-icons icon-cloud-download-93",component:jt,layout:"/admin",showOnSidebar:!1},{path:"/import-categories-excel",name:"Import Categories - XLS",rtlName:"",icon:"tim-icons icon-cloud-download-93",component:Ya,layout:"/admin",showOnSidebar:!1},{path:"/sync-product-categories",name:"Sync Product Categories",rtlName:"",icon:"tim-icons icon-cloud-download-93",component:_a,layout:"/admin",showOnSidebar:!1},{path:"/statement-of-agreement",name:"Statement of Agreement",rtlName:"",icon:"tim-icons icon-paper",component:Za,layout:"/admin",showOnSidebar:!1},{path:"/activate-store",name:"Activate Store",rtlName:"",icon:"tim-icons icon-check-2",component:Wa,layout:"/admin",showOnSidebar:!1}],rn=a(311),on=a.n(rn),ln=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this))).toggleSidebar=function(){document.documentElement.classList.toggle("nav-open"),a.setState({sidebarOpened:!a.state.sidebarOpened})},a.getRoutes=function(e){var t=JSON.parse(N("defaultPage")),n=JSON.parse(N("pageInfo")),r=!(!n||!n.productVouchersEnabled),l=!(!n||!n.productUploadXLSEnabled);return e.map(function(e,n){if("/admin"===e.layout){if(a.state.pageType)if("sb-tours"===a.state.pageType){if("/import-products"===e.path)return null;if("/import-products-excel"===e.path)return null;if("/page"===e.path)return null;if("/product-categories"===e.path)return null;if("/reports/order"===e.path)return null;if("/reports/product"===e.path)return null}else{if("/tours"===e.path)return null;if("/tour-dates"===e.path)return null;if(t){if("5ccfe6aeb99ae3280fd246dc"!==t&&"/import-products"===e.path)return null;if("5ccfe6aeb99ae3280fd246dc"!==t&&"5ea5519c91aec75b7a387d4b"!==t&&!l&&"/import-products-excel"===e.path)return null;if(!r&&"/product-vouchers"===e.path)return null}}else{if("/tours"===e.path)return null;if("/tour-dates"===e.path)return null;if(t&&"5ccfe6aeb99ae3280fd246dc"!==t&&"/import-products"===e.path)return null}return o.a.createElement(f.a,{exact:!0,path:e.path,component:e.component,key:n})}return null})},a.handleBgClick=function(e){a.setState({backgroundColor:e})},a.getBrandText=function(e){for(var t=0;t<nn.length;t++)if(-1!==a.props.location.pathname.indexOf(nn[t].path))return nn[t].name;return"StreetBy"},a.state={backgroundColor:"blue",userData:{},loggedIn:!1,pageType:"food-drink",isLoading:!0,sidebarOpened:-1!==document.documentElement.className.indexOf("nav-open")},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(N("userData")),a=t.sessionToken,n=JSON.parse(N("pageInfo"));if(t&&t.isSBTours?this.setState({pageType:"sb-tours"}):n?n&&"5cd141d10d437be772373ddb"===n.pageType&&this.setState({pageType:"grocery"}):this.props.getProviderPlaces(a,function(t,a){if(!t&&a&&a.places&&a.places instanceof Array&&a.places.length>0){var r=a.places.find(function(e){return e.isDefault});(n=r&&r.place&&r.place._id?r.place:a.places[0].place)&&"5cd141d10d437be772373ddb"===n.pageType&&e.setState({pageType:"grocery"})}}),this.setState({loggedIn:!0,userData:t,isLoading:!1}),navigator.platform.indexOf("Win")>-1){document.documentElement.className+=" perfect-scrollbar-on",document.documentElement.classList.remove("perfect-scrollbar-off"),na=new le.a(this.refs.mainPanel,{suppressScrollX:!0});for(var r=document.querySelectorAll(".table-responsive"),o=0;o<r.length;o++)na=new le.a(r[o])}}},{key:"componentWillUnmount",value:function(){navigator.platform.indexOf("Win")>-1&&(na.destroy(),document.documentElement.className+=" perfect-scrollbar-off",document.documentElement.classList.remove("perfect-scrollbar-on"))}},{key:"componentDidUpdate",value:function(e){if("PUSH"===e.history.action){if(navigator.platform.indexOf("Win")>-1)for(var t=document.querySelectorAll(".table-responsive"),a=0;a<t.length;a++)na=new le.a(t[a]);document.documentElement.scrollTop=0,document.scrollingElement.scrollTop=0,this.refs.mainPanel.scrollTop=0}}},{key:"render",value:function(){if(JSON.parse(N("userData")))return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"wrapper"},o.a.createElement(ye,Object.assign({},this.props,{routes:nn,bgColor:this.state.backgroundColor,logo:{outterLink:"https://www.streetby.com/",text:"StreetBy",imgSrc:on.a},toggleSidebar:this.toggleSidebar})),o.a.createElement("div",{className:"main-panel",ref:"mainPanel",data:this.state.backgroundColor},o.a.createElement(ge,Object.assign({},this.props,{brandText:this.getBrandText(this.props.location.pathname),toggleSidebar:this.toggleSidebar,sidebarOpened:this.state.sidebarOpened})),o.a.createElement(g.a,null,this.getRoutes(nn),o.a.createElement(f.a,{path:"*",component:Ae})),-1!==this.props.location.pathname.indexOf("statement-of-agreement")?null:o.a.createElement(fe,{fluid:!0}))),o.a.createElement(ve,{bgColor:this.state.backgroundColor,handleBgClick:this.handleBgClick}),o.a.createElement(z.a,{active:this.state.isLoading,spinner:!0,text:"Loading..."}));this.props.history.push("/login"),window.location.reload()}}]),t}(o.a.Component),sn=Object(E.b)(function(){return{}},{getProviderPlaces:F})(ln),cn=a(106),dn=a(21),mn=a(108);a(709),a(710),a(711);cn.b.add(dn.z,dn.o,dn.a,dn.l,dn.m,dn.L,mn.d,mn.a,dn.M,dn.H,dn.R,dn.S,dn.P,mn.b,mn.c,dn.t,dn.u,dn.w,dn.N,dn.b,dn.Q,dn.s,dn.r,dn.A,dn.B,dn.d,dn.c,dn.k,dn.h,dn.i,dn.j,dn.D,dn.G,dn.n,dn.q,dn.O,dn.e,dn.f,dn.p,dn.I,dn.K,dn.v,dn.F,dn.y,dn.x,dn.J,dn.E,dn.C,dn.g);var un=Object(y.a)(),pn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={loggedIn:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){if(null===N("userData"))return this.setState({loggedIn:!1});this.setState({loggedIn:!0})}},{key:"render",value:function(){return o.a.createElement(E.a,{store:x},o.a.createElement(p.a,{history:un},o.a.createElement(h.a,null,o.a.createElement(g.a,null,o.a.createElement(f.a,{exact:!0,path:"/",component:W}),o.a.createElement(f.a,{exact:!0,path:"/login",component:W}),o.a.createElement(f.a,{exact:!0,path:"/register",component:oe}),o.a.createElement(f.a,{path:"/",render:function(e){return o.a.createElement(sn,e)}})))))}}]),t}(o.a.Component);a(712),a(713),a(714),a(715);s.a.render(o.a.createElement(pn,null),document.getElementById("root"))},78:function(e,t,a){e.exports=a.p+"static/media/sb-pin-logo-blu.877f4495.png"}},[[316,1,2]]]);
//# sourceMappingURL=main.03e50478.chunk.js.map